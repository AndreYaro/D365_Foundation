<?xml version="1.0" encoding="utf-8"?>
<AxForm xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="Microsoft.Dynamics.AX.Metadata.V6">
	<Name>PSAProjProposalSelectionCLIN</Name>
	<SourceCode>
		<Methods xmlns="">
			<Method>
				<Name>classDeclaration</Name>
				<Source><![CDATA[
[Form]
public class PSAProjProposalSelectionCLIN extends FormRun
{
    ProjTable                               m_tProjTable;
    SalesUpdate                             salesUpdate;
    ProjProposalJour                        projProposalJour;
    ProjTmpInvoiceFundingSource             invoiceFundingSources;
    PSAImageListAppl                        m_oImageList;

    ProjInvoiceTable                        m_tProjInvoiceTable;

    ProjInvoiceProposalRuleCreateLines      proposalCreateLines;

    boolean                                 isAddLines;
    boolean                                 isInitialized;
    boolean                                 cdsLockingOptionCreateInvoiceProposals;

    [FormObservable]
    Amount                                  grossInvoiceAmount;
    [FormObservable]
    Amount                                  deductionAmount;

    QueryBuildRange                         qbrTransSummaryRecId;

    ProjInvoiceProposalCreateLinesParams    proposalParams;

    ProjDimensionValuesControl              projDimensionValuesControl;
    DimensionHierarchy                      dimHier;

    private boolean skipRecalculateProposalTotals;

    private boolean enableProjMultipleContractLinesForProjectFeature = ProjMultipleContractLinesForProjectFeatureHelper::isFeatureEnabled();
    private boolean filterbyProjIdEnabled = FeatureStateProvider::isFeatureEnabled(ProjBillingRulesInvoiceFilterbyProjIDFeature::instance());

    protected boolean delaySearchOption; // Used to indicate user preference on suppressing initial search
    protected boolean searchNow; // Flag allowing to suppress the function of the delay search option. This is used in search button press where searching must happen regardless of that setting.

    protected boolean enableInvoiceProposalCreationgPerfEnhanced = FeatureStateProvider::IsFeatureEnabled(ProjInvoiceProposalPerformanceEnhancementFeature::instance());
    private boolean projInvoiceProposalBillingRulesCursorFixFlight = ProjInvoiceProposalBillingRulesCursorFixFlight::instance().isEnabled();

    #define.CurrentVersion(1)
    #localMacro.CurrentList
        delaySearchOption
    #endMacro

}
]]></Source>
			</Method>
			<Method>
				<Name>pack</Name>
				<Source><![CDATA[
    /// <summary>
    /// Packs up last used values list.
    /// </summary>
    /// <returns>Container representation of values.</returns>
    public container pack()
    {
        return [#CurrentVersion, #CurrentList];
    }

]]></Source>
			</Method>
			<Method>
				<Name>unpack</Name>
				<Source><![CDATA[
    /// <summary>
    /// Initializes last used values from a packed container.
    /// </summary>
    /// <param name = "_pack">The container holding last used values in the list.</param>
    /// <returns>True if data version matched and the values were initialized; otherwise false.</returns>
    public boolean unpack(container _pack)
    {
        boolean ret = false;

        int version = conPeek(_pack, 1);

        switch (version)
        {
            case #CurrentVersion:
                [version, #CurrentList] = _pack;
                ret = true;
                break;
        }

        return ret;
    }

]]></Source>
			</Method>
			<Method>
				<Name>lastValueDataAreaId</Name>
				<Source><![CDATA[
    /// <summary>
    /// Returns the company for the purposes of saving/retrieving the last value.
    /// </summary>
    /// <returns>The company for the purposes of saving/retrieving the last value.</returns>
    public DataAreaId lastValueDataAreaId()
    {
        return curext();
    }

]]></Source>
			</Method>
			<Method>
				<Name>lastValueDesignName</Name>
				<Source><![CDATA[
    /// <summary>
    /// Returns the design namefor the purposes of saving/retrieving the last value.
    /// </summary>
    /// <returns>The design name for the purposes of saving/retrieving the last value.</returns>
    public IdentifierName lastValueDesignName()
    {
        return '';
    }

]]></Source>
			</Method>
			<Method>
				<Name>lastValueElementName</Name>
				<Source><![CDATA[
    /// <summary>
    /// Returns the element name for the purposes of saving/retrieving the last value.
    /// </summary>
    /// <returns>The element name for the purposes of saving/retrieving the last value.</returns>
    public IdentifierName lastValueElementName()
    {
        return this.name();
    }

]]></Source>
			</Method>
			<Method>
				<Name>lastValueType</Name>
				<Source><![CDATA[
    /// <summary>
    /// Returns the type of element for the purposes of saving/retrieving the last value.
    /// </summary>
    /// <returns>The type of element for the purposes of saving/retrieving the last value.</returns>
    public UtilElementType lastValueType()
    {
        return UtilElementType::Form;
    }

]]></Source>
			</Method>
			<Method>
				<Name>lastValueUserId</Name>
				<Source><![CDATA[
    /// <summary>
    /// Returns the userId for the purposes of saving/retrieving the last used values.
    /// </summary>
    /// <returns>The userId for the purposes of saving/retrieving the last used values.</returns>
    public UserId lastValueUserId()
    {
        return curUserId();
    }

]]></Source>
			</Method>
			<Method>
				<Name>initParmDefault</Name>
				<Source><![CDATA[
    /// <summary>
    /// Initializes default values for last values if none are found.
    /// </summary>
    public void initParmDefault()
    {
        // No-op, since regular default value of "false" is sufficient
        // but the method must exist, as it will be called by the framework as part of getting last value in some cases
    }

]]></Source>
			</Method>
			<Method>
				<Name>editDisplayAutomatically</Name>
				<Source><![CDATA[
    /// <summary>
    /// Edit method that controls whether matching transactions should be displayed automatically or search should be suspended on initial load.
    /// </summary>
    /// <param name = "_set">A boolean determining whether the value should be persisted.</param>
    /// <param name = "_displayAutomatically">The value to be set.</param>
    /// <returns>The current value</returns>
    /// <remarks>This method is opposite to the delaySearchOption value to provide the desired user experience.</remarks>
    public edit boolean editDisplayAutomatically(boolean _set, boolean _displayAutomatically = !delaySearchOption)
    {
        if (enableInvoiceProposalCreationgPerfEnhanced)
        {
            delaySearchOption = true;
            ProjParameters projParameters = ProjParameters::find();
            if (projParameters && projParameters.CreateInvoiceProposalDisplayAutomatically == NoYes::Yes)
            {
                delaySearchOption = false;
            }
        }
        else
        {
            if (_set)
            {
                delaySearchOption = !_displayAutomatically;
            }
        }

        return !delaySearchOption;
    }

]]></Source>
			</Method>
			<Method>
				<Name>buttonIndirectComponentTrans</Name>
				<Source><![CDATA[
    void buttonIndirectComponentTrans()
    {
        mibIndirectComponentTrans.enabled(psaTmpProjProposalTrans.canShowIndirectComponentTrans());
    }

]]></Source>
			</Method>
			<Method>
				<Name>calcGrossInvoiceAmount</Name>
				<Source><![CDATA[
    public Amount calcGrossInvoiceAmount()
    {
        PSATmpProjProposalSummary localDS;

        localDS.setTmpData(psaTmpProjProposalSummary);

        select sum(InvoiceAmount) from localDS where
            localDS.Selected == true;

        return localDS.InvoiceAmount;
    }

]]></Source>
			</Method>
			<Method>
				<Name>closeOk</Name>
				<Source><![CDATA[
    public void closeOk()
    {
        ProjInvoiceProposalInsertLines  projInvoiceProposalInsertLines;

        Args                    args = new Args();
        MenuFunction            menuFunction;
        List                    proposalIdList;
        ListEnumerator          proposalIdEnumerator;
        ProjProposalId          proposalId;
        Query                   detailsFormQuery;
        QueryBuildDataSource    projProposalDataSource;
        QueryBuildRange         proposalIdRange;

        void updateCallerDisplay()
        {
            if (projProposalJour)
            {
                element.args().caller().updateDisplay(false);
                FormDataUtil::getFormDataSource(projProposalJour).active();
            }
        }

        xSysLastValue::saveLast(this);

        if (!proposalCreateLines)
        {
            throw warning("@PSA10213");
        }

        projInvoiceProposalInsertLines = new ProjInvoiceProposalInsertLines(proposalCreateLines, false);

        if (projProposalJour)
        {
            projInvoiceProposalInsertLines.parmProjProposalJourExtern(projProposalJour);
            projInvoiceProposalInsertLines.parmShowMessages(false);
        }

        if (skipRecalculateProposalTotals)
        {
            projInvoiceProposalInsertLines.parmSkipRecalculateProposalTotals(true);
            projProposalJour.setRecalculateTotalsStatus(ProjProposalRecalculateTotalsStatus::Required);
        }

        projInvoiceProposalInsertLines.runOperation();

        proposalIdList = projInvoiceProposalInsertLines.getProposalIdList();

        if (proposalIdList.elements() && !isAddLines)
        {
            detailsFormQuery       = new Query();

            projProposalDataSource = detailsFormQuery.addDataSource(tableNum(ProjProposalJour));

            proposalIdEnumerator   = proposalIdList.getEnumerator();

            while (proposalIdEnumerator.moveNext())
            {
                proposalId = proposalIdEnumerator.current();
                proposalIdRange = projProposalDataSource.addRange(fieldNum(ProjProposalJour, ProposalId));
                proposalIdRange.value(queryValue(proposalId));
            }

            menuFunction = new MenuFunction(menuitemDisplayStr(ProjInvoiceProposal), MenuItemType::Display);

            args.caller(element);
            args.copyCallerQuery(CopyCallerQuery::No);
            args.initialQuery(InitialQueryParameter::createByQuery(detailsFormQuery));

            if (proposalIdList.elements() > 1)
            {
                args.formViewOption(FormViewOption::Grid);
            }

            menuFunction.run(args);

            super();

            updateCallerDisplay();
        }

        else if (isAddLines)
        {
            updateCallerDisplay();

            element.close();
        }
        else
        {
            if (element.enableProjMultipleContractLinesForProjectFeature)
            {
                throw warning("@Proj:InvoiceProposalCreationErrorWithFeatureOn");
            }
            else
            {
                throw warning("@Proj:InvoiceProposalCreationError");
            }
        }
    }

]]></Source>
			</Method>
			<Method>
				<Name>deleteProjProposalSummary</Name>
				<Source><![CDATA[
    void deleteProjProposalSummary()
    {
        PSATmpProjProposalSummary           tpsaTmpProjProposalSummary;

        tpsaTmpProjProposalSummary.setTmpData(psaTmpProjProposalSummary);
        while select forupdate tpsaTmpProjProposalSummary
            where tpsaTmpProjProposalSummary.Selected == NoYes::Yes
        {
            tpsaTmpProjProposalSummary.delete();
        }
    }

]]></Source>
			</Method>
			<Method>
				<Name>grossInvoiceAmount</Name>
				<Source><![CDATA[
    /// <summary>
    /// Returns gross invoice amount of the project invoice proposal.
    /// </summary>
    /// <returns>
    /// Gross invoice amount of the project invoice proposal.
    /// </returns>
    public display Amount grossInvoiceAmount()
    {
        return grossInvoiceAmount;
    }

]]></Source>
			</Method>
			<Method>
				<Name>init</Name>
				<Source><![CDATA[
    public void init()
    {
        ProjPostTransView projPostTransView;

        m_oImageList = new PSAImageListAppl();

        super();

        DisplayAutomatically.enabled(!enableInvoiceProposalCreationgPerfEnhanced);
        if (enableInvoiceProposalCreationgPerfEnhanced)
        {
            this.editDisplayAutomatically(false);
        }
        else
        {
            xSysLastValue::getLast(this);
        }

        projDimensionValuesControl = ProjDimensionValuesControl::construct(this, DimensionAttributeValueSet_ds, TransactionsGrid);

        str callerName;
        if (element.args())
        {
            callerName = element.args().callerName();
        }

        if (callerName == formStr(ProjInvoiceProposalDetailV2)
            && ProjProposalTranSummariesRefresh::isInvoiceProposalLineEditPerfEnabled())
        {
            skipRecalculateProposalTotals = true;
        }

        switch (element.args().dataset())
        {
            case tableNum(ProjTable) :
                m_tProjTable = element.args().record();
                this.initFromProjTable();
                break;

            case tableNum(ProjInvoiceTable) :
                m_tProjInvoiceTable = element.args().record();
                this.initFromProjInvoiceTable();
                break;

            case tableNum(ProjProposalJour) :
                if (element.args().menuItemName() == menuitemDisplayStr(PSAProjProposalSelectionCLINAddLines))
                {
                    isAddLines       = true;
                    projProposalJour = element.args().record();
                    this.initFromProjProposalJour();
                }
                else
                {
                    element.args().record(null);
                }
                break;

            case tableNum(ProjPostTransView) :
                projPostTransView   = element.args().record() as ProjPostTransView;
                m_tProjInvoiceTable = ProjInvoiceTable::find(ProjTable::find(projPostTransView.ProjId).ProjInvoiceProjId);
                this.initFromProjInvoiceTable();
                break;
        }

        selectEndDate.dateValue(DateTimeUtil::getSystemDate(DateTimeUtil::getUserPreferredTimeZone()));
        selectInvoiceDate.dateValue(DateTimeUtil::getSystemDate(DateTimeUtil::getUserPreferredTimeZone()));

        salesOrderUpdate.enabled(salesOrderLine.value());

        image.imageList(m_oImageList.imageList());

        cdsLockingOptionCreateInvoiceProposals = ProjCDSLockingOptionTable::get(ProjCDSLockingOption::CreateInvoiceProposals);
        
        this.updateUIForMutilpleContractLines();

        this.showWhatsNew();
        CheckBoxIncludeSubProjects.visible(filterbyProjIdEnabled);
    }

]]></Source>
			</Method>
			<Method>
				<Name>showWhatsNew</Name>
				<Source><![CDATA[
    private void showWhatsNew()
    {
        if (enableInvoiceProposalCreationgPerfEnhanced && delaySearchOption)
        {
            // Define a unique key for the what's new rule instance to ensure there are no conflicts with other rules.
            str whatsNewKey = "{3C8C07E2-A3CE-43EC-AF0E-CAB8A0FF5E78}";
            str whatsNewLeanMoreUrl = 'https://go.microsoft.com/fwlink/?linkid=2133403';

            SystemNotificationsWhatsNewManager::AddWhatsNewWithActionLink(
                whatsNewKey,
                "@Proj:ProjInvoiceProposalPerformanceWhatsNewTitle",
                "@Proj:ProjInvoiceProposalPerformanceWhatsNewText",
                DisplayAutomatically.name(),
                whatsNewLeanMoreUrl);
        }
    }

]]></Source>
			</Method>
			<Method>
				<Name>updateUIForMutilpleContractLines</Name>
				<Source><![CDATA[
    private void updateUIForMutilpleContractLines()
    {
        if (enableProjMultipleContractLinesForProjectFeature)
        {
            BillingRulesTabPage.caption("@Proj:ContractLines");
            PSATmpProjProposalSummary_ContractLineNum.label("@PSA2823");
            PSATmpProjProposalSummary_ContractLineType.label("@Proj:ContractLineType");
            PSATmpProjProposalSummary_ContractLineValue.label("@Proj:ContractValue");

            PSATmpProjProposalSummary_ContractBillingMethod.visible(true);
        }
    }

]]></Source>
			</Method>
			<Method>
				<Name>initFromProjInvoiceTable</Name>
				<Source><![CDATA[
    void initFromProjInvoiceTable()
    {
        selectProjInvoiceProjId.text(m_tProjInvoiceTable.ProjInvoiceProjId);
        selectProjInvoiceProjId.enabled(false);
        element.modifiedTransFilter();
    }

]]></Source>
			</Method>
			<Method>
				<Name>initFromProjProposalJour</Name>
				<Source><![CDATA[
    void initFromProjProposalJour()
    {
        selectProjInvoiceProjId.text(projProposalJour.ProjInvoiceProjId);

        selectProjInvoiceProjId.enabled(false);

        m_tProjInvoiceTable = ProjInvoiceTable::find(projProposalJour.ProjInvoiceProjId);

        element.modifiedTransFilter();
    }

]]></Source>
			</Method>
			<Method>
				<Name>initFromProjTable</Name>
				<Source><![CDATA[
    void initFromProjTable()
    {
        selectProjInvoiceProjId.text(m_tProjTable.ProjInvoiceProjId);
        selectProjInvoiceProjId.enabled(false);
        SelectProjId.text(m_tProjTable.ProjId);
        SelectProjId.enabled(false);
        m_tProjInvoiceTable = ProjInvoiceTable::find(m_tProjTable.ProjInvoiceProjId);
    }

]]></Source>
			</Method>
			<Method>
				<Name>netInvoiceValue</Name>
				<Source><![CDATA[
    display ProjTotalInvoiceNetAmount netInvoiceValue()
    {
        return (totalInvoiceValue.realValue() + totalDeductions.realValue());
    }

]]></Source>
			</Method>
			<Method>
				<Name>parmProjInvoiceProjId</Name>
				<Source><![CDATA[
    public str parmProjInvoiceProjId()
    {
        return selectProjInvoiceProjId.valueStr();
    }

]]></Source>
			</Method>
			<Method>
				<Name>run</Name>
				<Source><![CDATA[
    public void run()
    {
        super();

        isInitialized = true;

        if (projProposalJour
        || m_tProjTable || m_tProjInvoiceTable
        )
        {
            element.modifiedTransFilter();
        }
    }

]]></Source>
			</Method>
			<Method>
				<Name>totalDeduction</Name>
				<Source><![CDATA[
    display ProjTotalInvoiceDeductionAmount totalDeduction()
    {
        return deductionAmount;
    }

]]></Source>
			</Method>
			<Method>
				<Name>updateSummary</Name>
				<Source><![CDATA[
    public void updateSummary(boolean _isSelected)
    {
        psaTmpProjProposalSummary_ds.first();

        while (psaTmpProjProposalSummary)
        {
            if (psaTmpProjProposalSummary.orig().selected != _isSelected)
            {
                psaTmpProjProposalSummary.Selected = _isSelected;
                psaTmpProjProposalSummary_ds.write();
            }

            qbrTransSummaryRecId.value(queryValue(psaTmpProjProposalSummary.RecId));
            psaTmpProjProposalTrans_ds.executeQuery();
            element.updateTrans(false, _isSelected);

            if (!psaTmpProjProposalSummary_ds.next())
            {
                break;
            }
        }

        psaTmpProjProposalSummary_ds.executeQuery();
    }

]]></Source>
			</Method>
			<Method>
				<Name>updateTrans</Name>
				<Source><![CDATA[
    void updateTrans(boolean _updateCurrentTrans, boolean _bSelected)
    {
        Amount                      feeLineAmount;
        Amount                      feeLineAmountTotal;
        PSAContractLineItems        contractLineItems;
        PSAContractLineItemsSetup   psaContractLineItemsSetup;

        boolean projFormDataSourceSortingFlight = ProjFormDataSourceSortingFlight::instance().isEnabled();

        void updateSelected(PSATmpProjProposalTrans updateTrans)
        {
            AmountCur   amount;
            PSATmpProjProposalSummary   tmpProjProposalFeeSummary;

            //modified has already been called if _updateCurrentTrans is true.
            if ((_updateCurrentTrans && updateTrans.Selected == _bSelected) || (!_updateCurrentTrans && updateTrans.Selected != _bSelected))
            {
                updateTrans.Selected = _bSelected;

                proposalCreateLines.selectionChanged(updateTrans.RefTransId, updateTrans.Selected, false);
                amount = updateTrans.LineAmount + updateTrans.IndirectAmount;

                if (_bSelected)
                {
                    psaTmpProjProposalSummary.InvoiceAmount += amount;
                    grossInvoiceAmount += amount;
                }
                else
                {
                    psaTmpProjProposalSummary.InvoiceAmount -= amount;
                    grossInvoiceAmount -= amount;
                }
                psaTmpProjProposalSummary.update();
            }

            tmpProjProposalFeeSummary.setTmpData(psaTmpProjProposalSummary);

            //To fetch the associated fee billing rule based on trans line
            while select FeePercentage, ContractLineNum from contractLineItems
                where contractLineItems.ProjInvoiceProjId == updateTrans.ProjInvoiceProjId
                   && contractLineItems.LineType == PSAContractLineType::Fee
            exists join psaContractLineItemsSetup
                where psaContractLineItemsSetup.ContractLineNum == contractLineItems.ContractLineNum
                   && psaContractLineItemsSetup.ContractLineNumReferred == updateTrans.ContractLineNum
            {
                feeLineAmount = proposalCreateLines.recalcFeeLineAmount(contractLineItems.ContractLineNum);

                select forUpdate tmpProjProposalFeeSummary
                    where tmpProjProposalFeeSummary.ContractLineNum  == contractLineItems.ContractLineNum
                       && !tmpProjProposalFeeSummary.HasReferencedTransaction;

                if (tmpProjProposalFeeSummary)
                {
                    tmpProjProposalFeeSummary.InvoiceAmount = feeLineAmount;
                    tmpProjProposalFeeSummary.update();

                    feeLineAmountTotal =  amount * (contractLineItems.FeePercentage/100);

                    if (tmpProjProposalFeeSummary.Selected)
                    {
                        if (_bSelected)
                        {
                            grossInvoiceAmount += feeLineAmountTotal;
                        }
                        else
                        {
                            grossInvoiceAmount -= feeLineAmountTotal;
                        }
                    }
                }
            }
            psaTmpProjProposalSummary.setTmpData(tmpProjProposalFeeSummary);

            if (!projFormDataSourceSortingFlight)
            {
                int cursorPosition = psaTmpProjProposalSummary_ds.getPosition();
                psaTmpProjProposalSummary_ds.executeQuery();
                psaTmpProjProposalSummary_ds.setPosition(cursorPosition);
            }
        }

        void updateFeeOnlySelected(PSATmpProjProposalSummary psaTmpProjProposalFeeSummary)
        {
            PSATmpProjProposalSummary  tmpProjProposalTandMSummary;

            tmpProjProposalTandMSummary.setTmpData(psaTmpProjProposalFeeSummary);

            While select FeePercentage,ContractLineNum from contractLineItems
                where contractLineItems.ProjInvoiceProjId == psaTmpProjProposalFeeSummary.ProjInvoiceProjId
                   && contractLineItems.LineType == PSAContractLineType::Fee
            join psaContractLineItemsSetup
                where psaContractLineItemsSetup.ContractLineNum == contractLineItems.ContractLineNum
                   && psaContractLineItemsSetup.ContractLineNum == psaTmpProjProposalFeeSummary.ContractLineNum
            {
                select firstonly InvoiceAmount from tmpProjProposalTandMSummary
                    where tmpProjProposalTandMSummary.ContractLineNum == psaContractLineItemsSetup.ContractLineNumReferred;
            
                feeLineAmount =  proposalCreateLines.recalcFeeLineAmount(contractLineItems.ContractLineNum);
            
                psaTmpProjProposalFeeSummary.InvoiceAmount = feeLineAmount;
                psaTmpProjProposalFeeSummary.update();

                feeLineAmountTotal = (tmpProjProposalTandMSummary.InvoiceAmount * contractLineItems.FeePercentage)/100;

                select firstonly psaTmpProjProposalTrans
                    where psaTmpProjProposalTrans.RefRecId == tmpProjProposalTandMSummary.RecId
                       && psaTmpProjProposalTrans.Selected == NoYes::Yes;
                
                if (psaTmpProjProposalTrans)
                {
                    if (_bSelected)
                    {
                        grossInvoiceAmount += feeLineAmountTotal;
                    }
                    else
                    {
                        grossInvoiceAmount -= feeLineAmountTotal;
                    }
                }
            }
        }

        //Used for storing the cursor position value.
        int position;

        if (!_updateCurrentTrans)
        {
            if (psaTmpProjProposalSummary.isContractLineTypeNotFee() || psaTmpProjProposalSummary.HasReferencedTransaction)
            {
                boolean ispsaTmpProjProposalTrans;

                //To apply range as fee summary record to update invoice amount and total invoice amount by fee summary record amounts.
                if (psaTmpProjProposalSummary.ContractLineType == PSAContractLineType::Fee)
                {
                    qbrTransSummaryRecId.value(queryValue(psaTmpProjProposalSummary.RecId));
                    psaTmpProjProposaltrans_ds.executeQuery();
                }

                QueryRun localQueryRun = psaTmpProjProposalTrans_ds.queryRun();

                if (localQueryRun)
                {
                    PSATmpProjProposalTrans localPSATmpProjProposalTrans;
                    localQueryRun.reset();
                    
                    while (localQueryRun.next())
                    {
                        localPSATmpProjProposalTrans = localQueryRun.get(tableNum(PSATmpProjProposalTrans));

                        if (localPSATmpProjProposalTrans.RefRecId == psaTmpProjProposalSummary.RecId)
                        {
                            localPSATmpProjProposalTrans.selectForUpdate();
                            updateSelected(localPSATmpProjProposalTrans);
                            localPSATmpProjProposalTrans.Selected = _bSelected;
                            localPSATmpProjProposalTrans.update();
                            ispsaTmpProjProposalTrans = true;
                        }
                    }
                }
                else
                {
                    while select psaTmpProjProposalTrans where
                        psaTmpProjProposalTrans.RefRecId == psaTmpProjProposalSummary.RecId
                    {
                        updateSelected(psaTmpProjProposalTrans);
                        psaTmpProjProposalTrans.update();
                        ispsaTmpProjProposalTrans = true;
                    }
                }

                if ((psaTmpProjProposalSummary.ContractLineType == PSAContractLineType::Progress && !ispsaTmpProjProposalTrans) ||
                     psaTmpProjProposalSummary.ContractLineType == PSAContractLineType::UOD)
                {
                    if (_bSelected)
                    {
                        grossInvoiceAmount += psaTmpProjProposalSummary.InvoiceAmount;
                    }
                    else if (!psaTmpProjProposalSummary.Selected)
                    {
                        grossInvoiceAmount -= psaTmpProjProposalSummary.InvoiceAmount;
                    }

                    this.updateFeeBasedOnProgressLineSelection(psaTmpProjProposalSummary);
                }

                if (ispsaTmpProjProposalTrans && projFormDataSourceSortingFlight)
                {
                    int cursorPosition = psaTmpProjProposalSummary_ds.getPosition();
                    psaTmpProjProposalSummary_ds.executeQuery();
                    psaTmpProjProposalSummary_ds.setPosition(cursorPosition);
                }
            }
            else
            {
                updateFeeOnlySelected(psaTmpProjProposalSummary);
            }

            position = psaTmpProjProposalTrans_ds.getPosition();
            psaTmpProjProposalTrans_ds.research();
            psaTmpProjProposalTrans_ds.setPosition(position);
        }
        else
        {
            updateSelected(psaTmpProjProposalTrans);
            psaTmpProjProposalTrans.update();
            position = psaTmpProjProposalTrans_ds.getPosition();
            psaTmpProjProposalTrans_ds.research();
            psaTmpProjProposalTrans_ds.setPosition(position);
        }

        if (projInvoiceProposalBillingRulesCursorFixFlight)
        {
            PsaTmpProjProposalSummary curPsaTmpProjProposalSummary = psaTmpProjProposalSummary_ds.cursor();
            element.args().lookupRecord(curPsaTmpProjProposalSummary);
        }
        psaTmpProjProposalSummary_ds.write();
    }

]]></Source>
			</Method>
			<Method>
				<Name>updateFeeBasedOnProgressLineSelection</Name>
				<Source><![CDATA[
    /// <summary>
    /// Updates the fee based on selected progress line.
    /// </summary>
    /// <param name = "_psaTmpProjProposalProgressSummary">A table buffer of <c>PSATmpProjProposalSummary</c>.</param>
    private void updateFeeBasedOnProgressLineSelection(PSATmpProjProposalSummary _psaTmpProjProposalProgressSummary)
    {
        PSATmpProjProposalSummary tmpProjProposalFeeSummary;
        tmpProjProposalFeeSummary.setTmpData(_psaTmpProjProposalProgressSummary);

        PSAContractLineItems contractLineItems;
        while select FeePercentage,ContractLineNum from contractLineItems
            where contractLineItems.ProjInvoiceProjId == _psaTmpProjProposalProgressSummary.ProjInvoiceProjId
                && contractLineItems.LineType == PSAContractLineType::Fee
        join tmpProjProposalFeeSummary
            where tmpProjProposalFeeSummary.ContractLineNum == contractLineItems.ContractLineNum
        {
            Amount feeLineAmount =  proposalCreateLines.recalcFeeLineAmount(contractLineItems.ContractLineNum);

            tmpProjProposalFeeSummary.InvoiceAmount = feeLineAmount;
            tmpProjProposalFeeSummary.update();
        }
    }

]]></Source>
			</Method>
			<Method>
				<Name>updateSummaryOnLineSelection</Name>
				<Source><![CDATA[
    /// <summary>
    /// Updates whether line should be selected or unselected for updating transactions.
    /// </summary>
    /// <param name = "_isSelected">A boolean determining whether project proposal summary is selected or unselected.</param>
    private void updateSummaryOnLineSelection(boolean _isSelected)
    {
        psaTmpProjProposalSummary.Selected = _isSelected;

        psaTmpProjProposalSummary_ds.write();

        element.updateTrans(false, _isSelected);

        int cursorPosition = psaTmpProjProposalSummary_ds.getPosition();
        psaTmpProjProposalSummary_ds.research();
        psaTmpProjProposalSummary_ds.setPosition(cursorPosition);
    }

]]></Source>
			</Method>
			<Method>
				<Name>initializeProjInvoiceProposalCreateLinesParams</Name>
				<Source><![CDATA[
    public void initializeProjInvoiceProposalCreateLinesParams(ProjInvoiceProposalCreateLinesParams _ProjInvoiceProposalCreateLinesParams)
    {
        _ProjInvoiceProposalCreateLinesParams.parmEndDate(selectEndDate.dateValue());
        _ProjInvoiceProposalCreateLinesParams.parmInvoiceDate(selectInvoiceDate.dateValue());
        _ProjInvoiceProposalCreateLinesParams.parmIsQuerySalesLine(salesOrderLine.value());
        _ProjInvoiceProposalCreateLinesParams.parmProjInvoiceProjId(selectProjInvoiceProjId.text());
        _ProjInvoiceProposalCreateLinesParams.parmSalesUpdate(str2enum(salesUpdate, salesOrderUpdate.valueStr()));
        _ProjInvoiceProposalCreateLinesParams.parmStartDate(selectStartDate.dateValue());

        // Set the selected project to the parm method when multiple contract lines for project feature is enabled.
        if (filterbyProjIdEnabled || enableProjMultipleContractLinesForProjectFeature)
        {
            _ProjInvoiceProposalCreateLinesParams.parmProjId(selectProjId.text());
            _ProjInvoiceProposalCreateLinesParams.parmIncludeSubProjects(CheckBoxIncludeSubProjects.value());
        }

        if (ProjInvoiceProposalRulePeriodicTransTypeFilterFlight::instance().isEnabled())
        {
            _ProjInvoiceProposalCreateLinesParams.parmIsQueryCostTrans(true);
            _ProjInvoiceProposalCreateLinesParams.parmIsQueryEmplTrans(true);
            _ProjInvoiceProposalCreateLinesParams.parmIsQueryItemTrans(true);
            _ProjInvoiceProposalCreateLinesParams.parmIsQueryOnAccTrans(true);
            _ProjInvoiceProposalCreateLinesParams.parmIsQueryRevenueTrans(true);
            _ProjInvoiceProposalCreateLinesParams.parmIsQuerySubscriptionTrans(true);
        }
    }

]]></Source>
			</Method>
			<Method>
				<Name>modifiedTransFilter</Name>
				<Source><![CDATA[
    void modifiedTransFilter()
    {
        if (!isInitialized)
        {
            return;
        }

        // delaySearchOption allows the user to suppress searching except when the search button is clicked
        // searchNow is set to true when the search button is pressed
        if (delaySearchOption && !searchNow)
        {
            return;
        }

        ProjInvoiceProposalCreateLinesParams createLinesParams = ProjInvoiceProposalCreateLinesParams::construct();
        element.initializeProjInvoiceProposalCreateLinesParams(createLinesParams);

        // Setting the proposal parm for view other transaction
        element.parmProposalParams(createLinesParams);

        proposalCreateLines = ProjInvoiceProposalRuleCreateLines::newStandard(createLinesParams.pack());
        proposalCreateLines.run();

        psaTmpProjProposalSummary.setTmpData(proposalCreateLines.getTmpProjProposalSummary());
        psaTmpProjProposalSummary_ds.executeQuery();

        psaTmpProjProposalTrans.setTmpData(proposalCreateLines.getTmpProjProposalTrans());
        psaTmpProjProposalTrans_ds.executeQuery();

        psaTmpProjProposalTransPreBill.setTmpData(proposalCreateLines.getTmpProjProposalTransPreBill());
        psaTmpProjProposalTransPreBill_ds.executeQuery();

        deductionAmount    = proposalCreateLines.deductionAmount(psaTmpProjProposalTransPreBill.CurrencyCode);
        grossInvoiceAmount = element.calcGrossInvoiceAmount();

        if (m_tProjTable.psaProjStatus == PSAProjStatus::OnHold && !psaTmpProjProposalTrans.RecId)
        {
            warning("@PSA2087");
        }

        this.updateDimensionControls();
        this.updateSummary(false);
    }

]]></Source>
			</Method>
			<Method>
				<Name>updateDimensionControls</Name>
				<Source><![CDATA[
    /// <summary>
    /// Adds the appropriate Financial Dimension values to the grid to allow for better sorting and filtering.  The Dimension values to add are determined
    ///  by the Financial dimension set selected.
    /// </summary>
    protected void updateDimensionControls()
    {
        projDimensionValuesControl.displayFinancialDimensionsByHierarchy(dimHier, PSATmpProjProposalTrans_Task);
    }

]]></Source>
			</Method>
			<Method>
				<Name>parmProposalParams</Name>
				<Source><![CDATA[
    public ProjInvoiceProposalCreateLinesParams parmProposalParams(ProjInvoiceProposalCreateLinesParams _proposalPendingLinesParams = proposalParams)
    {
        proposalParams = _proposalPendingLinesParams;

        return proposalParams;
    }

]]></Source>
			</Method>
			<Method>
				<Name>validateProjectExternallyManaged</Name>
				<Source><![CDATA[
    private boolean validateProjectExternallyManaged(ProjId _projId)
    {
        boolean ret = true;

        if (cdsLockingOptionCreateInvoiceProposals)
        {
            if (Project::isProjectExternallyManaged(_projId))
            {
                ret = checkFailed(strfmt("@Proj:ProjCDSValueInvalidDueToExternal", "@Proj:ProjCDSCreateInvoiceProposals"));
            }
        }
        return ret;
    }

]]></Source>
			</Method>
			<Method>
				<Name>validateContractExternallyManaged</Name>
				<Source><![CDATA[
    private boolean validateContractExternallyManaged(ProjInvoiceProjId _projInvoiceProjId)
    {
        boolean ret = true;

        if (cdsLockingOptionCreateInvoiceProposals)
        {
            if (Project::isContractExternallyManaged(_projInvoiceProjId))
            {
                ret = checkFailed(strfmt("@Proj:ProjCDSValueInvalidDueToExternal", "@Proj:ProjCDSCreateInvoiceProposals"));
            }
        }
        return ret;
    }

]]></Source>
			</Method>
		</Methods>
		<DataSources xmlns="">
			<DataSource>
				<Name>PSATmpProjProposalSummary</Name>
				<Methods>
					<Method>
						<Name>executeQuery</Name>
						<Source><![CDATA[
        public void executeQuery()
        {
            if (qbrTransSummaryRecId.value())
            {
                // Preserves user applied filters on the grid form and reapplies the filter after execute query.
                var formDataSourceFilters = ProjFormDataSourceFilters::constructAndCollectFilters(this);
                super();
                formDataSourceFilters.applyFilters(this);
                formDataSourceFilters.applySorting(this);
            }
            else
            {
                super();
            }
        }

]]></Source>
					</Method>
					<Method>
						<Name>getRemaining</Name>
						<Source><![CDATA[
        display Amount getRemaining(PSATmpProjProposalSummary _tSummary)
        {
            Amount          rRemaining;

            rRemaining = _tSummary.ContractLineValue - _tSummary.InvoiceAmount - _tSummary.InvoiceAmountToDate;

            if (rRemaining < 0)
            {
                rRemaining = 0;
            }

            return rRemaining;
        }

]]></Source>
					</Method>
					<Method>
						<Name>linkActive</Name>
						<Source><![CDATA[
        public void linkActive()
        {
            super();

            if (element.args() && element.args().record() && element.args().record().TableId)
            {
                this.query().dataSourceTable(tableNum(PSATmpProjProposalSummary)).clearDynalinks();
            }
        }

]]></Source>
					</Method>
					<Method>
						<Name>init</Name>
						<Source><![CDATA[
        public void init()
        {
            super();

            this.cacheAddMethod('totalInvoiceValue');

            this.query().dataSourceTable(tableNum(PSATmpProjProposalSummary)).addSortField(fieldNum(PSATmpProjProposalSummary, ContractLineNum));
        }

]]></Source>
					</Method>
					<Method>
						<Name>active</Name>
						<Source><![CDATA[
        public int active()
        {
            int ret;

            ret = super();

            if (psaTmpProjProposalSummary.ContractLineType == PSAContractLineType::Progress)
            {
                psaTmpProjProposalTrans_ds.allowEdit(false);
            }
            else
            {
                psaTmpProjProposalTrans_ds.allowEdit(true);
            }

            qbrTransSummaryRecId.value(queryValue(psaTmpProjProposalSummary.RecId));

            int cursorPosition = psaTmpProjProposalTrans_ds.getPosition();
            psaTmpProjProposalTrans_ds.executeQuery();
            psaTmpProjProposalTrans_ds.setPosition(cursorPosition);

            return ret;
        }

]]></Source>
					</Method>
					<Method>
						<Name>totalInvoiceValue</Name>
						<Source><![CDATA[
        display ProjTotalInvoiceAmount totalInvoiceValue()
        {
            AmountCur                   amountCur;
            PSATmpProjProposalSummary   psaTmpProjProposalSummaryLoc;

            psaTmpProjProposalSummaryLoc.setTmpData(psaTmpProjProposalSummary);

            while select psaTmpProjProposalSummaryLoc
                where psaTmpProjProposalSummaryLoc.Selected == NoYes::Yes
            {
                amountCur += psaTmpProjProposalSummaryLoc.InvoiceAmount;
            }

            return amountCur;
        }

]]></Source>
					</Method>
				</Methods>
				<Fields>
					<Field>
						<DataField>Selected</DataField>
						<Methods>
							<Method>
								<Name>modified</Name>
								<Source><![CDATA[
            public void modified()
            {
                super();

                element.updateSummaryOnLineSelection(psaTmpProjProposalSummary.Selected);

                psaTmpProjProposalTrans_ds.research();
            }

]]></Source>
							</Method>
						</Methods>
					</Field>
				</Fields>
			</DataSource>
			<DataSource>
				<Name>PSATmpProjProposalTrans</Name>
				<Methods>
					<Method>
						<Name>executeQuery</Name>
						<Source><![CDATA[
        public void executeQuery()
        {
            if (qbrTransSummaryRecId.value())
            {
                // Preserves user applied filters on the grid form and reapplies the filter after execute query.
                var formDataSourceFilters = ProjFormDataSourceFilters::constructAndCollectFilters(this);
                super();
                formDataSourceFilters.applyFilters(this);
                formDataSourceFilters.applySorting(this);
            }
        }

]]></Source>
					</Method>
					<Method>
						<Name>init</Name>
						<Source><![CDATA[
        public void init()
        {
            super();

            qbrTransSummaryRecId = this.query().dataSourceTable(tableNum(PSATmpProjProposalTrans)).addRange(fieldNum(PSATmpProjProposalTrans, RefRecId));
        }

]]></Source>
					</Method>
					<Method>
						<Name>image</Name>
						<Source><![CDATA[
        display Integer image(PSATmpProjProposalTrans _tTmp)
        {
            #MACROLIB.resApplPSA

            if (_tTmp.ProjIdCapRoot && _tTmp.CapInvoiceAmount == 0) // over cap
            {
                return m_oImageList.image(#PSAImageCapError);
            }
            else if (_tTmp.ProjIdCapRoot && _tTmp.CapInvoiceAmount < _tTmp.LineAmount) // partially invoiced
            {
                return m_oImageList.image(#PSAImageCapWarning);
            }

            return m_oImageList.image(#PSAImageCapOk);
        }

]]></Source>
					</Method>
					<Method>
						<Name>displayOption</Name>
						<Source><![CDATA[
        public void displayOption(Common _record, FormRowDisplayOption _options)
        {
            PSATmpProjProposalTrans tTrans = _record;

            if (tTrans.ProjIdCapRoot && tTrans.CapInvoiceAmount == 0) // over cap
            {
                _options.backColor(255); // RGB (255, 0, 0)
            }
            else if (tTrans.ProjIdCapRoot && tTrans.CapInvoiceAmount < tTrans.LineAmount) // partially invoiced
            {
                _options.backColor(65535); // RGB (255, 255, 0));
            }

            super(_record, _options);
        }

]]></Source>
					</Method>
					<Method>
						<Name>active</Name>
						<Source><![CDATA[
        public int active()
        {
            int ret;

            // Control button
            if (isConfigurationkeyEnabled(configurationKeyNum(Project)))
            {
                element.buttonIndirectComponentTrans();
            }
            ret = super();

            return ret;
        }

]]></Source>
					</Method>
					<Method>
						<Name>linkActive</Name>
						<Source><![CDATA[
        public void linkActive()
        {
            super();

            if (element.args() && element.args().record() && element.args().record().TableId)
            {
                this.query().dataSourceTable(tableNum(PSATmpProjProposalTrans)).clearDynalinks();
            }
        }

]]></Source>
					</Method>
				</Methods>
				<Fields>
					<Field>
						<DataField>Selected</DataField>
						<Methods>
							<Method>
								<Name>modified</Name>
								<Source><![CDATA[
            public void modified()
            {
                boolean anyTransSelected = false;

                super();

                if (psaTmpProjProposalTrans.Selected)
                {
                    psaTmpProjProposalSummary.Selected = true;
                }

                element.updateTrans(true, psaTmpProjProposalTrans.Selected);

                if (!psaTmpProjProposalTrans.Selected)
                {
                    select firstonly RecId from psaTmpProjProposalTrans where
                        psaTmpProjProposalTrans.RefRecId == psaTmpProjProposalSummary.RecId &&
                        psaTmpProjProposalTrans.Selected == true;

                    anyTransSelected = psaTmpProjProposalTrans.RecId != 0;
                    psaTmpProjProposalSummary.Selected = anyTransSelected;
                }
            }

]]></Source>
							</Method>
						</Methods>
					</Field>
				</Fields>
			</DataSource>
			<DataSource>
				<Name>PSATmpProjProposalTransPreBill</Name>
				<Methods>
					<Method>
						<Name>init</Name>
						<Source><![CDATA[
        public void init()
        {
            super();
            this.query().dataSourceTable(tableNum(PSATmpProjProposalTrans)).clearDynalinks();
        }

]]></Source>
					</Method>
					<Method>
						<Name>active</Name>
						<Source><![CDATA[
        /// <summary>
        /// The button SplitAdvanceAmounts will only be enabled if the selected record is of type deduction ie; Advance
        /// </summary>
        /// <returns></returns>
        public int active()
        {
            int ret;

            ret = super();

            if (psaTmpProjProposalTransPreBill.TransactionOrigin == ProjOrigin::Deduction)
            {
                SplitOnAccountOffset.enabled(true);
            }
            else
            {
                SplitOnAccountOffset.enabled(false);
            }

            return ret;
        }

]]></Source>
					</Method>
				</Methods>
				<Fields>
					<Field>
						<DataField>Selected</DataField>
						<Methods>
							<Method>
								<Name>modified</Name>
								<Source><![CDATA[
            public void modified()
            {
                super();

                deductionAmount += psaTmpProjProposalTransPreBill.Selected ? psaTmpProjProposalTransPreBill.LineAmount : -psaTmpProjProposalTransPreBill.LineAmount;

                proposalCreateLines.selectionChanged(psaTmpProjProposalTransPreBill.RefTransId, psaTmpProjProposalTransPreBill.Selected, true);

                psaTmpProjProposalTransPreBill_ds.write();
            }

]]></Source>
							</Method>
						</Methods>
					</Field>
				</Fields>
			</DataSource>
		</DataSources>
		<DataControls xmlns="">
			<Control>
				<Name>SelectInvoiceDate</Name>
				<Type>Date</Type>
				<Methods>
					<Method>
						<Name>modified</Name>
						<Source><![CDATA[
        public boolean modified()
        {
            boolean ret;

            ret = super();

            if (proposalCreateLines)
            {
                proposalCreateLines.parmProposalCreateLinesParams().parmInvoiceDate(this.dateValue());
            }

            return ret;
        }

]]></Source>
					</Method>
				</Methods>
			</Control>
			<Control>
				<Name>SelectProjId</Name>
				<Type>String</Type>
				<Methods>
					<Method>
						<Name>lookup</Name>
						<Source><![CDATA[
        public void lookup()
        {
            ProjOpsManagementLogger logger = ProjOpsManagementLogger::createLogger(formStr(PSAProjProposalSelectionCLIN));
            using (var activityContext = logger.projOpsManagementActivity().projTableLookupContext())
            {
                Query query;
                if (element.enableProjMultipleContractLinesForProjectFeature)
                {
                    query = ProjTableLookup::buildQueryWithRanges([ProjType::None], SelectProjInvoiceProjId.text());
                }
                else
                {
                    query = ProjTableLookup::buildQueryWithRanges([ProjType::Time, ProjType::TimeMaterial, ProjType::FixedPrice], SelectProjInvoiceProjId.text());
                }

                if (cdsLockingOptionCreateInvoiceProposals)
                {
                    QueryBuildDataSource qbds1 = query.dataSourceNo(1);
                    QueryBuildDataSource qbds2 = qbds1.addDataSource(tableNum(ProjTable));
                    qbds2.addLink(fieldNum(ProjProjectLookup, ProjId), fieldNum(ProjTable, ProjId));
                    qbds2.joinMode(JoinMode::InnerJoin);
                    qbds2.addRange(fieldNum(ProjTable, ProjDataSource)).value(SysQuery::value(0));
                }

                SysTableLookup sysTableLookup = ProjTableLookup::createLookup(this, query);

                sysTableLookup.performFormLookup();
            }
        }

]]></Source>
					</Method>
					<Method>
						<Name>validate</Name>
						<Source><![CDATA[
        public boolean validate()
        {
            boolean ret;
        
            ret = super();

            ret = ret && element.validateProjectExternallyManaged(this.text());
        
            return ret;
        }

]]></Source>
					</Method>
				</Methods>
			</Control>
			<Control>
				<Name>SelectEmplId</Name>
				<Type>String</Type>
				<Methods>
					<Method>
						<Name>lookup</Name>
						<Source><![CDATA[
        public void lookup()
        {
            HcmWorkerLookup workerLookup = HcmWorkerLookup::newOnlyActiveEmployeesWithinCompany();
            SysTableLookup  employeeIdLookup;

            employeeIdLookup = SysTableLookup::newParameters(tableNum(HcmWorker), this);
            employeeIdLookup.parmQuery(workerLookup.updateQuery());
            employeeIdLookup.addLookupfield(fieldNum(HcmWorker, PersonnelNumber));
            employeeIdLookup.addLookupfield(fieldnum(HcmWorker, Person));

            employeeIdLookup.performFormLookup();
        }

]]></Source>
					</Method>
				</Methods>
			</Control>
			<Control>
				<Name>SelectProjInvoiceProjId</Name>
				<Type>String</Type>
				<Methods>
					<Method>
						<Name>lookup</Name>
						<Source><![CDATA[
        public void lookup()
        {
            ProjInvoiceTable::psaLookupProjInvoiceProjId(this, "", UnknownNoYes::Unknown, false, curext(), true);
        }

]]></Source>
					</Method>
					<Method>
						<Name>modified</Name>
						<Source><![CDATA[
        public boolean modified()
        {
            boolean ret;

            ret = super();

            if (this.text())
            {
                m_tProjInvoiceTable = ProjInvoiceTable::find(this.text());

                if (m_tProjInvoiceTable)
                {
                    element.modifiedTransFilter();
                }
            }
            else
            {
                m_tProjInvoiceTable = null;
            }

            return ret;
        }

]]></Source>
					</Method>
					<Method>
						<Name>validate</Name>
						<Source><![CDATA[
        public boolean validate()
        {
            boolean             ret;
            ProjInvoiceTable    tProjInvoiceTable;

            ret = super();

            tProjInvoiceTable = ProjInvoiceTable::find(selectProjInvoiceProjId.text());

            if (tProjInvoiceTable && tProjInvoiceTable.psaContractLines == NoYes::No)
            {
                throw error("@PSA3120");
            }

            ret = ret && element.validateContractExternallyManaged(this.text());

            return ret;
        }

]]></Source>
					</Method>
				</Methods>
			</Control>
			<Control>
				<Name>SalesOrderLine</Name>
				<Type>CheckBox</Type>
				<Methods>
					<Method>
						<Name>modified</Name>
						<Source><![CDATA[
        public boolean modified()
        {
            boolean ret;

            ret = super();

            salesOrderUpdate.enabled(salesOrderLine.value());

            return ret;
        }

]]></Source>
					</Method>
				</Methods>
			</Control>
			<Control>
				<Name>SalesOrderUpdate</Name>
				<Type>ComboBox</Type>
				<Methods>
					<Method>
						<Name>modified</Name>
						<Source><![CDATA[
        public boolean modified()
        {
            boolean ret;

            ret = super();

            element.modifiedTransFilter();
            return ret;
        }

]]></Source>
					</Method>
				</Methods>
			</Control>
			<Control>
				<Name>DimensionSetName</Name>
				<Type>String</Type>
				<Methods>
					<Method>
						<Name>lookup</Name>
						<Source><![CDATA[
        public void lookup()
        {
            DimensionHierarchySupportProvider::lookupDimensionSet(dimensionSetName, true, DimensionFocusBalanceInitializationState::Initialized);
        }

]]></Source>
					</Method>
					<Method>
						<Name>validate</Name>
						<Source><![CDATA[
        public boolean validate()
        {
            boolean isValid;

            isValid = super();

            dimHier = DimensionHierarchy::findByTypeAndName(DimensionHierarchyType::Focus, dimensionSetName.text());
            
            if (dimHier == null && dimensionSetName.text() != '') // Blank dimension set name is valid
            {
                isValid = checkFailed(strFmt("@SYS333565", dimensionSetName.text()));
            }

            return isValid;
        }

]]></Source>
					</Method>
				</Methods>
			</Control>
			<Control>
				<Name>BtnDisplay</Name>
				<Type>Button</Type>
				<Methods>
					<Method>
						<Name>clicked</Name>
						<Source><![CDATA[
        void clicked()
        {
            searchNow = true; // If the delay search option is on, this will force it to proceed despite the setting
            element.modifiedTransFilter();
            searchNow = false;// Return to standard behavior, suppressing searches on form load and field modified.
        }

]]></Source>
					</Method>
				</Methods>
			</Control>
			<Control>
				<Name>SelectAll</Name>
				<Type>Button</Type>
				<Methods>
					<Method>
						<Name>clicked</Name>
						<Source><![CDATA[
        void clicked()
        {
            super();

            element.updateSummary(true);
        }

]]></Source>
					</Method>
				</Methods>
			</Control>
			<Control>
				<Name>DeselectAll</Name>
				<Type>Button</Type>
				<Methods>
					<Method>
						<Name>clicked</Name>
						<Source><![CDATA[
        void clicked()
        {
            super();

            element.updateSummary(false);
        }

]]></Source>
					</Method>
				</Methods>
			</Control>
			<Control>
				<Name>SelectAllTrans</Name>
				<Type>Button</Type>
				<Methods>
					<Method>
						<Name>clicked</Name>
						<Source><![CDATA[
        void clicked()
        {
            super();

            psaTmpProjProposalSummary.Selected = true;
            element.updateTrans(false, true);
        }

]]></Source>
					</Method>
				</Methods>
			</Control>
			<Control>
				<Name>DeselectAllTrans</Name>
				<Type>Button</Type>
				<Methods>
					<Method>
						<Name>clicked</Name>
						<Source><![CDATA[
        void clicked()
        {
            super();

            psaTmpProjProposalSummary.Selected = false;
            element.updateTrans(false, false);
        }

]]></Source>
					</Method>
				</Methods>
			</Control>
			<Control>
				<Name>PSATmpProjProposalTrans_Selected</Name>
				<Type>CheckBox</Type>
				<Methods>
					<Method>
						<Name>clicked</Name>
						<Source><![CDATA[
        public void clicked()
        {
            super();
            int cursorPosition = psaTmpProjProposalSummary_ds.getPosition();
            psaTmpProjProposalSummary_ds.research();
            psaTmpProjProposalSummary_ds.setPosition(cursorPosition);
        }

]]></Source>
					</Method>
				</Methods>
			</Control>
			<Control>
				<Name>SelectAllTransBtn</Name>
				<Type>Button</Type>
				<Methods>
					<Method>
						<Name>clicked</Name>
						<Source><![CDATA[
        void clicked()
        {
            super();

            while select forupdate psaTmpProjProposalTransPreBill
            {
                psaTmpProjProposalTransPreBill.Selected = NoYes::Yes;
                psaTmpProjProposalTransPreBill.update();
                proposalCreateLines.selectionChanged(psaTmpProjProposalTransPreBill.RefTransId, psaTmpProjProposalTransPreBill.Selected, true);
            }

            deductionAmount = proposalCreateLines.deductionAmount();

            psaTmpProjProposalTransPreBill_ds.executeQuery();
        }

]]></Source>
					</Method>
				</Methods>
			</Control>
			<Control>
				<Name>DeselectAllTransBtn</Name>
				<Type>Button</Type>
				<Methods>
					<Method>
						<Name>clicked</Name>
						<Source><![CDATA[
        void clicked()
        {
            super();

            while select forupdate psaTmpProjProposalTransPreBill
            {
                psaTmpProjProposalTransPreBill.Selected = NoYes::No;
                psaTmpProjProposalTransPreBill.update();
                proposalCreateLines.selectionChanged(psaTmpProjProposalTransPreBill.RefTransId, psaTmpProjProposalTransPreBill.Selected, true);
            }

            deductionAmount = proposalCreateLines.deductionAmount();

            psaTmpProjProposalTransPreBill_ds.executeQuery();
        }

]]></Source>
					</Method>
				</Methods>
			</Control>
			<Control>
				<Name>SplitOnAccountOffset</Name>
				<Type>Button</Type>
				<Methods>
					<Method>
						<Name>clicked</Name>
						<Source><![CDATA[
        void clicked()
        {
            PSAProjOnAccOffsetSplit oSplit = new PSAProjOnAccOffsetSplit();

            oSplit.parmTmpProjProposal(psaTmpProjProposalTransPreBill);

            oSplit.runOperation();

            super();

            element.modifiedTransFilter();
        }

]]></Source>
					</Method>
				</Methods>
			</Control>
		</DataControls>
		<Members xmlns="" />
	</SourceCode>
	<DataSources>
		<AxFormDataSource xmlns="">
			<Name>PSATmpProjProposalSummary</Name>
			<Table>PSATmpProjProposalSummary</Table>
			<Fields>
				<AxFormDataSourceField>
					<DataField>ContractBillingMethod</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ContractLineChangeOrder</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ContractLineDescription</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ContractLineNum</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ContractLineType</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ContractLineValue</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>CustAccount</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>dataAreaId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>DEL_EmplId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>EndDate</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>HasReferencedTransaction</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>InvoiceAmount</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>InvoiceAmountToDate</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>InvoiceMethod</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Partition</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ProjCategoryId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ProjId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ProjInvoiceProjId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RecId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Resource</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Selected</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>StartDate</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Summary</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TableId</DataField>
				</AxFormDataSourceField>
			</Fields>
			<ReferencedDataSources />
			<AllowCreate>No</AllowCreate>
			<AllowDelete>No</AllowDelete>
			<Index>SortIdx</Index>
			<DataSourceLinks />
			<DerivedDataSources />
		</AxFormDataSource>
		<AxFormDataSource xmlns="">
			<Name>PSATmpProjProposalTrans</Name>
			<Table>PSATmpProjProposalTrans</Table>
			<Fields>
				<AxFormDataSourceField>
					<DataField>ActivityNumber</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<AllowEdit>No</AllowEdit>
					<DataField>CapExempt</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>CapInvoiceAmount</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<AllowEdit>No</AllowEdit>
					<DataField>CategoryId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ContractLineNum</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ContractLineType</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ContractLineValue</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<AllowEdit>No</AllowEdit>
					<DataField>CurrencyCode</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<AllowEdit>No</AllowEdit>
					<DataField>CustAccount</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>dataAreaId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>DefaultDimension</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<AllowEdit>No</AllowEdit>
					<DataField>ForecastModelId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>FundingSourceRefId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<AllowEdit>No</AllowEdit>
					<DataField>IndirectAmount</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<AllowEdit>No</AllowEdit>
					<DataField>IndirectComponent</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<AllowEdit>No</AllowEdit>
					<DataField>IndirectComponentGroup</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Interdependences</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>InvoiceNow</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>IsReleased</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>IsRetained</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<AllowEdit>No</AllowEdit>
					<DataField>LineAmount</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>LineNum</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>OriginalBudget</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Package</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>PartOfInterdependences</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>PercentInvoiceNow</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>PreBilledAmount</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<AllowEdit>No</AllowEdit>
					<DataField>ProjId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ProjIdCapRoot</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<AllowEdit>No</AllowEdit>
					<DataField>ProjInvoiceProjId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<AllowEdit>No</AllowEdit>
					<DataField>Qty</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RecId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<AllowEdit>No</AllowEdit>
					<DataField>RefRecId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<AllowEdit>No</AllowEdit>
					<DataField>RefRecIdCat</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<AllowEdit>No</AllowEdit>
					<DataField>RefRecIdTrans</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<AllowEdit>No</AllowEdit>
					<DataField>RefTableId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RefTransId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RevisedBudget</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<AllowEdit>No</AllowEdit>
					<DataField>SalesPrice</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Selected</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ServiceEventGroup_IN</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TableId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<AllowEdit>No</AllowEdit>
					<DataField>Task</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TaxInformation_IN</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TotalBudget</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TransactionOrigin</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<AllowEdit>No</AllowEdit>
					<DataField>TransDate</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TransStatus</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<AllowEdit>No</AllowEdit>
					<DataField>TransType</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<AllowEdit>No</AllowEdit>
					<DataField>Txt</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Resource</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<AllowEdit>No</AllowEdit>
					<DataField>WrkCtrId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>FixedExchRate</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>FundingSourceId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>FundingType</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>LinePropertyId</DataField>
				</AxFormDataSourceField>
			</Fields>
			<ReferencedDataSources />
			<AllowCreate>No</AllowCreate>
			<AllowDelete>No</AllowDelete>
			<InsertAtEnd>No</InsertAtEnd>
			<InsertIfEmpty>No</InsertIfEmpty>
			<DataSourceLinks />
			<DerivedDataSources />
		</AxFormDataSource>
		<AxFormDataSource xmlns="">
			<Name>PSATmpProjProposalTransPreBill</Name>
			<Table>PSATmpProjProposalTrans</Table>
			<Fields>
				<AxFormDataSourceField>
					<DataField>ActivityNumber</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>CapExempt</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>CapInvoiceAmount</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>CategoryId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ContractLineNum</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ContractLineType</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ContractLineValue</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>CurrencyCode</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>CustAccount</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>dataAreaId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>DefaultDimension</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ForecastModelId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>FundingSourceRefId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>IndirectAmount</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>IndirectComponent</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>IndirectComponentGroup</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Interdependences</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>InvoiceNow</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>IsReleased</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>IsRetained</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>LineAmount</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>LineNum</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>OriginalBudget</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Package</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>PartOfInterdependences</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>PercentInvoiceNow</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>PreBilledAmount</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ProjId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ProjIdCapRoot</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ProjInvoiceProjId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Qty</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RecId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RefRecId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RefRecIdCat</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RefRecIdTrans</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RefTableId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RefTransId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RevisedBudget</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>SalesPrice</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Selected</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ServiceEventGroup_IN</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TableId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Task</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TaxInformation_IN</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TotalBudget</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TransactionOrigin</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TransDate</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TransStatus</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TransType</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Txt</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Resource</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>WrkCtrId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>FixedExchRate</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>FundingSourceId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>FundingType</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>LinePropertyId</DataField>
				</AxFormDataSourceField>
			</Fields>
			<ReferencedDataSources />
			<AllowCreate>No</AllowCreate>
			<AllowDelete>No</AllowDelete>
			<InsertAtEnd>No</InsertAtEnd>
			<InsertIfEmpty>No</InsertIfEmpty>
			<DataSourceLinks />
			<DerivedDataSources />
		</AxFormDataSource>
		<AxFormDataSource xmlns="">
			<Name>DimensionAttributeValueSet</Name>
			<Table>DimensionAttributeValueSet</Table>
			<Fields>
				<AxFormDataSourceField>
					<DataField>DEL_ValueSetHash1</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>DEL_ValueSetHash2</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>DEL_ValueSetHash3</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>DEL_ValueSetHash4</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>DEL_ValueSetHash5</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Hash</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>MainAccount</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>MainAccountValue</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Partition</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RecId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TableId</DataField>
				</AxFormDataSourceField>
			</Fields>
			<ReferencedDataSources />
			<JoinSource>PSATmpProjProposalTrans</JoinSource>
			<LinkType>OuterJoin</LinkType>
			<DataSourceLinks />
			<DerivedDataSources />
		</AxFormDataSource>
	</DataSources>
	<Design>
		<Caption xmlns="">@GLS360216</Caption>
		<DialogSize xmlns="">Full</DialogSize>
		<Height xmlns="">0</Height>
		<HeightMode xmlns="">Column</HeightMode>
		<HideToolbar xmlns="">Yes</HideToolbar>
		<Pattern xmlns="">DialogDoubleTabs</Pattern>
		<PatternVersion xmlns="">1.3</PatternVersion>
		<StatusBarStyle xmlns="">SimpleWithoutClose</StatusBarStyle>
		<Style xmlns="">Dialog</Style>
		<Width xmlns="">0</Width>
		<WidthMode xmlns="">Column</WidthMode>
		<Controls xmlns="">
			<AxFormControl xmlns=""
				i:type="AxFormGroupControl">
				<Name>ProjectFilters</Name>
				<Pattern>Custom</Pattern>
				<Type>Group</Type>
				<WidthMode>SizeToAvailable</WidthMode>
				<FormControlExtension
					i:nil="true" />
				<Controls>
					<AxFormControl xmlns=""
						i:type="AxFormGroupControl">
						<Name>DisplayAvailableGroup</Name>
						<Type>Group</Type>
						<WidthMode>SizeToAvailable</WidthMode>
						<FormControlExtension
							i:nil="true" />
						<Controls>
							<AxFormControl xmlns=""
								i:type="AxFormCheckBoxControl">
								<Name>DisplayAutomatically</Name>
								<AutoDeclaration>Yes</AutoDeclaration>
								<Type>CheckBox</Type>
								<FormControlExtension
									i:nil="true" />
								<DataMethod>editDisplayAutomatically</DataMethod>
								<Label>@Proj:ProjInvoiceCreate_DisplayAvailableTrans</Label>
							</AxFormControl>
						</Controls>
						<ArrangeMethod>HorizontalRight</ArrangeMethod>
					</AxFormControl>
					<AxFormControl xmlns=""
						i:type="AxFormActionPaneControl">
						<Name>TopLevelActionPane</Name>
						<Type>ActionPane</Type>
						<FormControlExtension
							i:nil="true" />
						<Controls>
							<AxFormControl xmlns=""
								i:type="AxFormButtonGroupControl">
								<Name>TopLevelActionPaneButtonGroup</Name>
								<Type>ButtonGroup</Type>
								<FormControlExtension
									i:nil="true" />
								<Controls />
							</AxFormControl>
						</Controls>
						<Style>Strip</Style>
					</AxFormControl>
					<AxFormControl xmlns=""
						i:type="AxFormGroupControl">
						<Name>TransFilters</Name>
						<Type>Group</Type>
						<FormControlExtension
							i:nil="true" />
						<Controls>
							<AxFormControl xmlns=""
								i:type="AxFormDateControl">
								<Name>SelectInvoiceDate</Name>
								<AutoDeclaration>Yes</AutoDeclaration>
								<ElementPosition>1431655764</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<Type>Date</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<FormControlExtension
									i:nil="true" />
								<ExtendedDataType>ProjInvoicePorposalInvoiceDateSelection</ExtendedDataType>
								<Mandatory>Yes</Mandatory>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormStringControl">
								<Name>SelectProjId</Name>
								<AutoDeclaration>Yes</AutoDeclaration>
								<ElementPosition>1073741822</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<Type>String</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<FormControlExtension
									i:nil="true" />
								<Label>@Proj:Project</Label>
								<ReplaceOnLookup>No</ReplaceOnLookup>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormCheckBoxControl">
								<Name>CheckBoxIncludeSubProjects</Name>
								<AutoDeclaration>Yes</AutoDeclaration>
								<ElementPosition>1610612733</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<Type>CheckBox</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<FormControlExtension
									i:nil="true" />
								<Label>@SYS321414</Label>
								<Value>1</Value>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormStringControl">
								<Name>SelectEmplId</Name>
								<AutoDeclaration>Yes</AutoDeclaration>
								<ElementPosition>1610612733</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<Type>String</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<FormControlExtension
									i:nil="true" />
								<Label>@SYS70488</Label>
								<ReplaceOnLookup>No</ReplaceOnLookup>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormStringControl">
								<Name>SelectProjInvoiceProjId</Name>
								<AutoDeclaration>Yes</AutoDeclaration>
								<ElementPosition>1431655764</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<Type>String</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<FormControlExtension
									i:nil="true" />
								<Label>@PSA143</Label>
								<ReplaceOnLookup>No</ReplaceOnLookup>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormDateControl">
								<Name>SelectStartDate</Name>
								<AutoDeclaration>Yes</AutoDeclaration>
								<ElementPosition>1073741822</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<Type>Date</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<FormControlExtension
									i:nil="true" />
								<ExtendedDataType>ProjInvoiceProposalStartDateSelection</ExtendedDataType>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormDateControl">
								<Name>SelectEndDate</Name>
								<AutoDeclaration>Yes</AutoDeclaration>
								<ElementPosition>1610612733</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<Type>Date</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<FormControlExtension
									i:nil="true" />
								<ExtendedDataType>ProjInvoiceProposalEndDateSelection</ExtendedDataType>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormCheckBoxControl">
								<Name>SalesOrderLine</Name>
								<AutoDeclaration>Yes</AutoDeclaration>
								<ElementPosition>1073741822</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<Type>CheckBox</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<FormControlExtension
									i:nil="true" />
								<Label>@SYS90573</Label>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormComboBoxControl">
								<Name>SalesOrderUpdate</Name>
								<AutoDeclaration>Yes</AutoDeclaration>
								<ElementPosition>1610612734</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<Type>ComboBox</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<FormControlExtension
									i:nil="true" />
								<EnumType>SalesUpdate</EnumType>
								<Label>@GLS360220</Label>
								<Items />
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormStringControl">
								<Name>DimensionSetName</Name>
								<AutoDeclaration>Yes</AutoDeclaration>
								<Type>String</Type>
								<FormControlExtension
									i:nil="true" />
								<ExtendedDataType>DimensionSetName</ExtendedDataType>
							</AxFormControl>
						</Controls>
						<ColumnsMode>Fill</ColumnsMode>
						<Caption>@Proj:SelectTransactions</Caption>
						<Style>BorderedGroup</Style>
					</AxFormControl>
					<AxFormControl xmlns=""
						i:type="AxFormButtonGroupControl">
						<Name>SearchButtonGroup</Name>
						<HeightMode>Auto</HeightMode>
						<Type>ButtonGroup</Type>
						<WidthMode>SizeToAvailable</WidthMode>
						<FormControlExtension
							i:nil="true" />
						<Controls>
							<AxFormControl xmlns=""
								i:type="AxFormMenuFunctionButtonControl">
								<Name>ProjInvoiceProposalPendingTrans</Name>
								<ElementPosition>2040109463</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<HeightMode>Auto</HeightMode>
								<Type>MenuFunctionButton</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<WidthMode>Auto</WidthMode>
								<FormControlExtension
									i:nil="true" />
								<MenuItemName>ProjInvoiceProposalPendingTrans</MenuItemName>
								<OpenMode>View</OpenMode>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormButtonControl">
								<Name>BtnDisplay</Name>
								<ElementPosition>1073741820</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<HeightMode>Auto</HeightMode>
								<Type>Button</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<WidthMode>Auto</WidthMode>
								<FormControlExtension
									i:nil="true" />
								<ButtonDisplay>TextOnly</ButtonDisplay>
								<MultiSelect>Yes</MultiSelect>
								<Text>@SYS116636</Text>
							</AxFormControl>
						</Controls>
						<ArrangeMethod>HorizontalRight</ArrangeMethod>
					</AxFormControl>
				</Controls>
				<Style>DialogContent</Style>
			</AxFormControl>
			<AxFormControl xmlns=""
				i:type="AxFormTabControl">
				<Name>BillingRulesTab</Name>
				<Type>Tab</Type>
				<FormControlExtension
					i:nil="true" />
				<Controls>
					<AxFormControl xmlns=""
						i:type="AxFormTabPageControl">
						<Name>BillingRulesTabPage</Name>
						<AutoDeclaration>Yes</AutoDeclaration>
						<Pattern>ToolbarList</Pattern>
						<PatternVersion>1.2</PatternVersion>
						<Type>TabPage</Type>
						<FormControlExtension
							i:nil="true" />
						<Controls>
							<AxFormControl xmlns=""
								i:type="AxFormActionPaneControl">
								<Name>BillingRulesPane</Name>
								<ElementPosition>1073741822</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<Type>ActionPane</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<FormControlExtension
									i:nil="true" />
								<Controls>
									<AxFormControl xmlns=""
										i:type="AxFormActionPaneTabControl">
										<Name>ActionPaneTab1</Name>
										<ElementPosition>1431655764</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>ActionPaneTab</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<Controls>
											<AxFormControl xmlns=""
												i:type="AxFormButtonGroupControl">
												<Name>ButtonGroup</Name>
												<ElementPosition>1431655764</ElementPosition>
												<FilterExpression>%1</FilterExpression>
												<HeightMode>Auto</HeightMode>
												<Left>0</Left>
												<Type>ButtonGroup</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<WidthMode>Auto</WidthMode>
												<FormControlExtension
													i:nil="true" />
												<Controls>
													<AxFormControl xmlns=""
														i:type="AxFormButtonControl">
														<Name>SelectAll</Name>
														<ElementPosition>1073741822</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>Button</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<ButtonDisplay>TextOnly</ButtonDisplay>
														<Text>@SYS28958</Text>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormButtonControl">
														<Name>DeselectAll</Name>
														<ElementPosition>1610612733</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>Button</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<ButtonDisplay>TextOnly</ButtonDisplay>
														<Text>@SYS152646</Text>
													</AxFormControl>
												</Controls>
												<ArrangeMethod>Vertical</ArrangeMethod>
											</AxFormControl>
										</Controls>
										<AlignChild>No</AlignChild>
										<AlignChildren>No</AlignChildren>
										<ArrangeMethod>Vertical</ArrangeMethod>
									</AxFormControl>
								</Controls>
								<AlignChild>No</AlignChild>
								<AlignChildren>No</AlignChildren>
								<ArrangeMethod>Vertical</ArrangeMethod>
								<Style>Strip</Style>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormGridControl">
								<Name>BillingRulesGrid</Name>
								<AutoDeclaration>Yes</AutoDeclaration>
								<ElementPosition>1610612733</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<Type>Grid</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<FormControlExtension
									i:nil="true" />
								<Controls>
									<AxFormControl xmlns=""
										i:type="AxFormCheckBoxControl">
										<Name>PSATmpProjProposalSummary_Selected</Name>
										<ElementPosition>306783378</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>CheckBox</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>Selected</DataField>
										<DataSource>PSATmpProjProposalSummary</DataSource>
										<Label>@SYS4110542</Label>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>PSATmpProjProposalSummary_ProjInvoiceProjId</Name>
										<ElementPosition>460175067</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>String</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>ProjInvoiceProjId</DataField>
										<DataSource>PSATmpProjProposalSummary</DataSource>
										<Label>@SYS50055</Label>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>CopyOfPSATmpProjProposalSummary_ProjCategoryId1</Name>
										<ElementPosition>613566756</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>String</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<Visible>No</Visible>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>ProjCategoryId</DataField>
										<DataSource>PSATmpProjProposalSummary</DataSource>
										<Label>@SYS333196</Label>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>PSATmpProjProposalSummary_ContractLineNum</Name>
										<AutoDeclaration>Yes</AutoDeclaration>
										<ElementPosition>766958445</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>String</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>ContractLineNum</DataField>
										<DataSource>PSATmpProjProposalSummary</DataSource>
										<Label>@PSA10957</Label>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormComboBoxControl">
										<Name>PSATmpProjProposalSummary_ContractLineType</Name>
										<AutoDeclaration>Yes</AutoDeclaration>
										<ElementPosition>843654289</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>ComboBox</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>ContractLineType</DataField>
										<DataSource>PSATmpProjProposalSummary</DataSource>
										<Label>@PSA11277</Label>
										<Items />
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>PSATmpProjProposalSummary_ContractLineDescription</Name>
										<ElementPosition>920350134</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>String</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>ContractLineDescription</DataField>
										<DataSource>PSATmpProjProposalSummary</DataSource>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>ContractLineChangeOrder</Name>
										<AllowEdit>No</AllowEdit>
										<ElementPosition>1227133512</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>String</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>ContractLineChangeOrder</DataField>
										<DataSource>PSATmpProjProposalSummary</DataSource>
										<Label>@PSA2838</Label>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormRealControl">
										<Name>PSATmpProjProposalSummary_ContractLineValue</Name>
										<AutoDeclaration>Yes</AutoDeclaration>
										<ElementPosition>1380525201</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>Real</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>ContractLineValue</DataField>
										<DataSource>PSATmpProjProposalSummary</DataSource>
										<Label>@PSA11347</Label>
										<NoOfDecimals>-1</NoOfDecimals>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormRealControl">
										<Name>InvoiceNow</Name>
										<AutoDeclaration>Yes</AutoDeclaration>
										<ElementPosition>1559482171</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>Real</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>InvoiceAmount</DataField>
										<DataSource>PSATmpProjProposalSummary</DataSource>
										<Label>@SYS79829</Label>
										<NoOfDecimals>-1</NoOfDecimals>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormRealControl">
										<Name>Remaining</Name>
										<ElementPosition>1738439142</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>Real</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataMethod>getRemaining</DataMethod>
										<DataSource>PSATmpProjProposalSummary</DataSource>
										<Label>@PSA11525</Label>
										<NoOfDecimals>-1</NoOfDecimals>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormRealControl">
										<Name>PSATmpProjProposalSummary_InvoiceAmountToDate</Name>
										<ElementPosition>1840700268</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>Real</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>InvoiceAmountToDate</DataField>
										<DataSource>PSATmpProjProposalSummary</DataSource>
										<Label>@PSA11524</Label>
										<NoOfDecimals>-1</NoOfDecimals>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormComboBoxControl">
										<Name>PSATmpProjProposalSummary_ContractBillingMethod</Name>
										<AutoDeclaration>Yes</AutoDeclaration>
										<Type>ComboBox</Type>
										<Visible>No</Visible>
										<FormControlExtension
											i:nil="true" />
										<DataField>ContractBillingMethod</DataField>
										<DataSource>PSATmpProjProposalSummary</DataSource>
										<Items />
									</AxFormControl>
								</Controls>
								<DataSource>PSATmpProjProposalSummary</DataSource>
								<ShowRowLabels>No</ShowRowLabels>
								<VisibleRows>5</VisibleRows>
								<VisibleRowsMode>Fixed</VisibleRowsMode>
							</AxFormControl>
						</Controls>
						<Caption>@PSA2844</Caption>
					</AxFormControl>
				</Controls>
			</AxFormControl>
			<AxFormControl xmlns=""
				i:type="AxFormTabControl">
				<Name>TransactionsTab</Name>
				<Type>Tab</Type>
				<FormControlExtension
					i:nil="true" />
				<Controls>
					<AxFormControl xmlns=""
						i:type="AxFormTabPageControl">
						<Name>TransactionsTabPage</Name>
						<Pattern>ToolbarList</Pattern>
						<PatternVersion>1.2</PatternVersion>
						<Type>TabPage</Type>
						<FormControlExtension
							i:nil="true" />
						<Controls>
							<AxFormControl xmlns=""
								i:type="AxFormActionPaneControl">
								<Name>TransactionsPane</Name>
								<ElementPosition>858993458</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<Type>ActionPane</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<FormControlExtension
									i:nil="true" />
								<Controls>
									<AxFormControl xmlns=""
										i:type="AxFormActionPaneTabControl">
										<Name>ActionPaneTab2</Name>
										<ElementPosition>1431655764</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>ActionPaneTab</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<Controls>
											<AxFormControl xmlns=""
												i:type="AxFormButtonGroupControl">
												<Name>ButtonGroupTrans</Name>
												<ElementPosition>1431655764</ElementPosition>
												<FilterExpression>%1</FilterExpression>
												<HeightMode>Auto</HeightMode>
												<Left>0</Left>
												<Type>ButtonGroup</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<WidthMode>Auto</WidthMode>
												<FormControlExtension
													i:nil="true" />
												<Controls>
													<AxFormControl xmlns=""
														i:type="AxFormButtonControl">
														<Name>SelectAllTrans</Name>
														<ElementPosition>858993458</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>Button</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<ButtonDisplay>TextOnly</ButtonDisplay>
														<Text>@SYS28958</Text>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormButtonControl">
														<Name>DeselectAllTrans</Name>
														<ElementPosition>1288490187</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>Button</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<ButtonDisplay>TextOnly</ButtonDisplay>
														<Text>@SYS152646</Text>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormMenuFunctionButtonControl">
														<Name>mibIndirectComponentTrans</Name>
														<AutoDeclaration>Yes</AutoDeclaration>
														<ElementPosition>1717986916</ElementPosition>
														<Enabled>No</Enabled>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>MenuFunctionButton</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<ButtonDisplay>TextOnly</ButtonDisplay>
														<DataSource>PSATmpProjProposalTrans</DataSource>
														<MenuItemName>PSAIndirectComponentTrans</MenuItemName>
														<MultiSelect>No</MultiSelect>
														<Text>@PSA11466</Text>
													</AxFormControl>
												</Controls>
												<ArrangeMethod>Vertical</ArrangeMethod>
											</AxFormControl>
										</Controls>
										<AlignChild>No</AlignChild>
										<AlignChildren>No</AlignChildren>
										<ArrangeMethod>Vertical</ArrangeMethod>
									</AxFormControl>
								</Controls>
								<AlignChild>No</AlignChild>
								<AlignChildren>No</AlignChildren>
								<ArrangeMethod>Vertical</ArrangeMethod>
								<Style>Strip</Style>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormGridControl">
								<Name>TransactionsGrid</Name>
								<AutoDeclaration>Yes</AutoDeclaration>
								<ElementPosition>1288490187</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<Type>Grid</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<FormControlExtension
									i:nil="true" />
								<Controls>
									<AxFormControl xmlns=""
										i:type="AxFormCheckBoxControl">
										<Name>PSATmpProjProposalTrans_Selected</Name>
										<ElementPosition>169538182</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>CheckBox</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<BackgroundColor>WindowBackground</BackgroundColor>
										<DataField>Selected</DataField>
										<DataSource>PSATmpProjProposalTrans</DataSource>
										<Label>@SYS4110542</Label>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormDateControl">
										<Name>PSATmpProjProposalTrans_TransDate</Name>
										<ElementPosition>254307273</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>Date</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>TransDate</DataField>
										<DataSource>PSATmpProjProposalTrans</DataSource>
										<Label>@SYS2282</Label>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormComboBoxControl">
										<Name>PSATmpProjProposalTrans_TransType</Name>
										<ElementPosition>282563636</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>ComboBox</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>TransType</DataField>
										<DataSource>PSATmpProjProposalTrans</DataSource>
										<Items />
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>PSATmpProjProposalTrans_Txt</Name>
										<ElementPosition>310819999</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>String</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>Txt</DataField>
										<DataSource>PSATmpProjProposalTrans</DataSource>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>PSATmpProjProposalTrans_CurrencyCode</Name>
										<ElementPosition>339076365</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>String</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>CurrencyCode</DataField>
										<DataSource>PSATmpProjProposalTrans</DataSource>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>PSATmpProjProposalTrans_Category</Name>
										<ElementPosition>395589092</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>String</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>CategoryId</DataField>
										<DataSource>PSATmpProjProposalTrans</DataSource>
										<Label>@SYS333196</Label>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormRealControl">
										<Name>PSATmpProjProposalTrans_Qty</Name>
										<ElementPosition>452101820</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>Real</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>Qty</DataField>
										<DataSource>PSATmpProjProposalTrans</DataSource>
										<Label>@SYS102891</Label>
										<NoOfDecimals>-1</NoOfDecimals>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormRealControl">
										<Name>PSATmpProjProposalTrans_SalesPrice</Name>
										<ElementPosition>565127275</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>Real</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>SalesPrice</DataField>
										<DataSource>PSATmpProjProposalTrans</DataSource>
										<Label>@SYS23884</Label>
										<NoOfDecimals>-1</NoOfDecimals>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>PSATmpProjProposalTrans_IndirectComponentGroup</Name>
										<ElementPosition>593383638</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>String</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<Visible>No</Visible>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>IndirectComponentGroup</DataField>
										<DataSource>PSATmpProjProposalTrans</DataSource>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormRealControl">
										<Name>PSATmpProjProposalTrans_LineAmount</Name>
										<ElementPosition>621640001</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>Real</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>LineAmount</DataField>
										<DataSource>PSATmpProjProposalTrans</DataSource>
										<NoOfDecimals>-1</NoOfDecimals>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormRealControl">
										<Name>PSATmpProjProposalTrans_IndirectAmount</Name>
										<ElementPosition>720537274</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>Real</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>IndirectAmount</DataField>
										<DataSource>PSATmpProjProposalTrans</DataSource>
										<Label>@PSA11598</Label>
										<NoOfDecimals>-1</NoOfDecimals>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormImageControl">
										<Name>Image</Name>
										<AlignControl>No</AlignControl>
										<AutoDeclaration>Yes</AutoDeclaration>
										<ElementPosition>904203640</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>Image</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<Visible>No</Visible>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataMethod>image</DataMethod>
										<DataSource>PSATmpProjProposalTrans</DataSource>
										<Imagemode>SizeToFit</Imagemode>
										<ShowLabel>No</ShowLabel>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>PSATmpProjProposalTrans_ProjInvoiceProjId</Name>
										<ElementPosition>1017229095</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>String</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<Visible>No</Visible>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>ProjInvoiceProjId</DataField>
										<DataSource>PSATmpProjProposalTrans</DataSource>
										<Label>@PSA143</Label>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>PSATmpProjProposalTrans_ProjId</Name>
										<ElementPosition>1130254550</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>String</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<Visible>No</Visible>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>ProjId</DataField>
										<DataSource>PSATmpProjProposalTrans</DataSource>
										<Label>@SYS105983</Label>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormReferenceGroupControl">
										<Name>PSATmpProjProposalTrans_Resource</Name>
										<FilterExpression>%1</FilterExpression>
										<Type>ReferenceGroup</Type>
										<FormControlExtension
											i:nil="true" />
										<Controls />
										<DataSource>PSATmpProjProposalTrans</DataSource>
										<ReferenceField>Resource</ReferenceField>
										<ReplacementFieldGroup>ResourceId</ReplacementFieldGroup>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormComboBoxControl">
										<Name>PSATmpProjProposalTrans_Task</Name>
										<AutoDeclaration>Yes</AutoDeclaration>
										<ElementPosition>1073741823</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<Type>ComboBox</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<Visible>No</Visible>
										<FormControlExtension
											i:nil="true" />
										<DataField>Task</DataField>
										<DataSource>PSATmpProjProposalTrans</DataSource>
										<Items />
									</AxFormControl>
								</Controls>
								<DataSource>PSATmpProjProposalTrans</DataSource>
								<ShowRowLabels>No</ShowRowLabels>
								<VisibleCols>12</VisibleCols>
								<VisibleColsMode>Fixed</VisibleColsMode>
								<VisibleRows>9</VisibleRows>
								<VisibleRowsMode>Fixed</VisibleRowsMode>
							</AxFormControl>
						</Controls>
						<Caption>@SYS59212</Caption>
					</AxFormControl>
					<AxFormControl xmlns=""
						i:type="AxFormTabPageControl">
						<Name>AdvancesTabPage</Name>
						<Pattern>ToolbarList</Pattern>
						<PatternVersion>1.2</PatternVersion>
						<Type>TabPage</Type>
						<FormControlExtension
							i:nil="true" />
						<Controls>
							<AxFormControl xmlns=""
								i:type="AxFormActionPaneControl">
								<Name>AdvancesPane</Name>
								<ElementPosition>858993458</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<Type>ActionPane</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<FormControlExtension
									i:nil="true" />
								<Controls>
									<AxFormControl xmlns=""
										i:type="AxFormActionPaneTabControl">
										<Name>ActionPaneTab3</Name>
										<ElementPosition>1431655764</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>ActionPaneTab</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<Controls>
											<AxFormControl xmlns=""
												i:type="AxFormButtonGroupControl">
												<Name>ButtonGroupTransPreBill</Name>
												<ElementPosition>1431655764</ElementPosition>
												<FilterExpression>%1</FilterExpression>
												<HeightMode>Auto</HeightMode>
												<Left>0</Left>
												<Type>ButtonGroup</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<WidthMode>Auto</WidthMode>
												<FormControlExtension
													i:nil="true" />
												<Controls>
													<AxFormControl xmlns=""
														i:type="AxFormButtonControl">
														<Name>SelectAllTransBtn</Name>
														<ElementPosition>858993458</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>Button</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<ButtonDisplay>TextOnly</ButtonDisplay>
														<Text>@SYS28958</Text>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormButtonControl">
														<Name>DeselectAllTransBtn</Name>
														<ElementPosition>1288490187</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>Button</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<ButtonDisplay>TextOnly</ButtonDisplay>
														<Text>@SYS152646</Text>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormButtonControl">
														<Name>SplitOnAccountOffset</Name>
														<AutoDeclaration>Yes</AutoDeclaration>
														<ElementPosition>1717986916</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>Button</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<ButtonDisplay>TextOnly</ButtonDisplay>
														<NeedsRecord>Yes</NeedsRecord>
														<Text>@GLS360140</Text>
													</AxFormControl>
												</Controls>
												<ArrangeMethod>Vertical</ArrangeMethod>
												<DataSource>PSATmpProjProposalTransPreBill</DataSource>
											</AxFormControl>
										</Controls>
										<AlignChild>No</AlignChild>
										<AlignChildren>No</AlignChildren>
										<ArrangeMethod>Vertical</ArrangeMethod>
									</AxFormControl>
								</Controls>
								<AlignChild>No</AlignChild>
								<AlignChildren>No</AlignChildren>
								<ArrangeMethod>Vertical</ArrangeMethod>
								<Style>Strip</Style>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormGridControl">
								<Name>AdvancesGrid</Name>
								<ElementPosition>1288490187</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<Type>Grid</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<FormControlExtension
									i:nil="true" />
								<Controls>
									<AxFormControl xmlns=""
										i:type="AxFormCheckBoxControl">
										<Name>PSATmpProjProposalTransBill_Selected</Name>
										<ElementPosition>835132528</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>CheckBox</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<BackgroundColor>WindowBackground</BackgroundColor>
										<DataField>Selected</DataField>
										<DataSource>PSATmpProjProposalTransPreBill</DataSource>
										<Label>@SYS4110542</Label>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormDateControl">
										<Name>PSATmpProjProposalTransPreBill_TransDate</Name>
										<AllowEdit>No</AllowEdit>
										<ElementPosition>1252698793</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>Date</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>TransDate</DataField>
										<DataSource>PSATmpProjProposalTransPreBill</DataSource>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>PSATmpProjProposalTransPreBill_ActivityNumber</Name>
										<AllowEdit>No</AllowEdit>
										<ElementPosition>1431655763</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>String</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>ActivityNumber</DataField>
										<DataSource>PSATmpProjProposalTransPreBill</DataSource>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormComboBoxControl">
										<Name>PSATmpProjProposalTransPreBill_TransactionOrigin</Name>
										<AllowEdit>No</AllowEdit>
										<ElementPosition>1610612733</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>ComboBox</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>TransactionOrigin</DataField>
										<DataSource>PSATmpProjProposalTransPreBill</DataSource>
										<Items />
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>PSATmpProjProposalTransPreBill_Txt</Name>
										<AllowEdit>No</AllowEdit>
										<ElementPosition>1789569703</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>String</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>Txt</DataField>
										<DataSource>PSATmpProjProposalTransPreBill</DataSource>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormRealControl">
										<Name>PSATmpProjProposalTransPreBill_LineAmount</Name>
										<AllowEdit>No</AllowEdit>
										<ElementPosition>1968526673</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>Real</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>LineAmount</DataField>
										<DataSource>PSATmpProjProposalTransPreBill</DataSource>
										<NoOfDecimals>-1</NoOfDecimals>
									</AxFormControl>
								</Controls>
								<DataSource>PSATmpProjProposalTransPreBill</DataSource>
								<ShowRowLabels>No</ShowRowLabels>
								<VisibleCols>6</VisibleCols>
								<VisibleColsMode>Fixed</VisibleColsMode>
								<VisibleRows>5</VisibleRows>
								<VisibleRowsMode>Fixed</VisibleRowsMode>
							</AxFormControl>
						</Controls>
						<Caption>@Proj:AdvancesAndDeductions</Caption>
					</AxFormControl>
				</Controls>
				<ArrangeMethod>HorizontalRight</ArrangeMethod>
			</AxFormControl>
			<AxFormControl xmlns=""
				i:type="AxFormGroupControl">
				<Name>InvoiceSummary</Name>
				<AutoDeclaration>Yes</AutoDeclaration>
				<ElementPosition>1879048185</ElementPosition>
				<FilterExpression>%1</FilterExpression>
				<Pattern>FieldsFieldGroups</Pattern>
				<PatternVersion>1.1</PatternVersion>
				<Type>Group</Type>
				<VerticalSpacing>-1</VerticalSpacing>
				<WidthMode>SizeToAvailable</WidthMode>
				<FormControlExtension
					i:nil="true" />
				<Controls>
					<AxFormControl xmlns=""
						i:type="AxFormRealControl">
						<Name>TotalInvoiceValue</Name>
						<AutoDeclaration>Yes</AutoDeclaration>
						<ElementPosition>858993458</ElementPosition>
						<FilterExpression>%1</FilterExpression>
						<Type>Real</Type>
						<VerticalSpacing>-1</VerticalSpacing>
						<FormControlExtension
							i:nil="true" />
						<DataMethod>grossInvoiceAmount</DataMethod>
						<Label>@PSA11030</Label>
						<NoOfDecimals>-1</NoOfDecimals>
					</AxFormControl>
					<AxFormControl xmlns=""
						i:type="AxFormRealControl">
						<Name>TotalDeductions</Name>
						<AutoDeclaration>Yes</AutoDeclaration>
						<ElementPosition>1288490187</ElementPosition>
						<FilterExpression>%1</FilterExpression>
						<Type>Real</Type>
						<VerticalSpacing>-1</VerticalSpacing>
						<FormControlExtension
							i:nil="true" />
						<DataMethod>totalDeduction</DataMethod>
						<Label>@PSA11031</Label>
						<NoOfDecimals>-1</NoOfDecimals>
					</AxFormControl>
					<AxFormControl xmlns=""
						i:type="AxFormRealControl">
						<Name>NetInvoiceValue</Name>
						<ElementPosition>1717986916</ElementPosition>
						<FilterExpression>%1</FilterExpression>
						<Type>Real</Type>
						<VerticalSpacing>-1</VerticalSpacing>
						<FormControlExtension
							i:nil="true" />
						<DataMethod>netInvoiceValue</DataMethod>
						<Label>@PSA11032</Label>
						<NoOfDecimals>-1</NoOfDecimals>
					</AxFormControl>
				</Controls>
				<ColumnsMode>Fill</ColumnsMode>
				<FrameType>None</FrameType>
			</AxFormControl>
			<AxFormControl xmlns=""
				i:type="AxFormButtonGroupControl">
				<Name>CommitButtonGroup</Name>
				<ElementPosition>1879048188</ElementPosition>
				<FilterExpression>%1</FilterExpression>
				<LeftMode>AutoRight</LeftMode>
				<Type>ButtonGroup</Type>
				<VerticalSpacing>-1</VerticalSpacing>
				<WidthMode>SizeToAvailable</WidthMode>
				<FormControlExtension
					i:nil="true" />
				<Controls>
					<AxFormControl xmlns=""
						i:type="AxFormCommandButtonControl">
						<Name>CreateProposal</Name>
						<AutoDeclaration>Yes</AutoDeclaration>
						<ElementPosition>1073741822</ElementPosition>
						<FilterExpression>%1</FilterExpression>
						<HeightMode>Auto</HeightMode>
						<Type>CommandButton</Type>
						<VerticalSpacing>-1</VerticalSpacing>
						<WidthMode>Auto</WidthMode>
						<FormControlExtension
							i:nil="true" />
						<ButtonDisplay>TextOnly</ButtonDisplay>
						<Command>OK</Command>
					</AxFormControl>
					<AxFormControl xmlns=""
						i:type="AxFormCommandButtonControl">
						<Name>CancelButton</Name>
						<ElementPosition>1610612733</ElementPosition>
						<FilterExpression>%1</FilterExpression>
						<HeightMode>Auto</HeightMode>
						<Type>CommandButton</Type>
						<VerticalSpacing>-1</VerticalSpacing>
						<WidthMode>Auto</WidthMode>
						<FormControlExtension
							i:nil="true" />
						<ButtonDisplay>TextOnly</ButtonDisplay>
						<Command>Cancel</Command>
					</AxFormControl>
				</Controls>
				<ArrangeMethod>HorizontalRight</ArrangeMethod>
				<Style>DialogCommitContainer</Style>
			</AxFormControl>
		</Controls>
	</Design>
	<Parts />
</AxForm>