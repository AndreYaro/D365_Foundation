<?xml version="1.0" encoding="utf-8"?>
<AxForm xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="Microsoft.Dynamics.AX.Metadata.V6">
	<Name>RetailLoyaltySchemes</Name>
	<SourceCode>
		<Methods xmlns="">
			<Method>
				<Name>classDeclaration</Name>
				<Source><![CDATA[
[Form]
public class RetailLoyaltySchemes extends FormRun implements RetailIOperatingUnitPickerCaller
{
    RefRecId                            affiliationId;
}
]]></Source>
			</Method>
			<Method>
				<Name>changeToRewardType_RU</Name>
				<Source><![CDATA[
    boolean changeToRewardType_RU()
    {
        boolean isDiscountReward;

        #IsoCountryRegionCodes

        if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
        {
            isDiscountReward = retailLoyaltyRedeemSchemeLine.ToRewardType == RetailLoyaltyRewardType::Discount_RU;

            redeemRetailGroupMemberLine_ds.object(fieldNum(RetailGroupMemberLine, Category)).allowEdit(!isDiscountReward);
            redeemRetailGroupMemberLine_ds.object(fieldNum(RetailGroupMemberLine, Product)).allowEdit(!isDiscountReward);
            redeemRetailGroupMemberLine_ds.object(fieldNum(RetailGroupMemberLine, Variant)).allowEdit(!isDiscountReward);
        }

        return isDiscountReward;
    }

]]></Source>
			</Method>
			<Method>
				<Name>lookupTier</Name>
				<Source><![CDATA[
    public Common lookupTier(FormReferenceControl _ctrl)
    {
        Args    args;
        FormRun lookupForm;

        args = new Args(formStr(RetailLoyaltyTierLookup));
        args.parm(int642str(RetailLoyaltyScheme.Affiliation));
        lookupForm = classfactory.formRunClass(args);
        lookupForm.init();

        _ctrl.performFormLookup(lookupForm);
        return lookupForm.selectRecordModeSelectedRecord();
    }

]]></Source>
			</Method>
			<Method>
				<Name>run</Name>
				<Source><![CDATA[
    public void run()
    {
        super();
        affiliationId   = retailLoyaltyScheme.Affiliation;
        this.toggleButtons();
    }

]]></Source>
			</Method>
			<Method>
				<Name>task</Name>
				<Source><![CDATA[
    public int task(int _taskId)
    {
        #Task

        int ret;

        ret = super(_taskId);

        this.toggleButtons();

        return ret;
    }

]]></Source>
			</Method>
			<Method>
				<Name>toggleButtons</Name>
				<Source><![CDATA[
    private void toggleButtons()
    {
        earnActionButtonGroup.enabled(!this.inViewMode());
        redeemActionButtonGroup.enabled(!this.inViewMode());
        channelsActionButtonGroup.enabled(!this.inViewMode());
    }

]]></Source>
			</Method>
			<Method>
				<Name>updateActivityFields</Name>
				<Source><![CDATA[
    void updateActivityFields()
    {
        boolean isProductActivity;

        isProductActivity = retailLoyaltyEarnSchemeLine.FromActivityType == RetailLoyaltyActivityType::PurchaseProductByAmount
                            || retailLoyaltyEarnSchemeLine.FromActivityType == RetailLoyaltyActivityType::PurchaseProductByQuantity;

        earnLinesGrid_Category.enabled(isProductActivity);
        earnLinesGrid_Product.enabled(isProductActivity);
        earnLinesGrid_Variant.enabled(isProductActivity);
       
        isProductActivity = retailLoyaltyEarnSchemeLine.FromActivityType == RetailLoyaltyActivityType::Other;

        EarnLinesGrid_OtherActivityType.enabled(isProductActivity);
        EarnLinesGrid_OtherActivityType.mandatory(isProductActivity);
        EarnLinesGrid_ActivityAmountCurrency.enabled(!isProductActivity);
    }

]]></Source>
			</Method>
			<Method>
				<Name>VerifyRewardPointPerScheme</Name>
				<Source><![CDATA[
    public boolean VerifyRewardPointPerScheme(RecId _loyaltySchemeId, RecId _rewardPointRecid)
    {
        RetailLoyaltySchemeRewardPointView rewardPointView;
        RetailLoyaltyRewardPoint rewardPoint;
        DialogButton result;
        int64 counter;

        select firstonly rewardPoint
                where rewardPoint.RecId == _rewardPointRecid
                    && rewardPoint.Redeemable == NoYes::Yes;
        if (!rewardPoint)
        {
            result = Box::yesNo("@REX4161358", DialogButton::No);
            if (result == DialogButton::No)
            {
                return false;
            }
        }

        select count(RecId) from rewardPointView
            where rewardPointView.LoyaltyScheme == _loyaltySchemeId;
        counter = rewardPointView.RecId;

        if (counter == 1)
        {
            select firstonly RecId from rewardPointView
                where rewardPointView.RewardPoint == _rewardPointRecid
                    && rewardPointView.LoyaltyScheme == _loyaltySchemeId;
            if (!rewardPointView)
            {
                result = Box::yesNo("@REX4161357", DialogButton::No);
                if (result == DialogButton::No)
                {
                    return false;
                }
            }
        }
        return true;
    }

]]></Source>
			</Method>
			<Method>
				<Name>resolveTier</Name>
				<Source><![CDATA[
    public Common resolveTier(FormReferenceControl _formReferenceControl)
    {
        RetailLoyaltyTier loyaltyTier;

        FieldBinding fieldBinding = AbsoluteFieldBinding::construct(
            fieldStr(RetailLoyaltyTier, TierId), tableStr(RetailLoyaltyTier));
        RetailAffiliationTierId tierId = _formReferenceControl.filterValue(fieldBinding).value();
        loyaltyTier = RetailLoyaltyTier::findByTierId(RetailLoyaltyScheme.Affiliation, tierId);

        if (loyaltyTier.RecId)
        {
            return loyaltyTier;
        }

        return null;
    }

]]></Source>
			</Method>
			<Method>
				<Name>getPickerInitParameters</Name>
				<Source><![CDATA[
    public RetailOperatingUnitPickerData getPickerInitParameters()
    {
        // no need to pass already selected orgs so we just pass the hierarchy purpose as an init parameter for the picker.
        return RetailOperatingUnitPickerData::createInstance(HierarchyPurpose::RetailAssortment);
    }

]]></Source>
			</Method>
			<Method>
				<Name>processOperatingUnitPickerData</Name>
				<Source><![CDATA[
    void processOperatingUnitPickerData(RetailOperatingUnitPickerData operatingUnitPickerData)
    {
        Set _selectedOMInternalOrganizationIds = operatingUnitPickerData.omInternalOrganizationRecIds;

        RetailLoyaltySchemeChannel loyaltySchemeChannel;
        RecordInsertList recordInsertList = new RecordInsertList(tableNum(RetailLoyaltySchemeChannel));
        
        if (_selectedOMInternalOrganizationIds.elements() > 0)
        {
            SetEnumerator enumerators = _selectedOMInternalOrganizationIds.getEnumerator();
            while (enumerators.moveNext())
            {
                loyaltySchemeChannel.LoyaltyScheme = RetailLoyaltyScheme.RecId;
                loyaltySchemeChannel.omHierarchyType = operatingUnitPickerData.omHierarchyTypeRecId;
                loyaltySchemeChannel.omInternalOrganization = enumerators.current();
                recordInsertList.add(loyaltySchemeChannel);
            }

            recordInsertList.insertDatabase();
            RetailLoyaltyScheme_ds.research(true);
        }

    }

]]></Source>
			</Method>
		</Methods>
		<DataSources xmlns="">
			<DataSource>
				<Name>RetailLoyaltyScheme</Name>
				<Methods>
					<Method>
						<Name>SetAddButtonState</Name>
						<Source><![CDATA[
        /// <summary>
        /// Enable/disable the "Add" button for dependent data sources depending on if the required parent exists.
        /// </summary>
        private void SetAddButtonState()
        {
            boolean requiredParentExist;

            // Enable "Add" of a group line if it's an existing group
            requiredParentExist = (RetailLoyaltyScheme.RecId != 0);
            RetailLoyaltyEarnSchemeLine_DS.allowCreate(requiredParentExist);
            RetailLoyaltyRedeemSchemeLine_DS.allowCreate(requiredParentExist);
            RetailLoyaltySchemeChannel_DS.allowCreate(requiredParentExist);
            RetailLoyaltySchemeExcludedAffiliations_ds.allowCreate(requiredParentExist);
        }

]]></Source>
					</Method>
					<Method>
						<Name>active</Name>
						<Source><![CDATA[
        public int active()
        {
            int ret;

            ret = super();

            this.SetAddButtonState();

            return ret;
        }

]]></Source>
					</Method>
				</Methods>
				<Fields>
					<Field>
						<DataField>Affiliation</DataField>
						<Methods>
							<Method>
								<Name>lookupReference</Name>
								<Source><![CDATA[
            public Common lookupReference(FormReferenceControl _formReferenceControl)
            {
                Args    args;
                FormRun lookupForm;

                args = new Args(formStr(RetailAffiliationLookup));
                args.parmEnumType(enumNum(RetailAffiliationType));
                args.parmEnum(RetailAffiliationType::Loyalty);
                lookupForm = classfactory.formRunClass(args);
                lookupForm.init();

                _formReferenceControl.performFormLookup(lookupForm);
                return lookupForm.selectRecordModeSelectedRecord();
            }

]]></Source>
							</Method>
							<Method>
								<Name>jumpRef</Name>
								<Source><![CDATA[
            public void jumpRef()
            {
                RetailAffiliation::jumpRefForLoyaltyGroup(RetailAffiliation::find(RetailLoyaltyScheme.Affiliation));
            }

]]></Source>
							</Method>
						</Methods>
					</Field>
				</Fields>
			</DataSource>
			<DataSource>
				<Name>RetailLoyaltyEarnSchemeLine</Name>
				<Methods>
					<Method>
						<Name>write</Name>
						<Source><![CDATA[
        public void write()
        {
            if (retailLoyaltyEarnSchemeLine.FromActivityType == RetailLoyaltyActivityType::PurchaseProductByAmount
            || retailLoyaltyEarnSchemeLine.FromActivityType == RetailLoyaltyActivityType::PurchaseProductByQuantity)
            {
                EarnRetailGroupMemberLine.write();
                RetailLoyaltyEarnSchemeLine.FromActivityRetailGroupMemberLine = EarnRetailGroupMemberLine.RecId;
            }
            else
            {
                if (EarnRetailGroupMemberLine.RecId)
                {
                    EarnRetailGroupMemberLine.delete();
                    RetailLoyaltyEarnSchemeLine.FromActivityRetailGroupMemberLine = 0;
                }
            }

            super();
        }

]]></Source>
					</Method>
					<Method>
						<Name>validateWrite</Name>
						<Source><![CDATA[
        public boolean validateWrite()
        {
            boolean ret;
            RetailLoyaltyTier loyaltyTier;

            ret = super();

            // Check whether the loyalty tier used in the scheme line belongs to the loyalty group
            if (ret && retailLoyaltyEarnSchemeLine.LoyaltyTier != 0)
            {
                select firstonly Affiliation from loyaltyTier where loyaltyTier.RecId == retailLoyaltyEarnSchemeLine.LoyaltyTier;

                if (loyaltyTier.Affiliation != retailLoyaltyScheme.Affiliation)
                {
                    ret = checkFailed("@REX1651");
                }
            }

            return ret;
        }

]]></Source>
					</Method>
				</Methods>
				<Fields>
					<Field>
						<DataField>FromActivityType</DataField>
						<Methods>
							<Method>
								<Name>modified</Name>
								<Source><![CDATA[
            public void modified()
            {
                DialogButton result;

                element.updateActivityFields();

                if (retailloyaltyearnschemeline.FromActivityType == RetailLoyaltyActivityType::SalesTransactionCount)
                {
                    // N-1 Mode check
                    if (isConfigurationkeyEnabled(configurationKeyNum(RetailCDXBackwardCompatibility)))
                    {
                        result = Box::yesNo("@REX4161356", DialogButton::No);
                        if (result == DialogButton::No)
                        {
                            return;
                        }
                    }

                    if (retailLoyaltyEarnSchemeLine.FromActivityRetailGroupMemberLine != 0)
                    {
                        retailLoyaltyEarnSchemeLine.FromActivityRetailGroupMemberLine = 0;
                        retailLoyaltyEarnSchemeLine_ds.research();
                    }
                }

                super();
            }

]]></Source>
							</Method>
						</Methods>
					</Field>
					<Field>
						<DataField>LoyaltyTier</DataField>
						<Methods>
							<Method>
								<Name>jumpRef</Name>
								<Source><![CDATA[
            public void jumpRef()
            {
                RetailAffiliation::jumpRefForLoyaltyGroup(RetailAffiliation::find(RetailLoyaltyScheme.Affiliation));
            }

]]></Source>
							</Method>
							<Method>
								<Name>resolveReference</Name>
								<Source><![CDATA[
            public Common resolveReference(FormReferenceControl _formReferenceControl)
            {
                return element.resolveTier(_formReferenceControl);
            }

]]></Source>
							</Method>
						</Methods>
					</Field>
					<Field>
						<DataField>RetailAffiliationId</DataField>
						<Methods>
							<Method>
								<Name>lookupReference</Name>
								<Source><![CDATA[
            public Common lookupReference(FormReferenceControl _formReferenceControl)
            {
                Args    args;
                FormRun lookupForm;
                RetailAffiliation affiliation;

                args = new Args(formStr(RetailAffiliationLookup));
                args.parmEnumType(enumNum(RetailAffiliationType));
                args.parmEnum(RetailAffiliationType::General);
                lookupForm = classfactory.formRunClass(args);
                lookupForm.init();

                _formReferenceControl.performFormLookup(lookupForm);
                affiliation = lookupForm.selectRecordModeSelectedRecord();
                return affiliation;
            }

]]></Source>
							</Method>
						</Methods>
					</Field>
				</Fields>
			</DataSource>
			<DataSource>
				<Name>RetailLoyaltyRedeemSchemeLine</Name>
				<Methods>
					<Method>
						<Name>validateDelete</Name>
						<Source><![CDATA[
        public boolean validateDelete()
        {
            DialogButton result;
            boolean ret;

            // N-1 Mode check
            if (isConfigurationkeyEnabled(configurationKeyNum(RetailCDXBackwardCompatibility)))
            {
                result = Box::yesNo("@REX4161360", DialogButton::No);
                if (result == DialogButton::No)
                {
                    return false;
                }
            }

            ret = super();

            return ret;
        }

]]></Source>
					</Method>
					<Method>
						<Name>write</Name>
						<Source><![CDATA[
        public void write()
        {
            // <GEERU>
            if (retailLoyaltyRedeemSchemeLine.ToRewardType != RetailLoyaltyRewardType::Discount_RU)
            {
                // </GEERU>
                RedeemRetailGroupMemberLine.write();
                RetailLoyaltyRedeemSchemeLine.ToRetailGroupMemberLine = RedeemRetailGroupMemberLine.RecId;
                // <GEERU>
            }
            else
            {
                if (RedeemRetailGroupMemberLine.RecId)
                {
                    RedeemRetailGroupMemberLine.delete();
                    RetailLoyaltyRedeemSchemeLine.ToRetailGroupMemberLine = 0;
                }
            }
            // </GEERU>

            super();
        }

]]></Source>
					</Method>
					<Method>
						<Name>validateWrite</Name>
						<Source><![CDATA[
        public boolean validateWrite()
        {
            boolean ret;
            RetailLoyaltyTier loyaltyTier;
            DialogButton result;

            // N-1 Mode check
            if (isConfigurationkeyEnabled(configurationKeyNum(RetailCDXBackwardCompatibility)))
            {
                if (redeemRetailGroupMemberLine.Product
                        || redeemRetailGroupMemberLine.Variant
                        || redeemRetailGroupMemberLine.Category)
                {
                    result = Box::yesNo("@REX4520241", DialogButton::No);
                    if (result == DialogButton::No)
                    {
                        return false;
                    }
                }
            }

            ret = super();

            // Check whether the loyalty tier used in the scheme line belongs to the loyalty group
            if (ret && retailLoyaltyRedeemSchemeLine.LoyaltyTier != 0)
            {
                select firstonly Affiliation from loyaltyTier where loyaltyTier.RecId == retailLoyaltyRedeemSchemeLine.LoyaltyTier;

                if (loyaltyTier.Affiliation != retailLoyaltyScheme.Affiliation)
                {
                    ret = checkFailed("@REX1652");
                }
            }

            return ret;
        }

]]></Source>
					</Method>
				</Methods>
				<Fields>
					<Field>
						<DataField>FromRewardPoint</DataField>
						<Methods>
							<Method>
								<Name>lookupReference</Name>
								<Source><![CDATA[
            public Common lookupReference(FormReferenceControl _formReferenceControl)
            {
                SysReferenceTableLookup sysTableLookup;
                Query query;
                QueryBuildDataSource qbdsRewardPoint;

                sysTableLookup = SysReferenceTableLookup::newParameters(tableNum(RetailLoyaltyRewardPoint), _formReferenceControl, true);
                sysTableLookup.addLookupfield(fieldNum(RetailLoyaltyRewardPoint, RewardPointId));

                query = new Query();
                qbdsRewardPoint = query.addDataSource(tableNum(RetailLoyaltyRewardPoint));
                qbdsRewardPoint.addRange(fieldNum(RetailLoyaltyRewardPoint, Redeemable)).value(int2str(NoYes::Yes));

                sysTableLookup.parmQuery(query);
                return sysTableLookup.performFormLookup();
            }

]]></Source>
							</Method>
						</Methods>
					</Field>
					<Field>
						<DataField>LoyaltyTier</DataField>
						<Methods>
							<Method>
								<Name>jumpRef</Name>
								<Source><![CDATA[
            public void jumpRef()
            {
                RetailAffiliation::jumpRefForLoyaltyGroup(RetailAffiliation::find(RetailLoyaltyScheme.Affiliation));
            }

]]></Source>
							</Method>
							<Method>
								<Name>resolveReference</Name>
								<Source><![CDATA[
            public Common resolveReference(FormReferenceControl _formReferenceControl)
            {
                return element.resolveTier(_formReferenceControl);
            }

]]></Source>
							</Method>
						</Methods>
					</Field>
					<Field>
						<DataField>RetailAffiliationId</DataField>
						<Methods>
							<Method>
								<Name>lookupReference</Name>
								<Source><![CDATA[
            public Common lookupReference(FormReferenceControl _formReferenceControl)
            {
                Args    args;
                FormRun lookupForm;
                RetailAffiliation affiliation;

                args = new Args(formStr(RetailAffiliationLookup));
                args.parmEnumType(enumNum(RetailAffiliationType));
                args.parmEnum(RetailAffiliationType::General);
                lookupForm = classfactory.formRunClass(args);
                lookupForm.init();

                _formReferenceControl.performFormLookup(lookupForm);
                affiliation = lookupForm.selectRecordModeSelectedRecord();
                return affiliation;
            }

]]></Source>
							</Method>
						</Methods>
					</Field>
					<Field>
						<DataField>ToRewardType</DataField>
						<Methods>
							<Method>
								<Name>modified</Name>
								<Source><![CDATA[
            public void modified()
            {
                DialogButton result;

                // <GEERU>
                if (element.changeToRewardType_RU())
                {
                    retailLoyaltyRedeemSchemeLine.ToRetailGroupMemberLine = 0;
                    retailLoyaltyRedeemSchemeLine_ds.executeQuery();
                }
                // </GEERU>

                if (RetailLoyaltyRedeemSchemeLine.ToRewardType == RetailLoyaltyRewardType::PaymentByQuantity)
                {
                    // N-1 Mode check
                    if (isConfigurationkeyEnabled(configurationKeyNum(RetailCDXBackwardCompatibility)))
                    {
                        result = Box::yesNo("@REX4520240", DialogButton::No);
                        if (result == DialogButton::No)
                        {
                            return;
                        }
                    }
                }

                super();
            }

]]></Source>
							</Method>
						</Methods>
					</Field>
				</Fields>
			</DataSource>
			<DataSource>
				<Name>EarnRetailGroupMemberLine</Name>
				<Methods>
					<Method>
						<Name>write</Name>
						<Source><![CDATA[
        public void write()
        {
            // Skip write of EarnRetailGroupMemberLine
            // Handle the writing in its parent data source.
            //super();
        }

]]></Source>
					</Method>
					<Method>
						<Name>active</Name>
						<Source><![CDATA[
        public int active()
        {
            int ret;

            ret = super();

            element.updateActivityFields();

            return ret;
        }

]]></Source>
					</Method>
				</Methods>
				<Fields>
					<Field>
						<DataField>Category</DataField>
						<Methods>
							<Method>
								<Name>lookupReference</Name>
								<Source><![CDATA[
            public Common lookupReference(FormReferenceControl _formReferenceControl)
            {
                return RetailGroupMemberLine::categoryLookup(_formReferenceControl);
            }

]]></Source>
							</Method>
						</Methods>
					</Field>
					<Field>
						<DataField>Product</DataField>
						<Methods>
							<Method>
								<Name>lookupReference</Name>
								<Source><![CDATA[
            public Common lookupReference(FormReferenceControl _formReferenceControl)
            {
                return RetailGroupMemberLine::productLookupByLE(_formReferenceControl, earnRetailGroupMemberLine);
            }

]]></Source>
							</Method>
							<Method>
								<Name>jumpRef</Name>
								<Source><![CDATA[
            public void jumpRef()
            {
                RetailGroupMemberLine::jumpRefProduct(InventTable::findByProduct(earnRetailGroupMemberLine.Product));
            }

]]></Source>
							</Method>
						</Methods>
					</Field>
					<Field>
						<DataField>Variant</DataField>
						<Methods>
							<Method>
								<Name>lookupReference</Name>
								<Source><![CDATA[
            public Common lookupReference(FormReferenceControl _formReferenceControl)
            {
                return RetailGroupMemberLine::variantLookupByLE(_formReferenceControl, earnRetailGroupMemberLine);
            }

]]></Source>
							</Method>
						</Methods>
					</Field>
				</Fields>
			</DataSource>
			<DataSource>
				<Name>RedeemRetailGroupMemberLine</Name>
				<Methods>
					<Method>
						<Name>active</Name>
						<Source><![CDATA[
        public int active()
        {
            int ret;

            ret = super();

            // <GEERU>
            element.changeToRewardType_RU();
            // </GEERU>

            return ret;
        }

]]></Source>
					</Method>
					<Method>
						<Name>write</Name>
						<Source><![CDATA[
        public void write()
        {
            // Skip write of RedeemRetailGroupMemberLine
            // Handle the writing in its parent data source.
            //super();
        }

]]></Source>
					</Method>
				</Methods>
				<Fields>
					<Field>
						<DataField>Category</DataField>
						<Methods>
							<Method>
								<Name>lookupReference</Name>
								<Source><![CDATA[
            public Common lookupReference(FormReferenceControl _formReferenceControl)
            {
                return RetailGroupMemberLine::categoryLookup(_formReferenceControl);
            }

]]></Source>
							</Method>
						</Methods>
					</Field>
					<Field>
						<DataField>Product</DataField>
						<Methods>
							<Method>
								<Name>jumpRef</Name>
								<Source><![CDATA[
            public void jumpRef()
            {
                RetailGroupMemberLine::jumpRefProduct(InventTable::findByProduct(redeemRetailGroupMemberLine.Product));
            }

]]></Source>
							</Method>
							<Method>
								<Name>lookupReference</Name>
								<Source><![CDATA[
            public Common lookupReference(FormReferenceControl _formReferenceControl)
            {
                return RetailGroupMemberLine::productLookupByLE(_formReferenceControl, redeemRetailGroupMemberLine);
            }

]]></Source>
							</Method>
						</Methods>
					</Field>
					<Field>
						<DataField>Variant</DataField>
						<Methods>
							<Method>
								<Name>lookupReference</Name>
								<Source><![CDATA[
            public Common lookupReference(FormReferenceControl _formReferenceControl)
            {
                return RetailGroupMemberLine::variantLookupByLE(_formReferenceControl, redeemRetailGroupMemberLine);
            }

]]></Source>
							</Method>
						</Methods>
					</Field>
				</Fields>
			</DataSource>
			<DataSource>
				<Name>RetailLoyaltySchemeExcludedAffiliations</Name>
				<Methods />
				<Fields>
					<Field>
						<DataField>RetailAffiliationId</DataField>
						<Methods>
							<Method>
								<Name>lookupReference</Name>
								<Source><![CDATA[
            public Common lookupReference(FormReferenceControl _formReferenceControl)
            {
                Args    args;
                FormRun lookupForm;
                RetailAffiliation affiliation;

                args = new Args(formStr(RetailAffiliationLookup));
                args.parmEnumType(enumNum(RetailAffiliationType));
                args.parmEnum(RetailAffiliationType::General);
                lookupForm = classfactory.formRunClass(args);
                lookupForm.init();

                _formReferenceControl.performFormLookup(lookupForm);
                affiliation = lookupForm.selectRecordModeSelectedRecord();
                return affiliation;
            }

]]></Source>
							</Method>
						</Methods>
					</Field>
				</Fields>
			</DataSource>
		</DataSources>
		<DataControls xmlns="">
			<Control>
				<Name>LoyaltyGroup</Name>
				<Type>ReferenceGroup</Type>
				<Methods>
					<Method>
						<Name>modified</Name>
						<Source><![CDATA[
        public boolean modified()
        {
            boolean ret;
            RetailLoyaltyScheme localLoyaltyScheme;
            DialogButton result;
            RetailLoyaltyEarnSchemeLine earnSchemeLine;
            RetailLoyaltyRedeemSchemeLine redeemSchemeLine;

            // If there is any earn/redeem scheme line using a loyalty tier (from the previous loyalty group)
            // Prevent the change of the loyalty group.
            select count(RecId) from earnSchemeLine
                where earnSchemeLine.LoyaltyScheme == RetailLoyaltyScheme.RecId
                    && earnSchemeLine.LoyaltyTier != 0;

            select count(RecId) from redeemSchemeLine
                where redeemSchemeLine.LoyaltyScheme == RetailLoyaltyScheme.RecId
                    && redeemSchemeLine.LoyaltyTier != 0;

            if (earnSchemeLine.RecId || redeemSchemeLine.RecId)
            {
                ret = checkFailed("@REX4161307");
                return ret;
            }

            // N-1 Mode check
            if (isConfigurationkeyEnabled(configurationKeyNum(RetailCDXBackwardCompatibility)))
            {
                select count(RecId) from localLoyaltyScheme
                        where localLoyaltyScheme.Affiliation == affiliationId;
                if (localLoyaltyScheme.RecId >= 1)
                {
                    result = Box::yesNo("@REX4161343", DialogButton::No);
                    if (result == DialogButton::No)
                    {
                        return false;
                    }
                }
            }

            ret = super();

            return ret;
        }

]]></Source>
					</Method>
				</Methods>
			</Control>
			<Control>
				<Name>EarnLinesGrid_LoyaltyTierId</Name>
				<Type>ReferenceGroup</Type>
				<Methods>
					<Method>
						<Name>lookupReference</Name>
						<Source><![CDATA[
        public Common lookupReference()
        {
            Common ret;

            ret = element.lookupTier(this);

            return ret;
        }

]]></Source>
					</Method>
					<Method>
						<Name>modified</Name>
						<Source><![CDATA[
        public boolean modified()
        {
            DialogButton result;
            boolean ret;

            // N-1 Mode check
            if (isConfigurationkeyEnabled(configurationKeyNum(RetailCDXBackwardCompatibility)) && EarnlinesGrid_LoyaltyTierId.value())
            {
                result = Box::yesNo("@REX4161354", DialogButton::No);
                if (result == DialogButton::No)
                {
                    return false;
                }
            }

            ret = super();

            return ret;
        }

]]></Source>
					</Method>
				</Methods>
			</Control>
			<Control>
				<Name>EarnLinesGrid_RewardPoint</Name>
				<Type>ReferenceGroup</Type>
				<Methods>
					<Method>
						<Name>modified</Name>
						<Source><![CDATA[
        public boolean modified()
        {
            boolean ret = true;
            // N-1 Mode check
            if (isConfigurationkeyEnabled(configurationKeyNum(RetailCDXBackwardCompatibility)))
            {
                ret = element.VerifyRewardPointPerScheme(retailLoyaltyScheme.RecId, EarnLinesGrid_RewardPoint.value());
            }

            if (ret)
            {
                ret = super();
            }

            return ret;
        }

]]></Source>
					</Method>
				</Methods>
			</Control>
			<Control>
				<Name>RedeemLinesGrid_LoyaltyTierId</Name>
				<Type>ReferenceGroup</Type>
				<Methods>
					<Method>
						<Name>lookupReference</Name>
						<Source><![CDATA[
        public Common lookupReference()
        {
            Common ret;

            ret = element.lookupTier(this);

            return ret;
        }

]]></Source>
					</Method>
					<Method>
						<Name>modified</Name>
						<Source><![CDATA[
        public boolean modified()
        {
            DialogButton result;
            boolean ret;

            // N-1 Mode check
            if (isConfigurationkeyEnabled(configurationKeyNum(RetailCDXBackwardCompatibility)) && RedeemLinesGrid_LoyaltyTierId.value())
            {
                result = Box::yesNo("@REX4161355", DialogButton::No);
                if (result == DialogButton::No)
                {
                    return false;
                }
            }

            ret = super();

            return ret;
        }

]]></Source>
					</Method>
				</Methods>
			</Control>
			<Control>
				<Name>RedeemLinesGrid_RewardPoint</Name>
				<Type>ReferenceGroup</Type>
				<Methods>
					<Method>
						<Name>modified</Name>
						<Source><![CDATA[
        public boolean modified()
        {
            boolean ret = true;
            // N-1 Mode check
            if (isConfigurationkeyEnabled(configurationKeyNum(RetailCDXBackwardCompatibility)))
            {
                ret = element.VerifyRewardPointPerScheme(retailLoyaltyScheme.RecId, RedeemLinesGrid_RewardPoint.value());
            }

            if (ret)
            {
                ret = super();
            }

            return ret;
        }

]]></Source>
					</Method>
				</Methods>
			</Control>
		</DataControls>
		<Members xmlns="" />
	</SourceCode>
	<AllowPreLoading>No</AllowPreLoading>
	<FormTemplate>DetailsPage</FormTemplate>
	<InteractionClass>ListPageInteraction</InteractionClass>
	<DataSources>
		<AxFormDataSource xmlns="">
			<Name>RetailLoyaltyScheme</Name>
			<Table>RetailLoyaltyScheme</Table>
			<Fields>
				<AxFormDataSourceField>
					<DataField>Affiliation</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>createdBy</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>createdDateTime</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>dataAreaId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Description</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>LoyaltySchemeId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>modifiedBy</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>modifiedDateTime</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RecId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TableId</DataField>
				</AxFormDataSourceField>
			</Fields>
			<ReferencedDataSources />
			<DataSourceLinks />
			<DerivedDataSources />
		</AxFormDataSource>
		<AxFormDataSource xmlns="">
			<Name>RetailLoyaltyEarnSchemeLine</Name>
			<Table>RetailLoyaltyEarnSchemeLine</Table>
			<Fields>
				<AxFormDataSourceField>
					<DataField>createdDateTime</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>dataAreaId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>FromActivityAmountCurrency</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>FromActivityAmountQty</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>FromActivityRetailGroupMemberLine</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>FromActivityType</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>LineNum</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>LoyaltyScheme</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>LoyaltyTier</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>modifiedBy</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>modifiedDateTime</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RecId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RetailAffiliationId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RetailFromOtherActivityTypeId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TableId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ToRewardPoint</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ToRewardPointAmountQty</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ValidFrom</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ValidTo</DataField>
				</AxFormDataSourceField>
			</Fields>
			<ReferencedDataSources />
			<JoinSource>RetailLoyaltyScheme</JoinSource>
			<InsertIfEmpty>No</InsertIfEmpty>
			<DataSourceLinks />
			<DerivedDataSources />
		</AxFormDataSource>
		<AxFormDataSource xmlns="">
			<Name>RetailLoyaltyRedeemSchemeLine</Name>
			<Table>RetailLoyaltyRedeemSchemeLine</Table>
			<Fields>
				<AxFormDataSourceField>
					<DataField>dataAreaId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>FromRewardPoint</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>FromRewardPointAmountQty</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>LoyaltyScheme</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>LoyaltyTier</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RecId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RetailAffiliationId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TableId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ToRetailGroupMemberLine</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ToRewardAmountCurrency</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ToRewardAmountQty</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ToRewardType</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ValidFrom</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ValidTo</DataField>
				</AxFormDataSourceField>
			</Fields>
			<ReferencedDataSources />
			<JoinSource>RetailLoyaltyScheme</JoinSource>
			<InsertIfEmpty>No</InsertIfEmpty>
			<DataSourceLinks />
			<DerivedDataSources />
		</AxFormDataSource>
		<AxFormDataSource xmlns="">
			<Name>RetailLoyaltySchemeChannel</Name>
			<Table>RetailLoyaltySchemeChannel</Table>
			<Fields>
				<AxFormDataSourceField>
					<DataField>dataAreaId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>LoyaltyScheme</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>OMHierarchyType</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>OMInternalOrganization</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RecId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TableId</DataField>
				</AxFormDataSourceField>
			</Fields>
			<ReferencedDataSources>
				<AxFormReferencedDataSource>
					<Name>OMInternalOrganization</Name>
					<Table>OMInternalOrganization</Table>
					<Fields>
						<AxFormDataSourceField>
							<DataField>createdBy</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>createdDateTime</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>dataAreaId</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>DunsNumberRecId</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>InstanceRelationType</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>KnownAs</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>LanguageId</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>modifiedBy</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>modifiedDateTime</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>Name</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>NameAlias</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>OrganizationType</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>PartyNumber</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>PhoneticName</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>PrimaryAddressLocation</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>PrimaryContactEmail</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>PrimaryContactFax</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>PrimaryContactPhone</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>PrimaryContactTelex</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>PrimaryContactURL</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>RecId</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>relationType</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>TableId</DataField>
						</AxFormDataSourceField>
					</Fields>
					<ReferencedDataSources />
					<JoinSource>RetailLoyaltySchemeChannel</JoinSource>
					<LinkType>OuterJoin</LinkType>
					<JoinRelation>OMInternalOrganization</JoinRelation>
				</AxFormReferencedDataSource>
				<AxFormReferencedDataSource>
					<Name>OMOperatingUnit</Name>
					<Table>OMOperatingUnit</Table>
					<Fields>
						<AxFormDataSourceField>
							<DataField>createdBy</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>createdDateTime</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>dataAreaId</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>DunsNumberRecId</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>HcmWorker</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>InstanceRelationType</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>KnownAs</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>LanguageId</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>modifiedBy</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>modifiedDateTime</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>Name</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>NameAlias</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>OMOperatingUnitNumber</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>OMOperatingUnitType</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>OrganizationType</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>PartyNumber</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>PhoneticName</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>PrimaryAddressLocation</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>PrimaryContactEmail</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>PrimaryContactFax</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>PrimaryContactPhone</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>PrimaryContactTelex</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>PrimaryContactURL</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>RecId</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>relationType</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>TableId</DataField>
						</AxFormDataSourceField>
					</Fields>
					<ReferencedDataSources />
					<JoinSource>RetailLoyaltySchemeChannel</JoinSource>
					<LinkType>OuterJoin</LinkType>
					<JoinRelation>OMOperatingUnit</JoinRelation>
				</AxFormReferencedDataSource>
			</ReferencedDataSources>
			<JoinSource>RetailLoyaltyScheme</JoinSource>
			<InsertIfEmpty>No</InsertIfEmpty>
			<DataSourceLinks />
			<DerivedDataSources />
		</AxFormDataSource>
		<AxFormDataSource xmlns="">
			<Name>RetailAffiliation</Name>
			<Table>RetailAffiliation</Table>
			<Fields>
				<AxFormDataSourceField>
					<DataField>AffiliationType</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>dataAreaId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Name</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>PoolRelatedCards</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RecId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TableId</DataField>
				</AxFormDataSourceField>
			</Fields>
			<ReferencedDataSources />
			<JoinSource>RetailLoyaltyScheme</JoinSource>
			<AllowCreate>No</AllowCreate>
			<DataSourceLinks />
			<DerivedDataSources />
		</AxFormDataSource>
		<AxFormDataSource xmlns="">
			<Name>RetailLoyaltyTier</Name>
			<Table>RetailLoyaltyTier</Table>
			<Fields>
				<AxFormDataSourceField>
					<DataField>Affiliation</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>dataAreaId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RecId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TableId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TierId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TierLevel</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ValidDateInterval</DataField>
				</AxFormDataSourceField>
			</Fields>
			<ReferencedDataSources />
			<JoinSource>RetailAffiliation</JoinSource>
			<AllowCreate>No</AllowCreate>
			<DataSourceLinks />
			<DerivedDataSources />
		</AxFormDataSource>
		<AxFormDataSource xmlns="">
			<Name>EarnRetailGroupMemberLine</Name>
			<Table>RetailGroupMemberLine</Table>
			<Fields>
				<AxFormDataSourceField>
					<DataField>Category</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>dataAreaId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Product</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RecId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TableId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Variant</DataField>
				</AxFormDataSourceField>
			</Fields>
			<ReferencedDataSources />
			<JoinSource>RetailLoyaltyEarnSchemeLine</JoinSource>
			<LinkType>OuterJoin</LinkType>
			<InsertIfEmpty>No</InsertIfEmpty>
			<DataSourceLinks />
			<DerivedDataSources />
		</AxFormDataSource>
		<AxFormDataSource xmlns="">
			<Name>RedeemRetailGroupMemberLine</Name>
			<Table>RetailGroupMemberLine</Table>
			<Fields>
				<AxFormDataSourceField>
					<DataField>Category</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>dataAreaId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Product</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RecId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TableId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Variant</DataField>
				</AxFormDataSourceField>
			</Fields>
			<ReferencedDataSources />
			<JoinSource>RetailLoyaltyRedeemSchemeLine</JoinSource>
			<LinkType>OuterJoin</LinkType>
			<InsertIfEmpty>No</InsertIfEmpty>
			<DataSourceLinks />
			<DerivedDataSources />
		</AxFormDataSource>
		<AxFormDataSource xmlns="">
			<Name>RetailLoyaltySchemeExcludedAffiliations</Name>
			<Table>RetailLoyaltySchemeExcludedAffiliation</Table>
			<Fields>
				<AxFormDataSourceField>
					<DataField>CreatedDateTime</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>DataAreaId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>LoyaltySchemeId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Partition</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RecId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RetailAffiliationId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TableId</DataField>
				</AxFormDataSourceField>
			</Fields>
			<ReferencedDataSources />
			<JoinSource>RetailLoyaltyScheme</JoinSource>
			<InsertIfEmpty>No</InsertIfEmpty>
			<DataSourceLinks />
			<DerivedDataSources />
		</AxFormDataSource>
	</DataSources>
	<Design>
		<Caption xmlns="">@RET4361</Caption>
		<DataSource xmlns="">RetailLoyaltyScheme</DataSource>
		<Pattern xmlns="">DetailsMaster</Pattern>
		<PatternVersion xmlns="">1.4</PatternVersion>
		<SetCompany xmlns="">No</SetCompany>
		<Style xmlns="">DetailsFormMaster</Style>
		<TitleDataSource xmlns="">RetailLoyaltyScheme</TitleDataSource>
		<Controls xmlns="">
			<AxFormControl xmlns=""
				i:type="AxFormActionPaneControl">
				<Name>ActionPaneHeader</Name>
				<ElementPosition>715827882</ElementPosition>
				<FilterExpression>%1</FilterExpression>
				<HeightMode>Auto</HeightMode>
				<Type>ActionPane</Type>
				<VerticalSpacing>-1</VerticalSpacing>
				<Width>0</Width>
				<FormControlExtension
					i:nil="true" />
				<Controls />
				<AlignChild>No</AlignChild>
				<AlignChildren>No</AlignChildren>
				<ArrangeMethod>Vertical</ArrangeMethod>
				<DataSource>RetailLoyaltyScheme</DataSource>
			</AxFormControl>
			<AxFormControl xmlns=""
				i:type="AxFormGroupControl">
				<Name>NavigationList</Name>
				<HeightMode>SizeToAvailable</HeightMode>
				<Type>Group</Type>
				<Visible>No</Visible>
				<FormControlExtension
					i:nil="true" />
				<Controls>
					<AxFormControl>
						<Name>QuickFilterControl</Name>
						<WidthMode>SizeToAvailable</WidthMode>
						<FormControlExtension>
							<Name>QuickFilterControl</Name>
							<ExtensionComponents />
							<ExtensionProperties>
								<AxFormControlExtensionProperty>
									<Name>targetControlName</Name>
									<Type>String</Type>
									<Value>ListStyleGrid</Value>
								</AxFormControlExtensionProperty>
								<AxFormControlExtensionProperty>
									<Name>defaultColumnName</Name>
									<Type>String</Type>
								</AxFormControlExtensionProperty>
								<AxFormControlExtensionProperty>
									<Name>placeholderText</Name>
									<Type>String</Type>
								</AxFormControlExtensionProperty>
							</ExtensionProperties>
						</FormControlExtension>
					</AxFormControl>
					<AxFormControl xmlns=""
						i:type="AxFormGridControl">
						<Name>ListStyleGrid</Name>
						<AllowEdit>No</AllowEdit>
						<Type>Grid</Type>
						<WidthMode>SizeToContent</WidthMode>
						<FormControlExtension
							i:nil="true" />
						<Controls>
							<AxFormControl xmlns=""
								i:type="AxFormStringControl">
								<Name>RetailLoyaltyScheme_LoyaltySchemeId</Name>
								<Type>String</Type>
								<FormControlExtension
									i:nil="true" />
								<DataField>LoyaltySchemeId</DataField>
								<DataSource>RetailLoyaltyScheme</DataSource>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormStringControl">
								<Name>RetailLoyaltyScheme_Description</Name>
								<Type>String</Type>
								<FormControlExtension
									i:nil="true" />
								<DataField>Description</DataField>
								<DataSource>RetailLoyaltyScheme</DataSource>
							</AxFormControl>
						</Controls>
						<DataSource>RetailLoyaltyScheme</DataSource>
						<MultiSelect>No</MultiSelect>
						<ShowRowLabels>No</ShowRowLabels>
						<Style>List</Style>
					</AxFormControl>
				</Controls>
				<FrameType>None</FrameType>
				<Style>SidePanel</Style>
			</AxFormControl>
			<AxFormControl xmlns=""
				i:type="AxFormTabControl">
				<Name>Tab</Name>
				<AlignControl>No</AlignControl>
				<ElementPosition>1431655764</ElementPosition>
				<FilterExpression>%1</FilterExpression>
				<Type>Tab</Type>
				<VerticalSpacing>-1</VerticalSpacing>
				<FormControlExtension
					i:nil="true" />
				<Controls>
					<AxFormControl xmlns=""
						i:type="AxFormTabPageControl">
						<Name>TabPageDetails</Name>
						<AutoDeclaration>Yes</AutoDeclaration>
						<ElementPosition>1431655764</ElementPosition>
						<FilterExpression>%1</FilterExpression>
						<Height>0</Height>
						<HeightMode>SizeToAvailable</HeightMode>
						<Type>TabPage</Type>
						<VerticalSpacing>-1</VerticalSpacing>
						<Width>0</Width>
						<WidthMode>SizeToAvailable</WidthMode>
						<FormControlExtension
							i:nil="true" />
						<Controls>
							<AxFormControl xmlns=""
								i:type="AxFormGroupControl">
								<Name>HeaderInfo</Name>
								<ElementPosition>1073741822</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<Type>Group</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<WidthMode>SizeToAvailable</WidthMode>
								<FormControlExtension
									i:nil="true" />
								<Controls>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>HeaderTitle</Name>
										<ElementPosition>1431655764</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<Skip>Yes</Skip>
										<Type>String</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>SizeToAvailable</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>LoyaltySchemeId</DataField>
										<DataSource>RetailLoyaltyScheme</DataSource>
										<ShowLabel>No</ShowLabel>
										<Style>TitleField</Style>
									</AxFormControl>
								</Controls>
								<ArrangeMethod>HorizontalLeft</ArrangeMethod>
								<FrameType>None</FrameType>
								<Style>DetailTitleContainer</Style>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormTabControl">
								<Name>TabHeader</Name>
								<AlignControl>No</AlignControl>
								<ElementPosition>1610612734</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<Type>Tab</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<FormControlExtension
									i:nil="true" />
								<Controls>
									<AxFormControl xmlns=""
										i:type="AxFormTabPageControl">
										<Name>HeaderView</Name>
										<ElementPosition>773094112</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Pattern>FieldsFieldGroups</Pattern>
										<PatternVersion>1.1</PatternVersion>
										<Type>TabPage</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<Controls>
											<AxFormControl xmlns=""
												i:type="AxFormGroupControl">
												<Name>Identification</Name>
												<ElementPosition>536870910</ElementPosition>
												<FilterExpression>%1</FilterExpression>
												<Type>Group</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<FormControlExtension
													i:nil="true" />
												<Controls>
													<AxFormControl xmlns=""
														i:type="AxFormStringControl">
														<Name>Identification_LoyaltySchemeId</Name>
														<ElementPosition>1431655764</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<Type>String</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<FormControlExtension
															i:nil="true" />
														<DataField>LoyaltySchemeId</DataField>
														<DataSource>RetailLoyaltyScheme</DataSource>
													</AxFormControl>
												</Controls>
												<DataSource>RetailLoyaltyScheme</DataSource>
												<FrameType>None</FrameType>
											</AxFormControl>
											<AxFormControl xmlns=""
												i:type="AxFormGroupControl">
												<Name>Description</Name>
												<ElementPosition>805306365</ElementPosition>
												<FilterExpression>%1</FilterExpression>
												<Type>Group</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<FormControlExtension
													i:nil="true" />
												<Controls>
													<AxFormControl xmlns=""
														i:type="AxFormStringControl">
														<Name>Description_Description</Name>
														<ElementPosition>1073741822</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<Type>String</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<FormControlExtension
															i:nil="true" />
														<DataField>Description</DataField>
														<DataSource>RetailLoyaltyScheme</DataSource>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormReferenceGroupControl">
														<Name>LoyaltyGroup</Name>
														<ElementPosition>1610612734</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HelpText>@FieldDescriptions_RetailMain:RetailLoyaltySchemes_LoyaltyGroup</HelpText>
														<Type>ReferenceGroup</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<FormControlExtension
															i:nil="true" />
														<Controls>
															<AxFormControl xmlns=""
																i:type="AxFormStringControl">
																<Name>LoyaltyGroup_Name</Name>
																<DataRelationPath>RetailAffiliation</DataRelationPath>
																<FilterExpression>%1</FilterExpression>
																<HeightMode>Auto</HeightMode>
																<Type>String</Type>
																<VerticalSpacing>-1</VerticalSpacing>
																<WidthMode>Auto</WidthMode>
																<FormControlExtension
																	i:nil="true" />
															</AxFormControl>
														</Controls>
														<DataSource>RetailLoyaltyScheme</DataSource>
														<Label>@REX4520077</Label>
														<ReferenceField>Affiliation</ReferenceField>
														<ReplacementFieldGroup>AutoLookup</ReplacementFieldGroup>
													</AxFormControl>
												</Controls>
												<DataSource>RetailLoyaltyScheme</DataSource>
												<FrameType>None</FrameType>
											</AxFormControl>
										</Controls>
										<ColumnsMode>Fill</ColumnsMode>
										<BackgroundColor>WindowBackground</BackgroundColor>
										<Caption>@SYS104288</Caption>
										<DataSource>RetailLoyaltyScheme</DataSource>
										<FastTabExpanded>Yes</FastTabExpanded>
										<Scrollbars>Auto</Scrollbars>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormTabPageControl">
										<Name>TabPageEarnLineView</Name>
										<ElementPosition>1159641168</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<Height>175</Height>
										<HeightMode>Auto</HeightMode>
										<Pattern>ToolbarList</Pattern>
										<PatternVersion>1.2</PatternVersion>
										<Type>TabPage</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<Controls>
											<AxFormControl xmlns=""
												i:type="AxFormActionPaneControl">
												<Name>EarnActionTab</Name>
												<ElementPosition>1073741822</ElementPosition>
												<FilterExpression>%1</FilterExpression>
												<Type>ActionPane</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<FormControlExtension
													i:nil="true" />
												<Controls>
													<AxFormControl xmlns=""
														i:type="AxFormActionPaneTabControl">
														<Name>ActionPaneTab</Name>
														<ElementPosition>1431655764</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>ActionPaneTab</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<Controls>
															<AxFormControl xmlns=""
																i:type="AxFormButtonGroupControl">
																<Name>EarnActionButtonGroup</Name>
																<AutoDeclaration>Yes</AutoDeclaration>
																<ElementPosition>1431655764</ElementPosition>
																<FilterExpression>%1</FilterExpression>
																<HeightMode>Auto</HeightMode>
																<Left>0</Left>
																<Type>ButtonGroup</Type>
																<VerticalSpacing>-1</VerticalSpacing>
																<WidthMode>Auto</WidthMode>
																<FormControlExtension
																	i:nil="true" />
																<Controls>
																	<AxFormControl xmlns=""
																		i:type="AxFormCommandButtonControl">
																		<Name>AddLine</Name>
																		<ElementPosition>1073741822</ElementPosition>
																		<FilterExpression>%1</FilterExpression>
																		<HeightMode>Auto</HeightMode>
																		<Type>CommandButton</Type>
																		<VerticalSpacing>-1</VerticalSpacing>
																		<WidthMode>Auto</WidthMode>
																		<FormControlExtension
																			i:nil="true" />
																		<ButtonDisplay>TextWithImageLeft</ButtonDisplay>
																		<Command>New</Command>
																		<MultiSelect>Yes</MultiSelect>
																		<NormalImage>Add</NormalImage>
																		<Text>@SYS319116</Text>
																	</AxFormControl>
																	<AxFormControl xmlns=""
																		i:type="AxFormCommandButtonControl">
																		<Name>RemoveLine</Name>
																		<ElementPosition>1610612733</ElementPosition>
																		<FilterExpression>%1</FilterExpression>
																		<HeightMode>Auto</HeightMode>
																		<Type>CommandButton</Type>
																		<VerticalSpacing>-1</VerticalSpacing>
																		<WidthMode>Auto</WidthMode>
																		<FormControlExtension
																			i:nil="true" />
																		<ButtonDisplay>TextWithImageLeft</ButtonDisplay>
																		<Command>DeleteRecord</Command>
																		<MultiSelect>Yes</MultiSelect>
																		<NormalImage>Delete</NormalImage>
																		<SaveRecord>No</SaveRecord>
																		<Text>@SYS135131</Text>
																	</AxFormControl>
																</Controls>
																<ArrangeMethod>Vertical</ArrangeMethod>
															</AxFormControl>
														</Controls>
														<AlignChild>No</AlignChild>
														<AlignChildren>No</AlignChildren>
														<ArrangeMethod>Vertical</ArrangeMethod>
													</AxFormControl>
												</Controls>
												<AlignChild>No</AlignChild>
												<AlignChildren>No</AlignChildren>
												<ArrangeMethod>Vertical</ArrangeMethod>
												<DataSource>RetailLoyaltyEarnSchemeLine</DataSource>
												<Style>Strip</Style>
											</AxFormControl>
											<AxFormControl xmlns=""
												i:type="AxFormGridControl">
												<Name>EarnLinesGrid</Name>
												<ElementPosition>1610612734</ElementPosition>
												<FilterExpression>%1</FilterExpression>
												<Type>Grid</Type>
												<VerticalSpacingMode>Fixed</VerticalSpacingMode>
												<FormControlExtension
													i:nil="true" />
												<Controls>
													<AxFormControl xmlns=""
														i:type="AxFormReferenceGroupControl">
														<Name>EarnLinesGrid_LoyaltyTierId</Name>
														<AutoDeclaration>Yes</AutoDeclaration>
														<ElementPosition>330382098</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>ReferenceGroup</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<Controls>
															<AxFormControl xmlns=""
																i:type="AxFormStringControl">
																<Name>EarnLinesGrid_LoyaltyTierId_TierId</Name>
																<DataRelationPath>RetailLoyaltyTier</DataRelationPath>
																<FilterExpression>%1</FilterExpression>
																<HeightMode>Auto</HeightMode>
																<Type>String</Type>
																<VerticalSpacing>-1</VerticalSpacing>
																<WidthMode>Auto</WidthMode>
																<FormControlExtension
																	i:nil="true" />
															</AxFormControl>
														</Controls>
														<DataSource>RetailLoyaltyEarnSchemeLine</DataSource>
														<Label>@REX4520073</Label>
														<ReferenceField>LoyaltyTier</ReferenceField>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormReferenceGroupControl">
														<Name>EarnLinesGrid_RetailAffiliationId</Name>
														<Type>ReferenceGroup</Type>
														<FormControlExtension
															i:nil="true" />
														<Controls />
														<DataSource>RetailLoyaltyEarnSchemeLine</DataSource>
														<ReferenceField>RetailAffiliationId</ReferenceField>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormComboBoxControl">
														<Name>EarnLinesGrid_ActivityType</Name>
														<AutoDeclaration>Yes</AutoDeclaration>
														<ElementPosition>495573147</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>ComboBox</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<DataField>FromActivityType</DataField>
														<DataSource>RetailLoyaltyEarnSchemeLine</DataSource>
														<Items />
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormReferenceGroupControl">
														<Name>EarnLinesGrid_OtherActivityType</Name>
														<AutoDeclaration>Yes</AutoDeclaration>
														<FilterExpression>%1</FilterExpression>
														<Type>ReferenceGroup</Type>
														<FormControlExtension
															i:nil="true" />
														<Controls />
														<DataSource>RetailLoyaltyEarnSchemeLine</DataSource>
														<ReferenceField>RetailFromOtherActivityTypeId</ReferenceField>
														<ReplacementFieldGroup>RetailLoyaltyOtherActivityType</ReplacementFieldGroup>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormReferenceGroupControl">
														<Name>EarnLinesGrid_Category</Name>
														<AutoDeclaration>Yes</AutoDeclaration>
														<ElementPosition>660764196</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>ReferenceGroup</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<Controls>
															<AxFormControl xmlns=""
																i:type="AxFormStringControl">
																<Name>EarnLinesGrid_Category_Name</Name>
																<DataRelationPath>EcoResCategory</DataRelationPath>
																<FilterExpression>%1</FilterExpression>
																<HeightMode>Auto</HeightMode>
																<Type>String</Type>
																<VerticalSpacing>-1</VerticalSpacing>
																<WidthMode>Auto</WidthMode>
																<FormControlExtension
																	i:nil="true" />
															</AxFormControl>
														</Controls>
														<DataSource>EarnRetailGroupMemberLine</DataSource>
														<ReferenceField>Category</ReferenceField>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormReferenceGroupControl">
														<Name>EarnLinesGrid_Product</Name>
														<AutoDeclaration>Yes</AutoDeclaration>
														<ElementPosition>825955245</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>ReferenceGroup</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<Controls>
															<AxFormControl xmlns=""
																i:type="AxFormStringControl">
																<Name>EarnLinesGrid_Product_DisplayProductNumber</Name>
																<DataRelationPath>EcoResProduct</DataRelationPath>
																<FilterExpression>%1</FilterExpression>
																<HeightMode>Auto</HeightMode>
																<Type>String</Type>
																<VerticalSpacing>-1</VerticalSpacing>
																<WidthMode>Auto</WidthMode>
																<FormControlExtension
																	i:nil="true" />
															</AxFormControl>
														</Controls>
														<DataSource>EarnRetailGroupMemberLine</DataSource>
														<ReferenceField>Product</ReferenceField>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormReferenceGroupControl">
														<Name>EarnLinesGrid_Variant</Name>
														<AutoDeclaration>Yes</AutoDeclaration>
														<ElementPosition>991146294</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>ReferenceGroup</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<Controls>
															<AxFormControl xmlns=""
																i:type="AxFormStringControl">
																<Name>EarnLinesGrid_Variant_DisplayProductNumber</Name>
																<DataRelationPath>EcoResDistinctProductVariant</DataRelationPath>
																<FilterExpression>%1</FilterExpression>
																<HeightMode>Auto</HeightMode>
																<Type>String</Type>
																<VerticalSpacing>-1</VerticalSpacing>
																<WidthMode>Auto</WidthMode>
																<FormControlExtension
																	i:nil="true" />
															</AxFormControl>
														</Controls>
														<DataSource>EarnRetailGroupMemberLine</DataSource>
														<ReferenceField>Variant</ReferenceField>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormRealControl">
														<Name>EarnLinesGrid_ActivityAmountQty</Name>
														<ElementPosition>1156337343</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>Real</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<AllowNegative>No</AllowNegative>
														<DataField>FromActivityAmountQty</DataField>
														<DataSource>RetailLoyaltyEarnSchemeLine</DataSource>
														<NoOfDecimals>-1</NoOfDecimals>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormStringControl">
														<Name>EarnLinesGrid_ActivityAmountCurrency</Name>
														<AutoDeclaration>Yes</AutoDeclaration>
														<ElementPosition>1321528392</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>String</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<DataField>FromActivityAmountCurrency</DataField>
														<DataSource>RetailLoyaltyEarnSchemeLine</DataSource>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormReferenceGroupControl">
														<Name>EarnLinesGrid_RewardPoint</Name>
														<AutoDeclaration>Yes</AutoDeclaration>
														<ElementPosition>1431655758</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>ReferenceGroup</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<Controls>
															<AxFormControl xmlns=""
																i:type="AxFormStringControl">
																<Name>EarnLinesGrid_RewardPoint_RewardPointId</Name>
																<DataRelationPath>RetailLoyaltyRewardPoint</DataRelationPath>
																<FilterExpression>%1</FilterExpression>
																<HeightMode>Auto</HeightMode>
																<Type>String</Type>
																<VerticalSpacing>-1</VerticalSpacing>
																<WidthMode>Auto</WidthMode>
																<FormControlExtension
																	i:nil="true" />
															</AxFormControl>
														</Controls>
														<DataSource>RetailLoyaltyEarnSchemeLine</DataSource>
														<Label>@REX4160083</Label>
														<ReferenceField>ToRewardPoint</ReferenceField>
														<ReplacementFieldGroup>Id</ReplacementFieldGroup>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormReferenceGroupControl">
														<Name>EarnLinesGrid_RewardPointType</Name>
														<AllowEdit>No</AllowEdit>
														<ElementPosition>1541783124</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>ReferenceGroup</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<Controls>
															<AxFormControl xmlns=""
																i:type="AxFormComboBoxControl">
																<Name>EarnLinesGrid_RewardPointType_RewardPointType</Name>
																<DataRelationPath>RetailLoyaltyRewardPoint</DataRelationPath>
																<FilterExpression>%1</FilterExpression>
																<HeightMode>Auto</HeightMode>
																<Type>ComboBox</Type>
																<VerticalSpacing>-1</VerticalSpacing>
																<WidthMode>Auto</WidthMode>
																<FormControlExtension
																	i:nil="true" />
																<Items />
															</AxFormControl>
														</Controls>
														<DataSource>RetailLoyaltyEarnSchemeLine</DataSource>
														<Label>@REX4160084</Label>
														<ReferenceField>ToRewardPoint</ReferenceField>
														<ReplacementFieldGroup>RewardPointType</ReplacementFieldGroup>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormRealControl">
														<Name>EarnLinesGrid_RewardPointAmountQty</Name>
														<ElementPosition>1651910490</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>Real</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<AllowNegative>No</AllowNegative>
														<DataField>ToRewardPointAmountQty</DataField>
														<DataSource>RetailLoyaltyEarnSchemeLine</DataSource>
														<NoOfDecimals>-1</NoOfDecimals>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormDateControl">
														<Name>EarnLinesGrid_ValidFrom</Name>
														<ElementPosition>1817101539</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>Date</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<DataField>ValidFrom</DataField>
														<DataSource>RetailLoyaltyEarnSchemeLine</DataSource>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormDateControl">
														<Name>EarnLinesGrid_ValidTo</Name>
														<ElementPosition>1982292588</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>Date</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<DataField>ValidTo</DataField>
														<DataSource>RetailLoyaltyEarnSchemeLine</DataSource>
													</AxFormControl>
												</Controls>
												<DataSource>RetailLoyaltyEarnSchemeLine</DataSource>
												<Style>Tabular</Style>
											</AxFormControl>
										</Controls>
										<Caption>@REX4520079</Caption>
										<DataSource>RetailLoyaltyEarnSchemeLine</DataSource>
										<FastTabExpanded>Yes</FastTabExpanded>
										<Scrollbars>Auto</Scrollbars>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormTabPageControl">
										<Name>TabPageRedeemLineView</Name>
										<ElementPosition>1546188224</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<Height>175</Height>
										<HeightMode>Auto</HeightMode>
										<Pattern>ToolbarList</Pattern>
										<PatternVersion>1.2</PatternVersion>
										<Type>TabPage</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<Controls>
											<AxFormControl xmlns=""
												i:type="AxFormActionPaneControl">
												<Name>RedeemActionTab</Name>
												<ElementPosition>1073741822</ElementPosition>
												<FilterExpression>%1</FilterExpression>
												<Type>ActionPane</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<FormControlExtension
													i:nil="true" />
												<Controls>
													<AxFormControl xmlns=""
														i:type="AxFormActionPaneTabControl">
														<Name>RedeemActionPaneTab</Name>
														<ElementPosition>1431655764</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>ActionPaneTab</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<Controls>
															<AxFormControl xmlns=""
																i:type="AxFormButtonGroupControl">
																<Name>RedeemActionButtonGroup</Name>
																<AutoDeclaration>Yes</AutoDeclaration>
																<ElementPosition>1431655764</ElementPosition>
																<FilterExpression>%1</FilterExpression>
																<HeightMode>Auto</HeightMode>
																<Left>0</Left>
																<Type>ButtonGroup</Type>
																<VerticalSpacing>-1</VerticalSpacing>
																<WidthMode>Auto</WidthMode>
																<FormControlExtension
																	i:nil="true" />
																<Controls>
																	<AxFormControl xmlns=""
																		i:type="AxFormCommandButtonControl">
																		<Name>RedeemAddLine</Name>
																		<ElementPosition>1073741822</ElementPosition>
																		<FilterExpression>%1</FilterExpression>
																		<HeightMode>Auto</HeightMode>
																		<Type>CommandButton</Type>
																		<VerticalSpacing>-1</VerticalSpacing>
																		<WidthMode>Auto</WidthMode>
																		<FormControlExtension
																			i:nil="true" />
																		<ButtonDisplay>TextWithImageLeft</ButtonDisplay>
																		<Command>New</Command>
																		<MultiSelect>Yes</MultiSelect>
																		<NormalImage>Add</NormalImage>
																		<Text>@SYS319116</Text>
																	</AxFormControl>
																	<AxFormControl xmlns=""
																		i:type="AxFormCommandButtonControl">
																		<Name>RedeemRemoveLine</Name>
																		<ElementPosition>1610612733</ElementPosition>
																		<FilterExpression>%1</FilterExpression>
																		<HeightMode>Auto</HeightMode>
																		<Type>CommandButton</Type>
																		<VerticalSpacing>-1</VerticalSpacing>
																		<WidthMode>Auto</WidthMode>
																		<FormControlExtension
																			i:nil="true" />
																		<ButtonDisplay>TextWithImageLeft</ButtonDisplay>
																		<Command>DeleteRecord</Command>
																		<MultiSelect>Yes</MultiSelect>
																		<NormalImage>Delete</NormalImage>
																		<SaveRecord>No</SaveRecord>
																		<Text>@SYS135131</Text>
																	</AxFormControl>
																</Controls>
																<ArrangeMethod>Vertical</ArrangeMethod>
															</AxFormControl>
														</Controls>
														<AlignChild>No</AlignChild>
														<AlignChildren>No</AlignChildren>
														<ArrangeMethod>Vertical</ArrangeMethod>
														<DataSource>RetailLoyaltyRedeemSchemeLine</DataSource>
													</AxFormControl>
												</Controls>
												<AlignChild>No</AlignChild>
												<AlignChildren>No</AlignChildren>
												<ArrangeMethod>Vertical</ArrangeMethod>
												<DataSource>RetailLoyaltyRedeemSchemeLine</DataSource>
												<Style>Strip</Style>
											</AxFormControl>
											<AxFormControl xmlns=""
												i:type="AxFormGridControl">
												<Name>RedeemLinesGrid</Name>
												<AutoDeclaration>Yes</AutoDeclaration>
												<ElementPosition>1610612734</ElementPosition>
												<FilterExpression>%1</FilterExpression>
												<Type>Grid</Type>
												<VerticalSpacingMode>Fixed</VerticalSpacingMode>
												<FormControlExtension
													i:nil="true" />
												<Controls>
													<AxFormControl xmlns=""
														i:type="AxFormReferenceGroupControl">
														<Name>RedeemLinesGrid_LoyaltyTierId</Name>
														<AutoDeclaration>Yes</AutoDeclaration>
														<ElementPosition>254516578</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>ReferenceGroup</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<Controls>
															<AxFormControl xmlns=""
																i:type="AxFormStringControl">
																<Name>RedeemLinesGrid_LoyaltyTierId_TierId</Name>
																<DataRelationPath>RetailLoyaltyTier</DataRelationPath>
																<FilterExpression>%1</FilterExpression>
																<HeightMode>Auto</HeightMode>
																<Type>String</Type>
																<VerticalSpacing>-1</VerticalSpacing>
																<WidthMode>Auto</WidthMode>
																<FormControlExtension
																	i:nil="true" />
															</AxFormControl>
														</Controls>
														<DataSource>RetailLoyaltyRedeemSchemeLine</DataSource>
														<Label>@REX4520073</Label>
														<ReferenceField>LoyaltyTier</ReferenceField>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormReferenceGroupControl">
														<Name>RedeemLinesGrid_RetailAffiliationId</Name>
														<Type>ReferenceGroup</Type>
														<FormControlExtension
															i:nil="true" />
														<Controls />
														<DataSource>RetailLoyaltyRedeemSchemeLine</DataSource>
														<ReferenceField>RetailAffiliationId</ReferenceField>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormReferenceGroupControl">
														<Name>RedeemLinesGrid_RewardPoint</Name>
														<AutoDeclaration>Yes</AutoDeclaration>
														<ElementPosition>381774869</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>ReferenceGroup</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<Controls>
															<AxFormControl xmlns=""
																i:type="AxFormStringControl">
																<Name>RedeemLinesGrid_RewardPoint_RewardPointId</Name>
																<DataRelationPath>RetailLoyaltyRewardPoint</DataRelationPath>
																<FilterExpression>%1</FilterExpression>
																<HeightMode>Auto</HeightMode>
																<Type>String</Type>
																<VerticalSpacing>-1</VerticalSpacing>
																<WidthMode>Auto</WidthMode>
																<FormControlExtension
																	i:nil="true" />
															</AxFormControl>
														</Controls>
														<DataSource>RetailLoyaltyRedeemSchemeLine</DataSource>
														<Label>@REX4160083</Label>
														<ReferenceField>FromRewardPoint</ReferenceField>
														<ReplacementFieldGroup>Id</ReplacementFieldGroup>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormReferenceGroupControl">
														<Name>ReedemLinesGrid_RewardPointType</Name>
														<AllowEdit>No</AllowEdit>
														<ElementPosition>477218586</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>ReferenceGroup</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<Controls>
															<AxFormControl xmlns=""
																i:type="AxFormComboBoxControl">
																<Name>ReedemLinesGrid_RewardPointType_RewardPointType</Name>
																<DataRelationPath>RetailLoyaltyRewardPoint</DataRelationPath>
																<FilterExpression>%1</FilterExpression>
																<HeightMode>Auto</HeightMode>
																<Type>ComboBox</Type>
																<VerticalSpacing>-1</VerticalSpacing>
																<WidthMode>Auto</WidthMode>
																<FormControlExtension
																	i:nil="true" />
																<Items />
															</AxFormControl>
														</Controls>
														<DataSource>RetailLoyaltyRedeemSchemeLine</DataSource>
														<Label>@REX4160084</Label>
														<ReferenceField>FromRewardPoint</ReferenceField>
														<ReplacementFieldGroup>RewardPointType</ReplacementFieldGroup>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormRealControl">
														<Name>RedeemLinesGrid_RewardPointAmountQty</Name>
														<ElementPosition>572662304</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>Real</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<DataField>FromRewardPointAmountQty</DataField>
														<DataSource>RetailLoyaltyRedeemSchemeLine</DataSource>
														<NoOfDecimals>-1</NoOfDecimals>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormComboBoxControl">
														<Name>RedeemLinesGrid_RewardType</Name>
														<ElementPosition>715827880</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>ComboBox</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<DataField>ToRewardType</DataField>
														<DataSource>RetailLoyaltyRedeemSchemeLine</DataSource>
														<Items />
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormReferenceGroupControl">
														<Name>RedeemLinesGrid_Category</Name>
														<AutoDeclaration>Yes</AutoDeclaration>
														<ElementPosition>858993456</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>ReferenceGroup</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<Controls>
															<AxFormControl xmlns=""
																i:type="AxFormStringControl">
																<Name>RedeemLinesGrid_Category_Name</Name>
																<DataRelationPath>EcoResCategory</DataRelationPath>
																<FilterExpression>%1</FilterExpression>
																<HeightMode>Auto</HeightMode>
																<Type>String</Type>
																<VerticalSpacing>-1</VerticalSpacing>
																<WidthMode>Auto</WidthMode>
																<FormControlExtension
																	i:nil="true" />
															</AxFormControl>
														</Controls>
														<DataSource>RedeemRetailGroupMemberLine</DataSource>
														<ReferenceField>Category</ReferenceField>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormReferenceGroupControl">
														<Name>RedeemLinesGrid_Product</Name>
														<AutoDeclaration>Yes</AutoDeclaration>
														<ElementPosition>1002159032</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>ReferenceGroup</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<Controls>
															<AxFormControl xmlns=""
																i:type="AxFormStringControl">
																<Name>RedeemLinesGrid_Product_DisplayProductNumber</Name>
																<DataRelationPath>EcoResProduct</DataRelationPath>
																<FilterExpression>%1</FilterExpression>
																<HeightMode>Auto</HeightMode>
																<Type>String</Type>
																<VerticalSpacing>-1</VerticalSpacing>
																<WidthMode>Auto</WidthMode>
																<FormControlExtension
																	i:nil="true" />
															</AxFormControl>
														</Controls>
														<DataSource>RedeemRetailGroupMemberLine</DataSource>
														<ReferenceField>Product</ReferenceField>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormReferenceGroupControl">
														<Name>RedeemLinesGrid_Variant</Name>
														<AutoDeclaration>Yes</AutoDeclaration>
														<ElementPosition>1145324608</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>ReferenceGroup</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<Controls>
															<AxFormControl xmlns=""
																i:type="AxFormStringControl">
																<Name>RedeemLinesGrid_Variant_DisplayProductNumber</Name>
																<DataRelationPath>EcoResDistinctProductVariant</DataRelationPath>
																<FilterExpression>%1</FilterExpression>
																<HeightMode>Auto</HeightMode>
																<Type>String</Type>
																<VerticalSpacing>-1</VerticalSpacing>
																<WidthMode>Auto</WidthMode>
																<FormControlExtension
																	i:nil="true" />
															</AxFormControl>
														</Controls>
														<DataSource>RedeemRetailGroupMemberLine</DataSource>
														<ReferenceField>Variant</ReferenceField>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormRealControl">
														<Name>RedeemLineGrid_RewardAmountQty</Name>
														<ElementPosition>1324281578</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>Real</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<DataField>ToRewardAmountQty</DataField>
														<DataSource>RetailLoyaltyRedeemSchemeLine</DataSource>
														<Label>@REX4520016</Label>
														<NoOfDecimals>-1</NoOfDecimals>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormStringControl">
														<Name>RedeemLinesGrid_RewardAmountCurrency</Name>
														<AutoDeclaration>Yes</AutoDeclaration>
														<ElementPosition>1503238548</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>String</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<DataField>ToRewardAmountCurrency</DataField>
														<DataSource>RetailLoyaltyRedeemSchemeLine</DataSource>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormDateControl">
														<Name>RedeemLinesGrid_ValidFrom</Name>
														<ElementPosition>1717986912</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>Date</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<DataField>ValidFrom</DataField>
														<DataSource>RetailLoyaltyRedeemSchemeLine</DataSource>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormDateControl">
														<Name>RedeemLinesGrid_ValidTo</Name>
														<ElementPosition>1932735276</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>Date</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<DataField>ValidTo</DataField>
														<DataSource>RetailLoyaltyRedeemSchemeLine</DataSource>
													</AxFormControl>
												</Controls>
												<DataSource>RetailLoyaltyRedeemSchemeLine</DataSource>
												<Style>Tabular</Style>
											</AxFormControl>
										</Controls>
										<Caption>@REX4520080</Caption>
										<DataSource>RetailLoyaltyRedeemSchemeLine</DataSource>
										<FastTabExpanded>Yes</FastTabExpanded>
										<Scrollbars>Auto</Scrollbars>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormTabPageControl">
										<Name>ChannelsTabPage</Name>
										<ElementPosition>1932735281</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Pattern>ToolbarList</Pattern>
										<PatternVersion>1.2</PatternVersion>
										<Type>TabPage</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<Controls>
											<AxFormControl xmlns=""
												i:type="AxFormActionPaneControl">
												<Name>ChannelsActionTab</Name>
												<ElementPosition>1073741822</ElementPosition>
												<FilterExpression>%1</FilterExpression>
												<Type>ActionPane</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<FormControlExtension
													i:nil="true" />
												<Controls>
													<AxFormControl xmlns=""
														i:type="AxFormActionPaneTabControl">
														<Name>ChannelsActionPaneTab</Name>
														<ElementPosition>1431655764</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>ActionPaneTab</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<Controls>
															<AxFormControl xmlns=""
																i:type="AxFormButtonGroupControl">
																<Name>ChannelsActionButtonGroup</Name>
																<AutoDeclaration>Yes</AutoDeclaration>
																<ElementPosition>1431655764</ElementPosition>
																<FilterExpression>%1</FilterExpression>
																<HeightMode>Auto</HeightMode>
																<Left>0</Left>
																<Type>ButtonGroup</Type>
																<VerticalSpacing>-1</VerticalSpacing>
																<WidthMode>Auto</WidthMode>
																<FormControlExtension
																	i:nil="true" />
																<Controls>
																	<AxFormControl xmlns=""
																		i:type="AxFormMenuFunctionButtonControl">
																		<Name>ChannelAddLine</Name>
																		<ElementPosition>1073741822</ElementPosition>
																		<FilterExpression>%1</FilterExpression>
																		<HeightMode>Auto</HeightMode>
																		<Type>MenuFunctionButton</Type>
																		<VerticalSpacing>-1</VerticalSpacing>
																		<WidthMode>Auto</WidthMode>
																		<FormControlExtension
																			i:nil="true" />
																		<ButtonDisplay>TextWithImageLeft</ButtonDisplay>
																		<DataSource>RetailLoyaltyScheme</DataSource>
																		<MenuItemName>RetailLoyaltyOperatingUnitPicker</MenuItemName>
																		<NormalImage>Add</NormalImage>
																		<Text>@SYS319116</Text>
																	</AxFormControl>
																	<AxFormControl xmlns=""
																		i:type="AxFormCommandButtonControl">
																		<Name>ChannelsRemoveLine</Name>
																		<ElementPosition>1610612733</ElementPosition>
																		<FilterExpression>%1</FilterExpression>
																		<HeightMode>Auto</HeightMode>
																		<Type>CommandButton</Type>
																		<VerticalSpacing>-1</VerticalSpacing>
																		<WidthMode>Auto</WidthMode>
																		<FormControlExtension
																			i:nil="true" />
																		<ButtonDisplay>TextWithImageLeft</ButtonDisplay>
																		<Command>DeleteRecord</Command>
																		<MultiSelect>Yes</MultiSelect>
																		<NormalImage>Delete</NormalImage>
																		<SaveRecord>No</SaveRecord>
																		<Text>@SYS135131</Text>
																	</AxFormControl>
																</Controls>
																<ArrangeMethod>Vertical</ArrangeMethod>
															</AxFormControl>
														</Controls>
														<AlignChild>No</AlignChild>
														<AlignChildren>No</AlignChildren>
														<ArrangeMethod>Vertical</ArrangeMethod>
														<DataSource>RetailLoyaltySchemeChannel</DataSource>
													</AxFormControl>
												</Controls>
												<AlignChild>No</AlignChild>
												<AlignChildren>No</AlignChildren>
												<ArrangeMethod>Vertical</ArrangeMethod>
												<DataSource>RetailLoyaltySchemeChannel</DataSource>
												<Style>Strip</Style>
											</AxFormControl>
											<AxFormControl xmlns=""
												i:type="AxFormGridControl">
												<Name>ChannelsGrid</Name>
												<ElementPosition>1610612734</ElementPosition>
												<FilterExpression>%1</FilterExpression>
												<Type>Grid</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<FormControlExtension
													i:nil="true" />
												<Controls>
													<AxFormControl xmlns=""
														i:type="AxFormStringControl">
														<Name>OMInternalOrganization_Name</Name>
														<ElementPosition>1073741822</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>String</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<DataField>Name</DataField>
														<DataSource>OMInternalOrganization</DataSource>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormStringControl">
														<Name>OMOperatingUnit_OMOperatingUnitNumber</Name>
														<ElementPosition>1610612734</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>String</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<DataField>OMOperatingUnitNumber</DataField>
														<DataSource>OMOperatingUnit</DataSource>
													</AxFormControl>
												</Controls>
												<DataSource>RetailLoyaltySchemeChannel</DataSource>
												<Style>Tabular</Style>
											</AxFormControl>
										</Controls>
										<Caption>@RET6065</Caption>
										<DataSource>RetailLoyaltySchemeChannel</DataSource>
										<Scrollbars>Auto</Scrollbars>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormTabPageControl">
										<Name>ExcludeAffiliationTabPage</Name>
										<ElementPosition>1932735281</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Pattern>ToolbarList</Pattern>
										<PatternVersion>1.2</PatternVersion>
										<Type>TabPage</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<Controls>
											<AxFormControl xmlns=""
												i:type="AxFormActionPaneControl">
												<Name>ExcludedAffiliationActionTab</Name>
												<ElementPosition>1073741822</ElementPosition>
												<FilterExpression>%1</FilterExpression>
												<Type>ActionPane</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<FormControlExtension
													i:nil="true" />
												<Controls>
													<AxFormControl xmlns=""
														i:type="AxFormActionPaneTabControl">
														<Name>ExcludedAffiliationActionPaneTab</Name>
														<ElementPosition>1431655764</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>ActionPaneTab</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<Controls>
															<AxFormControl xmlns=""
																i:type="AxFormButtonGroupControl">
																<Name>ExcludedAffiliationActionButtonGroup</Name>
																<AutoDeclaration>Yes</AutoDeclaration>
																<ElementPosition>1431655764</ElementPosition>
																<FilterExpression>%1</FilterExpression>
																<HeightMode>Auto</HeightMode>
																<Left>0</Left>
																<Type>ButtonGroup</Type>
																<VerticalSpacing>-1</VerticalSpacing>
																<WidthMode>Auto</WidthMode>
																<FormControlExtension
																	i:nil="true" />
																<Controls>
																	<AxFormControl xmlns=""
																		i:type="AxFormCommandButtonControl">
																		<Name>ExcludedAffiliationAddLine</Name>
																		<ElementPosition>1073741822</ElementPosition>
																		<FilterExpression>%1</FilterExpression>
																		<HeightMode>Auto</HeightMode>
																		<Type>CommandButton</Type>
																		<VerticalSpacing>-1</VerticalSpacing>
																		<WidthMode>Auto</WidthMode>
																		<FormControlExtension
																			i:nil="true" />
																		<ButtonDisplay>TextWithImageLeft</ButtonDisplay>
																		<Command>New</Command>
																		<MultiSelect>Yes</MultiSelect>
																		<NormalImage>Add</NormalImage>
																		<Text>@SYS319116</Text>
																	</AxFormControl>
																	<AxFormControl xmlns=""
																		i:type="AxFormCommandButtonControl">
																		<Name>ExcludedAffiliationRemoveLine</Name>
																		<ElementPosition>1610612733</ElementPosition>
																		<FilterExpression>%1</FilterExpression>
																		<HeightMode>Auto</HeightMode>
																		<Type>CommandButton</Type>
																		<VerticalSpacing>-1</VerticalSpacing>
																		<WidthMode>Auto</WidthMode>
																		<FormControlExtension
																			i:nil="true" />
																		<ButtonDisplay>TextWithImageLeft</ButtonDisplay>
																		<Command>DeleteRecord</Command>
																		<MultiSelect>Yes</MultiSelect>
																		<NormalImage>Delete</NormalImage>
																		<SaveRecord>No</SaveRecord>
																		<Text>@SYS135131</Text>
																	</AxFormControl>
																</Controls>
																<ArrangeMethod>Vertical</ArrangeMethod>
															</AxFormControl>
														</Controls>
														<AlignChild>No</AlignChild>
														<AlignChildren>No</AlignChildren>
														<ArrangeMethod>Vertical</ArrangeMethod>
														<DataSource>RetailLoyaltySchemeExcludedAffiliations</DataSource>
													</AxFormControl>
												</Controls>
												<AlignChild>No</AlignChild>
												<AlignChildren>No</AlignChildren>
												<ArrangeMethod>Vertical</ArrangeMethod>
												<DataSource>RetailLoyaltySchemeExcludedAffiliations</DataSource>
												<Style>Strip</Style>
											</AxFormControl>
											<AxFormControl xmlns=""
												i:type="AxFormGridControl">
												<Name>ExcludedAffiliationGrid</Name>
												<ElementPosition>1610612734</ElementPosition>
												<FilterExpression>%1</FilterExpression>
												<Type>Grid</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<FormControlExtension
													i:nil="true" />
												<Controls>
													<AxFormControl xmlns=""
														i:type="AxFormReferenceGroupControl">
														<Name>ExcludedAffiliations_RetailAffiliationId</Name>
														<Type>ReferenceGroup</Type>
														<FormControlExtension
															i:nil="true" />
														<Controls />
														<DataSource>RetailLoyaltySchemeExcludedAffiliations</DataSource>
														<Label>@Retail:RetailLoyalityAffiliationId</Label>
														<ReferenceField>RetailAffiliationId</ReferenceField>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormStringControl">
														<Name>RetailAffiliation_Description</Name>
														<AllowEdit>No</AllowEdit>
														<ElementPosition>1610612733</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>String</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<DataMethod>RetailAffiliationDescription</DataMethod>
														<DataSource>RetailLoyaltySchemeExcludedAffiliations</DataSource>
													</AxFormControl>
												</Controls>
												<DataSource>RetailLoyaltySchemeExcludedAffiliations</DataSource>
												<Style>Tabular</Style>
											</AxFormControl>
										</Controls>
										<Caption>@Retail:RetailLoyaltyExcludedaffiliationsId</Caption>
										<DataSource>RetailLoyaltySchemeExcludedAffiliations</DataSource>
										<Scrollbars>Auto</Scrollbars>
									</AxFormControl>
								</Controls>
								<AlignChild>No</AlignChild>
								<ArrangeMethod>Vertical</ArrangeMethod>
								<Style>FastTabs</Style>
							</AxFormControl>
						</Controls>
						<PanelStyle>Details</PanelStyle>
						<Scrollbars>Auto</Scrollbars>
						<Style>DetailsFormDetails</Style>
					</AxFormControl>
					<AxFormControl xmlns=""
						i:type="AxFormTabPageControl">
						<Name>GridPanel</Name>
						<Type>TabPage</Type>
						<FormControlExtension
							i:nil="true" />
						<Controls>
							<AxFormControl xmlns=""
								i:type="AxFormGroupControl">
								<Name>CustomFilterGroup</Name>
								<Pattern>CustomAndQuickFilters</Pattern>
								<PatternVersion>1.1</PatternVersion>
								<Type>Group</Type>
								<WidthMode>SizeToAvailable</WidthMode>
								<FormControlExtension
									i:nil="true" />
								<Controls>
									<AxFormControl>
										<Name>QuickFilterControl30</Name>
										<FormControlExtension>
											<Name>QuickFilterControl</Name>
											<ExtensionComponents />
											<ExtensionProperties>
												<AxFormControlExtensionProperty>
													<Name>targetControlName</Name>
													<Type>String</Type>
													<Value>MainGrid</Value>
												</AxFormControlExtensionProperty>
												<AxFormControlExtensionProperty>
													<Name>defaultColumnName</Name>
													<Type>String</Type>
												</AxFormControlExtensionProperty>
												<AxFormControlExtensionProperty>
													<Name>placeholderText</Name>
													<Type>String</Type>
												</AxFormControlExtensionProperty>
											</ExtensionProperties>
										</FormControlExtension>
									</AxFormControl>
								</Controls>
								<ArrangeMethod>HorizontalLeft</ArrangeMethod>
								<FrameType>None</FrameType>
								<Style>CustomFilter</Style>
								<ViewEditMode>Edit</ViewEditMode>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormGridControl">
								<Name>MainGrid</Name>
								<Type>Grid</Type>
								<FormControlExtension
									i:nil="true" />
								<Controls>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>RetailLoyaltyScheme_LoyaltySchemeId1</Name>
										<Type>String</Type>
										<FormControlExtension
											i:nil="true" />
										<DataField>LoyaltySchemeId</DataField>
										<DataSource>RetailLoyaltyScheme</DataSource>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>RetailLoyaltyScheme_Description1</Name>
										<Type>String</Type>
										<FormControlExtension
											i:nil="true" />
										<DataField>Description</DataField>
										<DataSource>RetailLoyaltyScheme</DataSource>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormReferenceGroupControl">
										<Name>RetailLoyaltyScheme_Affiliation</Name>
										<AllowEdit>No</AllowEdit>
										<HelpText>@FieldDescriptions_RetailMain:RetailLoyaltySchemes_RetailLoyaltyScheme_Affiliation</HelpText>
										<Type>ReferenceGroup</Type>
										<FormControlExtension
											i:nil="true" />
										<Controls />
										<DataSource>RetailLoyaltyScheme</DataSource>
										<Label>@REX4520077</Label>
										<ReferenceField>Affiliation</ReferenceField>
									</AxFormControl>
								</Controls>
								<DataSource>RetailLoyaltyScheme</DataSource>
								<DefaultAction>MainGridDefaultAction</DefaultAction>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormCommandButtonControl">
								<Name>MainGridDefaultAction</Name>
								<Type>CommandButton</Type>
								<Visible>No</Visible>
								<FormControlExtension
									i:nil="true" />
								<Command>DetailsView</Command>
							</AxFormControl>
						</Controls>
						<PanelStyle>Grid</PanelStyle>
						<Style>DetailsFormGrid</Style>
					</AxFormControl>
				</Controls>
				<AlignChild>No</AlignChild>
				<ArrangeMethod>Vertical</ArrangeMethod>
				<ShowTabs>No</ShowTabs>
			</AxFormControl>
		</Controls>
	</Design>
	<Parts />
</AxForm>