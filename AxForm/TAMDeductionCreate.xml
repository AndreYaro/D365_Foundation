<?xml version="1.0" encoding="utf-8"?>
<AxForm xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="Microsoft.Dynamics.AX.Metadata.V6">
	<Name>TAMDeductionCreate</Name>
	<SourceCode>
		<Methods xmlns="">
			<Method>
				<Name>classDeclaration</Name>
				<Source><![CDATA[
    [Form]
    public class TAMDeductionCreate extends FormRun
    {
        // Journal buffer (found only once when form opens)
        LedgerJournalTable      ledgerJournalTable;

        // Journal line buffer (refreshed every time parent changes)
        LedgerJournalTrans      ledgerJournalTransParent;

        // Standard object for number sequences
        NumberSeqFormHandler    numberSeqFormHandler;

        // Range so deductions match parent record
        QueryBuildRange         queryBuildRangeParent;
        QueryBuildRange         queryBuildRangeDeductionId;

        // LedgerJournalEngine object from parent form
        LedgerJournalEngine     ledgerJournalEngine;

        // Balance variables (for display only)
        AmountMST               settleAmountMST;
        AmountMST               paymentAmountMST;
        AmountMST               deductionAmountMST;
        AmountMST               balanceAmountMST;

        HcmWorkerLookup hcmWorkerLookupCurrentCompany;
}
]]></Source>
			</Method>
			<Method>
				<Name>calcBalance</Name>
				<Source><![CDATA[
    /// <summary>
    /// Calculates balance of payment, deductions, and transactions selected for settlement.
    /// </summary>
    public void calcBalance()
    {
        // Negate deduction amount
        deductionAmountMST = - TAMDeduction::sumDeductionAmountMST(ledgerJournalTransParent.RecId);

        balanceAmountMST = settleAmountMST
                            + paymentAmountMST
                            + deductionAmountMST;
    }

]]></Source>
			</Method>
			<Method>
				<Name>calcPayment</Name>
				<Source><![CDATA[
    /// <summary>
    /// Calculates the payment amount.
    /// </summary>
    public void calcPayment()
    {
        paymentAmountMST = ledgerJournalTransParent.AmountCurDebit - ledgerJournalTransParent.AmountCurCredit;
    }

]]></Source>
			</Method>
			<Method>
				<Name>calcSettle</Name>
				<Source><![CDATA[
    /// <summary>
    /// Calculates the settlement amount.
    /// </summary>
    public void calcSettle()
    {
        if (ledgerJournalTable.Posted)
        {
            settleAmountMST = 0;
        }
        else
        {
            // Returned in MST currency
            settleAmountMST = SpecTransManager::getTotalSettleAmountForSpecReference(
                curext(),
                ledgerJournalTransParent.TableId,
                ledgerJournalTransParent.RecId,
                ledgerJournalTransParent.CurrencyCode,
                ledgerJournalTransParent.Company,
                ledgerJournalTransParent.TransDate);
        }
    }

]]></Source>
			</Method>
			<Method>
				<Name>close</Name>
				<Source><![CDATA[
    public void close()
    {
        if (numberSeqFormHandler)
        {
            numberSeqFormHandler.formMethodClose();
        }
        element.refreshParentForm();

        super();
    }

]]></Source>
			</Method>
			<Method>
				<Name>init</Name>
				<Source><![CDATA[
    public void init()
    {
        LedgerJournalTrans  ledgerJournalTrans;
        FormRun             formRun;
        Object              formRunObject;
        FormObjectSet       formObjectSet;

        // Validate passed in record is of right type
        if (!element.args()
            || element.args().dataset() != tableNum(LedgerJournalTrans))
        {
            throw error(strFmt("@SYS19096",
                               element.name(),
                               tableStr(LedgerJournalTrans)));
        }

        super();

        hcmWorkerLookupCurrentCompany = HcmWorkerLookup::newOnlyActiveEmployeesWithinCompany();

        if (FormDataUtil::isFormDataSource(element.args().record()))
        {
            formObjectSet = FormDataUtil::getFormDataSource(element.args().record());
            formRun = formObjectSet.formRun();
            formRunObject = formRun;
        }

        // Initialize LedgerJournalTable buffer from parent form
        if (formRun
            && formRunObject
            && formHasMethod(formRun, identifierStr(ledgerJournalTable)))
        {
            ledgerJournalTable = formRunObject.ledgerJournalTable();
        }
        else
        {
            ledgerJournalTrans = element.args().record();
            ledgerJournalTable = LedgerJournalTable::find(ledgerJournalTrans.JournalNum);
        }

        // Initialize LedgerJournalEngine from parent form
        if (formRun
            && formRunObject
            && formHasMethod(formRun, identifierStr(ledgerJournalEngine)))
        {
            ledgerJournalEngine = formRunObject.ledgerJournalEngine();
        }

        ledgerJournalTrans = element.args().record();
        currencyCode.text(ledgerJournalTrans.CurrencyCode);
    }

]]></Source>
			</Method>
			<Method>
				<Name>numberSeqFormHandler</Name>
				<Source><![CDATA[
    NumberSeqFormHandler numberSeqFormHandler()
    {
        if (!numberSeqFormHandler)
        {
            numberSeqFormHandler = NumberSeqFormHandler::newForm(
                TAMPromotionParameters::numRefDeductionId().NumberSequenceId,
                element,
                tamDeduction_ds,
                fieldNum(TAMDeduction, tamDeductionID));
        }
        return numberSeqFormHandler;
    }

]]></Source>
			</Method>
			<Method>
				<Name>refreshParentForm</Name>
				<Source><![CDATA[
    void refreshParentForm()
    {
        LedgerJournalTrans  ledgerJournalTransSave;
        FormObjectSet       formObjectSet;

        // Refresh parent form
        if (element.args().dataset() == tableNum(LedgerJournalTrans)
            && FormDataUtil::isFormDataSource(element.args().record()))
        {
            ledgerJournalTransSave.data(element.args().record());
            formObjectSet = FormDataUtil::getFormDataSource(element.args().record());
            formObjectSet.research();
            formObjectSet.findRecord(ledgerJournalTransSave);
        }
    }

]]></Source>
			</Method>
			<Method>
				<Name>setControls</Name>
				<Source><![CDATA[
    /// <summary>
    /// Sets values for header controls using global variables and parent record buffer.
    /// </summary>
    void setControls()
    {
        element.calcBalance();

        settle.realValue(settleAmountMST);
        payment.realValue(paymentAmountMST);
        deduction.realValue(deductionAmountMST);
        balance.realValue(balanceAmountMST);

        accountNum.text     (ledgerJournalTransParent.accountDisplay());
        accountName.text    (ledgerJournalTransParent.accountName());
        voucher.text        (ledgerJournalTransParent.Voucher);

        tamDeduction_ds.allowEdit    (! ledgerJournalTable.Posted);
        tamDeduction_ds.allowDelete  (! ledgerJournalTable.Posted);

        if (ledgerJournalTable.Posted
            || settleAmountMST < 0)
        {
            tamDeduction_ds.allowCreate(false);
        }
        else
        {
            tamDeduction_ds.allowCreate(true);
        }
    }

]]></Source>
			</Method>
		</Methods>
		<DataSources xmlns="">
			<DataSource>
				<Name>TAMDeduction</Name>
				<Methods>
					<Method>
						<Name>create</Name>
						<Source><![CDATA[
        public void create(boolean _append = false)
        {
            element.numberSeqFormHandler().formMethodDataSourceCreatePre();

            super(_append);

            element.numberSeqFormHandler().formMethodDataSourceCreate();
        }

]]></Source>
					</Method>
					<Method>
						<Name>delete</Name>
						<Source><![CDATA[
        public void delete()
        {
            LedgerJournalTrans ledgerJournalTrans;
            LedgerJournalTrans ledgerJournalTrans_Orig;

            if (tamDeduction.RecId)
            {
                ledgerJournalTrans = tamDeduction.ledgerJournalTrans();
            }
            if (ledgerJournalEngine)
            {
                ledgerJournalTrans_Orig = ledgerJournalTrans.data();

                ledgerJournalEngine.preDelete(ledgerJournalTrans);
            }

            ttsbegin;

            // Standard number seqeuence method
            element.numberSeqFormHandler().formMethodDataSourceDelete();

            super();

            if (ledgerJournalTrans.RecId)
            {
                ledgerJournalTrans.selectForUpdate(true);
                ledgerJournalTrans.delete();
            }

            ttscommit;

            if (ledgerJournalEngine)
            {
                ledgerJournalEngine.delete(ledgerJournalTrans_Orig);
            }

            element.setControls();
        }

]]></Source>
					</Method>
					<Method>
						<Name>init</Name>
						<Source><![CDATA[
        public void init()
        {
            QueryBuildDataSource queryBuildDataSource;

            super();
            queryBuildDataSource = this.query().dataSourceTable(tableNum(TAMDeduction));
            queryBuildDataSource.clearDynalinks();

            // Initialize parent RecId range
            queryBuildRangeParent = queryBuildDataSource.addRange(
                                        fieldNum(TAMDeduction, LedgerJournalTransParentRecId));

            // Initialize deduction ID range
            queryBuildRangeDeductionId = queryBuildDataSource.addRange(
                                            fieldNum(TAMDeduction, tamDeductionID));
        }

]]></Source>
					</Method>
					<Method>
						<Name>initValue</Name>
						<Source><![CDATA[
        public void initValue()
        {
            super();
            tamDeduction.initFromLedgerJournalTransParent(ledgerJournalTransParent);
        }

]]></Source>
					</Method>
					<Method>
						<Name>linkActive</Name>
						<Source><![CDATA[
        public void linkActive()
        {
            TAMDeduction        tamDeductionLocal;
            LedgerJournalTrans  ledgerJournalTrans;
            LedgerJournalTrans  ledgerJournalTransLocalParent;

            // Standard number sequence method
            element.numberSeqFormHandler().formMethodDataSourceLinkActive();

            switch (element.args().dataset())
            {
                case tableNum(LedgerJournalTrans):
                    ledgerJournalTrans = element.args().record();
                    if (ledgerJournalTrans.mcrIsDeduction())
                    {
                        // Record on parent form is deduction, just show that deduction
                        select ledgerJournalTransLocalParent
                            join tamDeductionID from tamDeductionLocal
                            where ledgerJournalTransLocalParent.RecId == tamDeductionLocal.LedgerJournalTransParentRecId
                                && tamDeductionLocal.LedgerJournalTransRecId == ledgerJournalTrans.RecId;

                        ledgerJournalTransParent.data(ledgerJournalTransLocalParent);
                        queryBuildRangeDeductionId.value(SysQuery::value(tamDeductionLocal.tamDeductionID));
                        queryBuildRangeParent.value(SysQuery::valueUnlimited());
                    }
                    else
                    {
                        // Record on parent form is not a deduction, show all deductions for that payment journal line
                        ledgerJournalTransLocalParent = element.args().record();
                        ledgerJournalTransParent.data(ledgerJournalTransLocalParent);
                        queryBuildRangeDeductionId.value(SysQuery::valueUnlimited());
                        queryBuildRangeParent.value(SysQuery::value(ledgerJournalTransParent.RecId));
                    }
                    break;
                default:
            }

            super();

            // Calculate settle amount and payment amount (only changes when parent record changes)
            element.calcPayment();
            element.calcSettle();

            // Update controls
            element.setControls();
        }

]]></Source>
					</Method>
					<Method>
						<Name>validateWrite</Name>
						<Source><![CDATA[
        public boolean validateWrite()
        {
            boolean ret;

            ret = super();

            // Standard number seqeuence method
            ret = element.numberSeqFormHandler().formMethodDataSourceValidateWrite(ret)
                    && ret;

            return ret;
        }

]]></Source>
					</Method>
					<Method>
						<Name>write</Name>
						<Source><![CDATA[
        public void write()
        {
            LedgerJournalTrans  ledgerJournalTrans;

            if (tamDeduction.RecId)
            {
                ledgerJournalTrans = tamDeduction.ledgerJournalTrans();
            }
            if (ledgerJournalEngine)
            {
                ledgerJournalEngine.preWrite(ledgerJournalTrans);
            }

            ttsbegin;

            super();

            // Standard number seqeuence method
            element.numberSeqFormHandler().formMethodDataSourceWrite();

            ttscommit;

            if (ledgerJournalEngine)
            {
                // earlier if on an insert)
                ledgerJournalTrans = tamDeduction.ledgerJournalTrans();

                ledgerJournalEngine.write(ledgerJournalTrans);
            }

            // Update balances
            element.setControls();
        }

]]></Source>
					</Method>
				</Methods>
				<Fields>
					<Field>
						<DataField>CustInvoiceId</DataField>
						<Methods>
							<Method>
								<Name>lookup</Name>
								<Source><![CDATA[
            public void lookup(FormControl _formControl, str _filterStr)
            {
                CustInvoiceJour::mcrlookupByInvoiceAccountSalesID(_formControl, tamDeduction.AccountNum, tamDeduction.SalesId);
            }

]]></Source>
							</Method>
						</Methods>
					</Field>
					<Field>
						<DataField>MCRMerchandisingEventID</DataField>
						<Methods>
							<Method>
								<Name>jumpRef</Name>
								<Source><![CDATA[
            public void jumpRef()
            {
                TAMMerchandisingEvent::jumpRefTAMDeduction(tamDeduction, this);
            }

]]></Source>
							</Method>
							<Method>
								<Name>lookup</Name>
								<Source><![CDATA[
            public void lookup(FormControl _formControl, str _filterStr)
            {
                TAMMerchandisingEvent::lookupInvoiceAccount(_formControl,
                                                            tamDeduction.AccountNum,
                                                            tamDeduction.tamPromotionID,
                                                            true,
                                                            true);
            }

]]></Source>
							</Method>
						</Methods>
					</Field>
					<Field>
						<DataField>SalesId</DataField>
						<Methods>
							<Method>
								<Name>lookup</Name>
								<Source><![CDATA[
            public void lookup(FormControl _formControl, str _filterStr)
            {
                SalesTable::mcrlookupByInvoiceAccountInvoiceId(_formControl, tamDeduction.AccountNum, tamDeduction.CustInvoiceId);
            }

]]></Source>
							</Method>
						</Methods>
					</Field>
					<Field>
						<DataField>TAMDeductionType</DataField>
						<Methods>
							<Method>
								<Name>jumpRef</Name>
								<Source><![CDATA[
            public void jumpRef()
            {
                new MenuFunction(menuitemDisplayStr(TAMDeductionType), MenuItemType::Display).run();
            }

]]></Source>
							</Method>
						</Methods>
					</Field>
					<Field>
						<DataField>TAMPromotionID</DataField>
						<Methods>
							<Method>
								<Name>lookup</Name>
								<Source><![CDATA[
            public void lookup(FormControl _formControl, str _filterStr)
            {
                TAMTradePromotion::lookupInvoiceAccount(_formControl,
                                                        tamDeduction.AccountNum,
                                                        true);
            }

]]></Source>
							</Method>
						</Methods>
					</Field>
				</Fields>
			</DataSource>
		</DataSources>
		<DataControls xmlns="">
			<Control>
				<Name>ReferenceGroup</Name>
				<Type>ReferenceGroup</Type>
				<Methods>
					<Method>
						<Name>lookupReference</Name>
						<Source><![CDATA[
        public Common lookupReference()
        {
            Common ret;

            ret = hcmWorkerLookupCurrentCompany.lookupWorker(this);

            return ret;
        }

]]></Source>
					</Method>
					<Method>
						<Name>resolveReference</Name>
						<Source><![CDATA[
        public Common resolveReference()
        {
            HcmWorker ret;

            ret = super();
            if (ret != null
                && !hcmWorkerLookupCurrentCompany.validateWorker(ret.RecId))
            {
                ret = null;
            }
            return ret;
        }

]]></Source>
					</Method>
				</Methods>
			</Control>
		</DataControls>
		<Members xmlns="" />
	</SourceCode>
	<DataSources>
		<AxFormDataSource xmlns="">
			<Name>TAMDeduction</Name>
			<Table>TAMDeduction</Table>
			<Fields>
				<AxFormDataSourceField>
					<AllowEdit>No</AllowEdit>
					<DataField>AccountNum</DataField>
					<Skip>Yes</Skip>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>AmountCur</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>createdDateTime</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<AllowEdit>No</AllowEdit>
					<DataField>CurrencyCode</DataField>
					<Skip>Yes</Skip>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>CustInvoiceId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>dataAreaId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>DeductOffLedgerDimension</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>DeductWriteOffLedgerDimension</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>DenyAmountCur</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>DenyJournalID</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>HcmWorkerId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>JournalID</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>LedgerJournalTransParentRecId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>LedgerJournalTransRecId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>MatchAmountCur</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>MCRMerchandisingEventID</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Notes</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RecId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<AllowEdit>No</AllowEdit>
					<DataField>RemainAmountCur</DataField>
					<Skip>Yes</Skip>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RemainAmountMST</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>SalesId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>SplitAmountCur</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TableId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TAMDeductionDenyReason</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TAMDeductionID</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TAMDeductionOrigId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TAMDeductionStatus</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TAMDeductionType</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TAMDeductionWriteOffReason</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TAMPromotionID</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>WriteOffAmountCur</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>WriteOffJournalID</DataField>
				</AxFormDataSourceField>
			</Fields>
			<ReferencedDataSources />
			<InsertIfEmpty>No</InsertIfEmpty>
			<DataSourceLinks />
			<DerivedDataSources />
		</AxFormDataSource>
	</DataSources>
	<Design>
		<Caption xmlns="">@SYS32341</Caption>
		<Pattern xmlns="">Task</Pattern>
		<PatternVersion xmlns="">1.2</PatternVersion>
		<TitleDataSource xmlns="">TAMDeduction</TitleDataSource>
		<Controls xmlns="">
			<AxFormControl xmlns=""
				i:type="AxFormActionPaneControl">
				<Name>ActionPane</Name>
				<ElementPosition>715827882</ElementPosition>
				<FilterExpression>%1</FilterExpression>
				<HeightMode>Auto</HeightMode>
				<Type>ActionPane</Type>
				<VerticalSpacing>-1</VerticalSpacing>
				<Width>0</Width>
				<FormControlExtension
					i:nil="true" />
				<Controls>
					<AxFormControl xmlns=""
						i:type="AxFormButtonGroupControl">
						<Name>ButtonGroup</Name>
						<ElementPosition>1610612733</ElementPosition>
						<FilterExpression>%1</FilterExpression>
						<HeightMode>Auto</HeightMode>
						<Left>0</Left>
						<Type>ButtonGroup</Type>
						<VerticalSpacing>-1</VerticalSpacing>
						<WidthMode>Auto</WidthMode>
						<FormControlExtension
							i:nil="true" />
						<Controls>
							<AxFormControl xmlns=""
								i:type="AxFormMenuButtonControl">
								<Name>MenuButtonInquiries</Name>
								<ElementPosition>1431655764</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<HeightMode>Auto</HeightMode>
								<HelpText>@MCR28086</HelpText>
								<Type>MenuButton</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<WidthMode>Auto</WidthMode>
								<FormControlExtension
									i:nil="true" />
								<Controls>
									<AxFormControl xmlns=""
										i:type="AxFormMenuFunctionButtonControl">
										<Name>MenuItemButtonTAMTradePromotions</Name>
										<ElementPosition>613566756</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<Type>MenuFunctionButton</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<FormControlExtension
											i:nil="true" />
										<ButtonDisplay>TextOnly</ButtonDisplay>
										<DataSource>TAMDeduction</DataSource>
										<MenuItemName>TAMPromotionsManagmentMenu</MenuItemName>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormMenuFunctionButtonControl">
										<Name>MenuItemButtonSalesTable</Name>
										<ElementPosition>1227133512</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<Type>MenuFunctionButton</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<FormControlExtension
											i:nil="true" />
										<ButtonDisplay>TextOnly</ButtonDisplay>
										<DataSource>TAMDeduction</DataSource>
										<MenuItemName>SalesTableGrid</MenuItemName>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormMenuFunctionButtonControl">
										<Name>MenuItemButtonCustInvoiceJour</Name>
										<ElementPosition>1840700268</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<Type>MenuFunctionButton</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<FormControlExtension
											i:nil="true" />
										<ButtonDisplay>TextOnly</ButtonDisplay>
										<DataSource>TAMDeduction</DataSource>
										<MenuItemName>CustInvoiceJournal</MenuItemName>
									</AxFormControl>
								</Controls>
								<ButtonDisplay>TextOnly</ButtonDisplay>
								<NeedsRecord>Yes</NeedsRecord>
								<Text>@SYS3850</Text>
							</AxFormControl>
						</Controls>
						<ArrangeMethod>Vertical</ArrangeMethod>
					</AxFormControl>
				</Controls>
				<AlignChild>No</AlignChild>
				<AlignChildren>No</AlignChildren>
				<ArrangeMethod>Vertical</ArrangeMethod>
			</AxFormControl>
			<AxFormControl xmlns=""
				i:type="AxFormTabControl">
				<Name>Tab</Name>
				<AlignControl>No</AlignControl>
				<ElementPosition>1431655764</ElementPosition>
				<FilterExpression>%1</FilterExpression>
				<Type>Tab</Type>
				<VerticalSpacing>-1</VerticalSpacing>
				<FormControlExtension
					i:nil="true" />
				<Controls>
					<AxFormControl xmlns=""
						i:type="AxFormTabPageControl">
						<Name>TabPageOverview</Name>
						<ElementPosition>1073741822</ElementPosition>
						<FilterExpression>%1</FilterExpression>
						<Height>0</Height>
						<HeightMode>SizeToAvailable</HeightMode>
						<Pattern>ToolbarList</Pattern>
						<PatternVersion>1.2</PatternVersion>
						<Type>TabPage</Type>
						<VerticalSpacing>-1</VerticalSpacing>
						<Width>0</Width>
						<WidthMode>SizeToAvailable</WidthMode>
						<FormControlExtension
							i:nil="true" />
						<Controls>
							<AxFormControl xmlns=""
								i:type="AxFormGridControl">
								<Name>GridDeduction</Name>
								<ElementPosition>1610612733</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<Type>Grid</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<FormControlExtension
									i:nil="true" />
								<Controls>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>TAMDeduction_TAMDeductionID</Name>
										<ElementPosition>429496728</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<Type>String</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<FormControlExtension
											i:nil="true" />
										<DataField>TAMDeductionID</DataField>
										<DataSource>TAMDeduction</DataSource>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>TAMDeduction_TAMDeductionType</Name>
										<ElementPosition>644245092</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<Type>String</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<FormControlExtension
											i:nil="true" />
										<DataField>TAMDeductionType</DataField>
										<DataSource>TAMDeduction</DataSource>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormComboBoxControl">
										<Name>TAMDeduction_TAMDeductionStatus</Name>
										<ElementPosition>858993456</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<Type>ComboBox</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<FormControlExtension
											i:nil="true" />
										<DataField>TAMDeductionStatus</DataField>
										<DataSource>TAMDeduction</DataSource>
										<Items />
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>TAMDeduction_AccountNum</Name>
										<ElementPosition>1073741820</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<Type>String</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<FormControlExtension
											i:nil="true" />
										<DataField>AccountNum</DataField>
										<DataSource>TAMDeduction</DataSource>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormRealControl">
										<Name>TAMDeduction_AmountCur</Name>
										<ElementPosition>1288490184</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<Type>Real</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<FormControlExtension
											i:nil="true" />
										<DataField>AmountCur</DataField>
										<DataSource>TAMDeduction</DataSource>
										<NoOfDecimals>-1</NoOfDecimals>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>TAMDeduction_CurrencyCode</Name>
										<ElementPosition>1503238548</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<Type>String</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<FormControlExtension
											i:nil="true" />
										<DataField>CurrencyCode</DataField>
										<DataSource>TAMDeduction</DataSource>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormReferenceGroupControl">
										<Name>ReferenceGroup</Name>
										<ElementPosition>1717986912</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<Type>ReferenceGroup</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<FormControlExtension
											i:nil="true" />
										<Controls>
											<AxFormControl xmlns=""
												i:type="AxFormStringControl">
												<Name>ReferenceGroup_DirPerson_FK_Name</Name>
												<DataRelationPath>HcmWorkerId.DirPerson_FK</DataRelationPath>
												<FilterExpression>%1</FilterExpression>
												<HeightMode>Auto</HeightMode>
												<Type>String</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<WidthMode>Auto</WidthMode>
												<FormControlExtension
													i:nil="true" />
											</AxFormControl>
											<AxFormControl xmlns=""
												i:type="AxFormStringControl">
												<Name>ReferenceGroup_PersonnelNumber</Name>
												<DataRelationPath>HcmWorkerId</DataRelationPath>
												<FilterExpression>%1</FilterExpression>
												<HeightMode>Auto</HeightMode>
												<Type>String</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<WidthMode>Auto</WidthMode>
												<FormControlExtension
													i:nil="true" />
											</AxFormControl>
										</Controls>
										<DataSource>TAMDeduction</DataSource>
										<ReferenceField>HcmWorkerId</ReferenceField>
										<ReplacementFieldGroup>PersonAndPersonnelNumber</ReplacementFieldGroup>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormGroupControl">
										<Name>Identification1</Name>
										<ElementPosition>1932735276</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<Type>Group</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<FormControlExtension
											i:nil="true" />
										<Controls>
											<AxFormControl xmlns=""
												i:type="AxFormStringControl">
												<Name>Identification1_TAMPromotionID</Name>
												<FilterExpression>%1</FilterExpression>
												<Type>String</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<FormControlExtension
													i:nil="true" />
												<DataField>TAMPromotionID</DataField>
												<DataSource>TAMDeduction</DataSource>
											</AxFormControl>
											<AxFormControl xmlns=""
												i:type="AxFormStringControl">
												<Name>Identification1_MCRMerchandisingEventID</Name>
												<FilterExpression>%1</FilterExpression>
												<Type>String</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<FormControlExtension
													i:nil="true" />
												<DataField>MCRMerchandisingEventID</DataField>
												<DataSource>TAMDeduction</DataSource>
											</AxFormControl>
											<AxFormControl xmlns=""
												i:type="AxFormStringControl">
												<Name>Identification1_SalesId</Name>
												<FilterExpression>%1</FilterExpression>
												<Type>String</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<FormControlExtension
													i:nil="true" />
												<DataField>SalesId</DataField>
												<DataSource>TAMDeduction</DataSource>
											</AxFormControl>
											<AxFormControl xmlns=""
												i:type="AxFormStringControl">
												<Name>Identification1_CustInvoiceId</Name>
												<FilterExpression>%1</FilterExpression>
												<Type>String</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<FormControlExtension
													i:nil="true" />
												<DataField>CustInvoiceId</DataField>
												<DataSource>TAMDeduction</DataSource>
											</AxFormControl>
											<AxFormControl xmlns=""
												i:type="AxFormStringControl">
												<Name>Identification1_Notes</Name>
												<FilterExpression>%1</FilterExpression>
												<Type>String</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<FormControlExtension
													i:nil="true" />
												<DataField>Notes</DataField>
												<DataSource>TAMDeduction</DataSource>
											</AxFormControl>
										</Controls>
										<BackgroundColor>WindowBackground</BackgroundColor>
										<DataGroup>Identification</DataGroup>
										<DataSource>TAMDeduction</DataSource>
									</AxFormControl>
								</Controls>
								<DataSource>TAMDeduction</DataSource>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormGroupControl">
								<Name>GroupTop</Name>
								<AllowEdit>No</AllowEdit>
								<ElementPosition>1073741822</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<HeightMode>Auto</HeightMode>
								<Pattern>FieldsFieldGroups</Pattern>
								<PatternVersion>1.1</PatternVersion>
								<Type>Group</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<WidthMode>Auto</WidthMode>
								<FormControlExtension
									i:nil="true" />
								<Controls>
									<AxFormControl xmlns=""
										i:type="AxFormGroupControl">
										<Name>GroupAccount</Name>
										<ElementPosition>1073741822</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<Type>Group</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<FormControlExtension
											i:nil="true" />
										<Controls>
											<AxFormControl xmlns=""
												i:type="AxFormStringControl">
												<Name>AccountNum</Name>
												<AutoDeclaration>Yes</AutoDeclaration>
												<ElementPosition>858993458</ElementPosition>
												<FilterExpression>%1</FilterExpression>
												<Skip>Yes</Skip>
												<Type>String</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<FormControlExtension
													i:nil="true" />
												<ExtendedDataType>LedgerJournalAC</ExtendedDataType>
											</AxFormControl>
											<AxFormControl xmlns=""
												i:type="AxFormStringControl">
												<Name>AccountName</Name>
												<AutoDeclaration>Yes</AutoDeclaration>
												<ElementPosition>1288490187</ElementPosition>
												<FilterExpression>%1</FilterExpression>
												<Skip>Yes</Skip>
												<Type>String</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<FormControlExtension
													i:nil="true" />
												<ExtendedDataType>LedgerJournalAccountName</ExtendedDataType>
											</AxFormControl>
											<AxFormControl xmlns=""
												i:type="AxFormStringControl">
												<Name>Voucher</Name>
												<AutoDeclaration>Yes</AutoDeclaration>
												<ElementPosition>1717986916</ElementPosition>
												<FilterExpression>%1</FilterExpression>
												<Skip>Yes</Skip>
												<Type>String</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<FormControlExtension
													i:nil="true" />
												<ExtendedDataType>Voucher</ExtendedDataType>
											</AxFormControl>
										</Controls>
										<Caption>@SYS24500</Caption>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormGroupControl">
										<Name>GroupBalance</Name>
										<ElementPosition>1610612733</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<Type>Group</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<FormControlExtension
											i:nil="true" />
										<Controls>
											<AxFormControl xmlns=""
												i:type="AxFormRealControl">
												<Name>Settle</Name>
												<AutoDeclaration>Yes</AutoDeclaration>
												<ElementPosition>613566756</ElementPosition>
												<FilterExpression>%1</FilterExpression>
												<Skip>Yes</Skip>
												<Type>Real</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<FormControlExtension
													i:nil="true" />
												<Label>@MCR20892</Label>
												<NoOfDecimals>-1</NoOfDecimals>
											</AxFormControl>
											<AxFormControl xmlns=""
												i:type="AxFormRealControl">
												<Name>Payment</Name>
												<AutoDeclaration>Yes</AutoDeclaration>
												<ElementPosition>920350134</ElementPosition>
												<FilterExpression>%1</FilterExpression>
												<Skip>Yes</Skip>
												<Type>Real</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<FormControlExtension
													i:nil="true" />
												<Label>@SYS55132</Label>
												<NoOfDecimals>-1</NoOfDecimals>
											</AxFormControl>
											<AxFormControl xmlns=""
												i:type="AxFormRealControl">
												<Name>Deduction</Name>
												<AutoDeclaration>Yes</AutoDeclaration>
												<ElementPosition>1227133512</ElementPosition>
												<FilterExpression>%1</FilterExpression>
												<Skip>Yes</Skip>
												<Type>Real</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<FormControlExtension
													i:nil="true" />
												<Label>@SYS32341</Label>
												<NoOfDecimals>-1</NoOfDecimals>
											</AxFormControl>
											<AxFormControl xmlns=""
												i:type="AxFormRealControl">
												<Name>Balance</Name>
												<AutoDeclaration>Yes</AutoDeclaration>
												<ElementPosition>1533916890</ElementPosition>
												<FilterExpression>%1</FilterExpression>
												<Skip>Yes</Skip>
												<Type>Real</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<FormControlExtension
													i:nil="true" />
												<Label>@SYS53076</Label>
												<NoOfDecimals>-1</NoOfDecimals>
											</AxFormControl>
											<AxFormControl xmlns=""
												i:type="AxFormStringControl">
												<Name>CurrencyCode</Name>
												<AutoDeclaration>Yes</AutoDeclaration>
												<ElementPosition>1840700268</ElementPosition>
												<FilterExpression>%1</FilterExpression>
												<Skip>Yes</Skip>
												<Type>String</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<FormControlExtension
													i:nil="true" />
												<ExtendedDataType>CurrencyCode</ExtendedDataType>
											</AxFormControl>
										</Controls>
										<Caption>@SYS53076</Caption>
									</AxFormControl>
								</Controls>
								<ColumnsMode>Fill</ColumnsMode>
								<FrameType>None</FrameType>
							</AxFormControl>
						</Controls>
						<Caption>@SYS50012</Caption>
						<Scrollbars>Auto</Scrollbars>
					</AxFormControl>
					<AxFormControl xmlns=""
						i:type="AxFormTabPageControl">
						<Name>TabPageGeneral</Name>
						<ElementPosition>1610612733</ElementPosition>
						<FilterExpression>%1</FilterExpression>
						<HeightMode>SizeToAvailable</HeightMode>
						<Pattern>FieldsFieldGroups</Pattern>
						<PatternVersion>1.1</PatternVersion>
						<Type>TabPage</Type>
						<VerticalSpacing>-1</VerticalSpacing>
						<WidthMode>SizeToAvailable</WidthMode>
						<FormControlExtension
							i:nil="true" />
						<Controls>
							<AxFormControl xmlns=""
								i:type="AxFormGroupControl">
								<Name>Deduction1</Name>
								<ElementPosition>715827882</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<Type>Group</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<FormControlExtension
									i:nil="true" />
								<Controls>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>Deduction1_TAMDeductionID</Name>
										<FilterExpression>%1</FilterExpression>
										<Type>String</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<FormControlExtension
											i:nil="true" />
										<DataField>TAMDeductionID</DataField>
										<DataSource>TAMDeduction</DataSource>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>Deduction1_TAMDeductionType</Name>
										<FilterExpression>%1</FilterExpression>
										<Type>String</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<FormControlExtension
											i:nil="true" />
										<DataField>TAMDeductionType</DataField>
										<DataSource>TAMDeduction</DataSource>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>Deduction1_AccountNum</Name>
										<FilterExpression>%1</FilterExpression>
										<Type>String</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<FormControlExtension
											i:nil="true" />
										<DataField>AccountNum</DataField>
										<DataSource>TAMDeduction</DataSource>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormComboBoxControl">
										<Name>Deduction1_TAMDeductionStatus</Name>
										<FilterExpression>%1</FilterExpression>
										<Type>ComboBox</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<FormControlExtension
											i:nil="true" />
										<DataField>TAMDeductionStatus</DataField>
										<DataSource>TAMDeduction</DataSource>
										<Items />
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormRealControl">
										<Name>Deduction1_AmountCur</Name>
										<FilterExpression>%1</FilterExpression>
										<Type>Real</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<FormControlExtension
											i:nil="true" />
										<DataField>AmountCur</DataField>
										<DataSource>TAMDeduction</DataSource>
										<NoOfDecimals>-1</NoOfDecimals>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>Deduction1_CurrencyCode</Name>
										<FilterExpression>%1</FilterExpression>
										<Type>String</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<FormControlExtension
											i:nil="true" />
										<DataField>CurrencyCode</DataField>
										<DataSource>TAMDeduction</DataSource>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormSegmentedEntryControl">
										<Name>Deduction1_DeductOffLedgerDimension</Name>
										<AllowEdit>No</AllowEdit>
										<AutoDeclaration>Yes</AutoDeclaration>
										<ElementPosition>1908874352</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<Type>SegmentedEntry</Type>
										<FormControlExtension>
											<Name>SegmentedEntryControl</Name>
											<ExtensionComponents />
											<ExtensionProperties>
												<AxFormControlExtensionProperty>
													<Name>parmControllerClassName</Name>
													<Type>String</Type>
													<Value>LedgerDimensionAccountController</Value>
												</AxFormControlExtensionProperty>
												<AxFormControlExtensionProperty>
													<Name>parmAccountTypeEnumName</Name>
													<Type>String</Type>
												</AxFormControlExtensionProperty>
												<AxFormControlExtensionProperty>
													<Name>parmIsDefaultAccount</Name>
													<Type>Enum</Type>
													<TypeName>boolean</TypeName>
													<Value>False</Value>
												</AxFormControlExtensionProperty>
												<AxFormControlExtensionProperty>
													<Name>parmValidateBlockedForManualEntry</Name>
													<Type>Enum</Type>
													<TypeName>NoYes</TypeName>
												</AxFormControlExtensionProperty>
												<AxFormControlExtensionProperty>
													<Name>parmLockMainAccountSegment</Name>
													<Type>Enum</Type>
													<TypeName>NoYes</TypeName>
												</AxFormControlExtensionProperty>
												<AxFormControlExtensionProperty>
													<Name>parmPostingType</Name>
													<Type>Enum</Type>
													<TypeName>LedgerPostingType</TypeName>
												</AxFormControlExtensionProperty>
												<AxFormControlExtensionProperty>
													<Name>parmIncludeTotalAccounts</Name>
													<Type>Enum</Type>
													<TypeName>NoYes</TypeName>
												</AxFormControlExtensionProperty>
												<AxFormControlExtensionProperty>
													<Name>parmIncludeFinancialAccounts</Name>
													<Type>Enum</Type>
													<TypeName>NoYes</TypeName>
												</AxFormControlExtensionProperty>
											</ExtensionProperties>
										</FormControlExtension>
										<DataSource>TAMDeduction</DataSource>
										<ReferenceField>DeductOffLedgerDimension</ReferenceField>
									</AxFormControl>
								</Controls>
								<DataGroup>Deduction</DataGroup>
								<DataSource>TAMDeduction</DataSource>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormGroupControl">
								<Name>Identification</Name>
								<ElementPosition>1431655764</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<Type>Group</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<FormControlExtension
									i:nil="true" />
								<Controls>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>Identification_TAMPromotionID</Name>
										<FilterExpression>%1</FilterExpression>
										<Type>String</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<FormControlExtension
											i:nil="true" />
										<DataField>TAMPromotionID</DataField>
										<DataSource>TAMDeduction</DataSource>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>Identification_MCRMerchandisingEventID</Name>
										<FilterExpression>%1</FilterExpression>
										<Type>String</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<FormControlExtension
											i:nil="true" />
										<DataField>MCRMerchandisingEventID</DataField>
										<DataSource>TAMDeduction</DataSource>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>Identification_SalesId</Name>
										<FilterExpression>%1</FilterExpression>
										<Type>String</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<FormControlExtension
											i:nil="true" />
										<DataField>SalesId</DataField>
										<DataSource>TAMDeduction</DataSource>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>Identification_CustInvoiceId</Name>
										<FilterExpression>%1</FilterExpression>
										<Type>String</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<FormControlExtension
											i:nil="true" />
										<DataField>CustInvoiceId</DataField>
										<DataSource>TAMDeduction</DataSource>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>Identification_Notes</Name>
										<FilterExpression>%1</FilterExpression>
										<Type>String</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<FormControlExtension
											i:nil="true" />
										<DataField>Notes</DataField>
										<DataSource>TAMDeduction</DataSource>
									</AxFormControl>
								</Controls>
								<DataGroup>Identification</DataGroup>
								<DataSource>TAMDeduction</DataSource>
							</AxFormControl>
						</Controls>
						<ColumnsMode>Fill</ColumnsMode>
						<Caption>@SYS19924</Caption>
						<Scrollbars>Auto</Scrollbars>
					</AxFormControl>
				</Controls>
				<AlignChild>No</AlignChild>
				<ArrangeMethod>Vertical</ArrangeMethod>
			</AxFormControl>
		</Controls>
	</Design>
	<Parts />
</AxForm>
