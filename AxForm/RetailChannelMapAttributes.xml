<?xml version="1.0" encoding="utf-8"?>
<AxForm xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="Microsoft.Dynamics.AX.Metadata.V6">
	<Name>RetailChannelMapAttributes</Name>
	<SourceCode>
		<Methods xmlns="">
			<Method>
				<Name>classDeclaration</Name>
				<Source><![CDATA[
[Form]
public class RetailChannelMapAttributes extends FormRun
{
    RetailInternalOrganization      retailInternalOrg;
    EcoResCategoryHierarchy         categoryHierarchy;
    EcoResCategoryTreeDatasource    hierarchyTree;
    RetailProdAttributeInternalOrgMetadata  tmpProductAttributeMetadata;
    RetailSPChannelProdAttrMetadataHandler    metadataHandler;
    RefRecId    currentTmpProductAttributeMetadata;

    boolean isCountryRegionRU;
    #ISOCountryRegionCodes

}
]]></Source>
			</Method>
			<Method>
				<Name>clearMetadataGroupControl</Name>
				<Source><![CDATA[
    /// <summary>
    /// Clear children controls in the metadata group control
    /// </summary>
    public void clearMetadataGroupControl()
    {
        int controlCount = ProductAttributeMetadataGroup.controlCount();
        int i;

        for (i = 1; i <= controlCount; i++)
        {
            this.design().removeControl(ProductAttributeMetadataGroup.controlNum(1).id());
        }
    }

]]></Source>
			</Method>
			<Method>
				<Name>drawMetadataGroupControl</Name>
				<Source><![CDATA[
    /// <summary>
    /// Draw children controls in the metadata group control
    /// </summary>
    public void drawMetadataGroupControl()
    {
        RetailProdAttribIntOrgMetadataCollapsed metadataRecord;

        // Clear the group control for product attribute metadata
        element.clearMetadataGroupControl();

        // Try to find metadata Record
        metadataRecord = RetailProdAttribIntOrgMetadataCollapsed::findByInternalOrgAttribute(retailInternalOrg.RecId, tmpRetailProductAttributeMetadata.Attribute);

        // Only when the metdata record exists,
        // Draw controls for product attribute metadata
        if (metadataRecord.RecId > 0)
        {
            if (metadataHandler != null)
            {
                metadataHandler.parmTmpRetailProductAttributeMetadata(tmpRetailProductAttributeMetadata);
                metadataHandler.parmInternalOrg(metadataRecord.InternalOrganization);
                metadataHandler.draw(ProductAttributeMetadataGroup, metadataRecord.MetadataVersion);
                metadataHandler.parmCallerObject(element);
                productAttributeMetadataGroup.visible(true);
            }
            else
            {
                ProductAttributeMetadataGroup.visible(false);
            }
        }
        else
        {
            if (metadataHandler != null)
            {
                metadataHandler.parmMetadataId(0);

                // set these values else throws error for attribute type category.
                metadataHandler.parmInternalOrg(0);
            }

            productAttributeMetadataGroup.visible(false);
        }
    }

]]></Source>
			</Method>
			<Method>
				<Name>init</Name>
				<Source><![CDATA[
    public void init()
    {
        RetailInternalOrgCatHierarchyCollapsed internalOrgCatHierarchyCollapsedView;
        RetailChannelTable  retailChannel;

        super();

        if (!element.args().record())
        {
            throw error(strFmt("@SYS22678",element.name()));
        }

        //<GEERU>
        isCountryRegionRU = SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]);
        //</GEERU>

        if (element.args() &&

            element.args().record() is RetailChannelTable)
        {
            // Find currenct category hierarchy
            retailChannel = element.args().record();
            retailInternalOrg   = RetailInternalOrganization::findByOMInternalOrganization(retailChannel.OMOperatingUnitID);
            categoryHierarchy = EcoResCategoryHierarchy::find(RetailChannelTable::findCategoryHierarchyByChannel(retailChannel.RecId));
        }
        else if (element.args() &&
            element.args().record() is RetailInternalOrgCatHierarchyCollapsed)
        {
            internalOrgCatHierarchyCollapsedView = element.args().record();
            retailInternalOrg   = RetailInternalOrganization::find(internalOrgCatHierarchyCollapsedView.InternalOrganization);
            categoryHierarchy   = EcoResCategoryHierarchy::find(internalOrgCatHierarchyCollapsedView.CategoryHierarchy);
        }
        else
        {
            this.close();
        }

        // Validate category hierarchy.
        if (categoryHierarchy.RecId == 0)
        {
            error("@RET261341");
            this.close();
            return;
        }

        //<GEERU>
        if (isCountryRegionRU)
        {
            retailInternalOrg.checkFixInventDimReference();

            tmpRetailInventDimMetadata.setTmpData(
                TmpRetailInventDimMetadata::inventDimByInternalOrg(retailInternalOrg.RecId));

            tmpRetailInventDimMetadata_ds.query().dataSourceTable(tableNum(TmpRetailInventDimMetadata))
                .addSortField(fieldNum(TmpRetailInventDimMetadata, LineNumber), SortOrder::Ascending);
            tmpRetailInventDimMetadata_ds.research();
        }
        inventDimTabPage.visible(isCountryRegionRU);
        //</GEERU>

        CategoryHierarchyName.text(categoryHierarchy.Name);

        // Initialize category tree control
        element.initializeCategoryTree(categoryHierarchy.RecId);

        // Initialize metdata handler
        metadataHandler =  new RetailSPChannelProdAttrMetadataHandler();

        // Show "Category attribute" tab page only for Internal org.
        if (RetailMerchandisingKillSwitch::enableCategoryAttributesAndCategoryAttributeGroups())
        {
            CategoryAttributeTabPage.visible(RetailChannelTable::findByOperatingUnitId(retailInternalOrg.InternalOrganization).RecId);
        }

        if (FeatureStateProvider::isFeatureEnabled(RetailEnableDisplayOrderForMerchandisingFeature::instance()))
        {
            var tmpRetailProductAttributeMetadataQueryBuildDataSource = TmpRetailProductAttributeMetadata_ds.queryBuildDataSource();
            // Sort the attribute rows if the display order feature is turned on.
            tmpRetailProductAttributeMetadataQueryBuildDataSource.sortClear();
            // Sort by the order on StandardProduct, Category, Channel
            tmpRetailProductAttributeMetadataQueryBuildDataSource.addSortField(fieldNum(TmpRetailProductAttributeMetadata, AttributeRelationType), SortOrder::Descending);
            tmpRetailProductAttributeMetadataQueryBuildDataSource.addSortField(fieldNum(TmpRetailProductAttributeMetadata, AttributeGroupDisplayOrder), SortOrder::Ascending);
            tmpRetailProductAttributeMetadataQueryBuildDataSource.addSortField(fieldNum(TmpRetailProductAttributeMetadata, AttributeGroup), SortOrder::Ascending);
            tmpRetailProductAttributeMetadataQueryBuildDataSource.addSortField(fieldNum(TmpRetailProductAttributeMetadata, AttributeDisplayOrder), SortOrder::Ascending);
            tmpRetailProductAttributeMetadataQueryBuildDataSource.addSortField(fieldNum(TmpRetailProductAttributeMetadata, AttributeName), SortOrder::Ascending);
        }
    }

]]></Source>
			</Method>
			<Method>
				<Name>initializeCategoryTree</Name>
				<Source><![CDATA[
    /// <summary>
    /// Initialize category hierarchy tree control
    /// </summary>
    /// <param name="_categoryHierarchyRecId">
    /// The RecId of the category hierarchy
    /// </param>
    public void initializeCategoryTree(RefRecId _categoryHierarchyRecId)
    {
        EcoResCategoryLookupParameters lookupParameters = new EcoResCategoryLookupParameters(false, false, false);
        EcoResCategory root = EcoResCategory::getRoot(_categoryHierarchyRecId);

        hierarchyTree = new EcoResCategoryTreeDatasource(  ecoResCategory_ds,
                                                           CategoryTree,
                                                           fieldnum(EcoResCategory, RecId),
                                                           fieldnum(EcoResCategory, ParentCategory),
                                                           fieldnum(EcoResCategory, Name),
                                                           false /* No ID in description */,
                                                           true,
                                                           fieldnum(EcoResCategory, Code),
                                                           categoryHierarchy,
                                                           null,
                                                           lookupParameters,
                                                           fieldnum(EcoResCategory, NestedSetLeft) /* for tree sort order */
                                                           );

        hierarchyTree.initRoot(root.Name, root.RecId, hierarchyTree.image() );
    }

]]></Source>
			</Method>
			<Method>
				<Name>refreshCategoryAttributeList</Name>
				<Source><![CDATA[
    /// <summary>
    /// Rebuilds the query for the EcoResCategoryAttributeGroup datasource,
    /// then refreshes the grid listing all attribute groups of the selected category.
    /// </summary>
    public void refreshCategoryAttributeList()
    {
        QueryBuildDataSource qbdsCategory  = inheritedCategoryAttr_EcoResCategory_ds.query().dataSourceTable(tableNum(EcoResCategory));

        QueryBuildDataSource qbdsCategoryAttributeGroupAttributeView = ecoResCategoryAttributeGroupAttrView_ds.query().dataSourceTable(tableNum(EcoResCategoryAttributeGroupAttrView));

        // Set range for category (The current cateogry and its parent categories when inherited is true)
        qbdsCategory.clearRanges();
        EcoResCategory::setCategoryRangeBasedOnInheritance(inheritedCategoryAttr_EcoResCategory_ds, ecoResCategory, fieldNum(EcoResCategory, IsCategoryAttributesInherited) );

        // Execute the query
        ecoResCategoryAttributeGroupAttrView_ds.executeQuery();
    }

]]></Source>
			</Method>
			<Method>
				<Name>refreshMetadata</Name>
				<Source><![CDATA[
    public void refreshMetadata()
    {
        boolean allowEdit;
        boolean inherit;
        RetailProdAttribIntOrgMetadataExploded retailProdAttribIntOrgMetadataExploded;
        RetailProdAttribIntOrgMetadataCollapsed prodAttribIntOrgMetadataCollapsed = RetailProdAttribIntOrgMetadataCollapsed::findByInternalOrgAttribute(retailInternalOrg.RecId, tmpRetailProductAttributeMetadata.Attribute);

        // IncludeAttribute checkbox checked if attribute found in the view.
        productAttributeIsIncluded.checked(prodAttribIntOrgMetadataCollapsed.RecId);

        // AttributeIsRequired checkbox checked if attribute found in the view.
        productAttributeIsRequired.checked(prodAttribIntOrgMetadataCollapsed.IsRequired);

        if (tmpRetailProductAttributeMetadata.Attribute != currentTmpProductAttributeMetadata) // Draw the metadata only If attribute is not equal to old attribute.
        {
            element.drawMetadataGroupControl();

            currentTmpProductAttributeMetadata = tmpRetailProductAttributeMetadata.Attribute;
        }

        allowEdit = (tmpRetailProductAttributeMetadata.AttributeRelationType != RetailProductAttributeRelationType::Category || TmpRetailProductAttributeMetadata.Category == EcoResCategory.RecId)
                            && tmpRetailProductAttributeMetadata.Attribute > 0;

        // get the parent's metadata.
        retailProdAttribIntOrgMetadataExploded = RetailProdAttribIntOrgMetadataExploded::getParentMetadata(retailInternalOrg.RecId, tmpRetailProductAttributeMetadata.Attribute);

        inherit = retailProdAttribIntOrgMetadataExploded.RecId > 0;

        productAttributeIsIncluded.allowEdit(allowEdit && !inherit);
        productAttributeIsRequired.allowEdit(allowEdit);

        if (metadataHandler != null)
        {
            metadataHandler.allowEdit(allowEdit, tmpRetailProductAttributeMetadata.MetadataVersion);
        }
    }

]]></Source>
			</Method>
			<Method>
				<Name>saveProductAttributeMetadata</Name>
				<Source><![CDATA[
    void saveProductAttributeMetadata()
    {
        if (tmpRetailProductAttributeMetadata.RecId > 0)
        {
            ttsBegin;
            if (ProductAttributeIsIncluded.checked())
            {
                // IsIncluded is checked

                // Insert/Upsert product attribute metadata.
                RetailProdAttributeInternalOrgMetadata::addUpdate(
                    retailInternalOrg.RecId,
                    tmpRetailProductAttributeMetadata.Attribute,
                    tmpRetailProductAttributeMetadata.IsRequired,
                    tmpRetailProductAttributeMetadata.AttributeRelationType,
                    tmpRetailProductAttributeMetadata.Metadata,
                    tmpRetailProductAttributeMetadata.MetadataVersion);
            }
            else
            {
                // IsIncluded is unchecked
                // Remove product attribute metadata
                RetailProdAttributeInternalOrgMetadata::remove(
                    retailInternalOrg.RecId,
                    tmpRetailProductAttributeMetadata.Attribute);
            }

            element.drawMetadataGroupControl();

            element.updateTmpRetailProductAttributeMetadata(retailInternalOrg.RecId, tmpRetailProductAttributeMetadata.Attribute);

            ttsCommit;
        }
    }

]]></Source>
			</Method>
			<Method>
				<Name>updateTmpRetailProductAttributeMetadata</Name>
				<Source><![CDATA[
    /// <summary>
    /// Updates tenporary table <c>TmpRetailProductAttributeMetadata</c>on the datasource.
    /// </summary>
    /// <param name="_internalOrgRecId">
    /// Internal org record id.
    /// </param>
    /// <param name="_attributeId">
    /// Attribute id.
    /// </param>
    public void updateTmpRetailProductAttributeMetadata(RetailInternalOrgRefRecId _internalOrgRecId, RefRecId _attributeId)
    {
        ttsBegin;
        tmpRetailProductAttributeMetadata.selectForUpdate(true);
        tmpRetailProductAttributeMetadata.overridden = RetailProdAttributeInternalOrgMetadata::isMetadataOverridden(_internalOrgRecId, _attributeId);

        tmpRetailProductAttributeMetadata.FilterSettings = metadataHandler.isRefinable() &&
                                                            tmpRetailProductAttributeMetadata.IncludeAttribute &&
                                                            RetailAttributeFilter::findByAttribute(tmpRetailProductAttributeMetadata.Attribute);
        tmpRetailProductAttributeMetadata.update();
        ttsCommit;

        tmpRetailProductAttributeMetadata_ds.reread();
        tmpRetailProductAttributeMetadata_ds.refresh();
    }

]]></Source>
			</Method>
		</Methods>
		<DataSources xmlns="">
			<DataSource>
				<Name>EcoResCategory</Name>
				<Methods>
					<Method>
						<Name>selectionChanged</Name>
						<Source><![CDATA[
        public void selectionChanged()
        {
            super();

            // Refresh category attribute list
            element.refreshCategoryAttributeList();

            // Refresh product attribute list
            tmpRetailProductAttributeMetadata.setTmpData(
                TmpRetailProductAttributeMetadata::productAttributeMetadataByInternalOrgCat(retailInternalOrg.RecId, ecoResCategory.RecId));
            tmpRetailProductAttributeMetadata_ds.research();
            tmpRetailProductAttributeMetadata_ds.refresh();
        }

]]></Source>
					</Method>
					<Method>
						<Name>parentTitleFields</Name>
						<Source><![CDATA[
        //The record being passed from the caller form is actually a view cursor (RetailInternalOrgCatHierarchyCollapsed).
        //It does not support that because views do not have direct join relations.
        //So need to override this method and set the parent title field manually.
        public TitleFields parentTitleFields(Common _record)
        {
            TitleFields ret;
            OMInternalOrganization OMInternalOrganization;

            ret = super(_record);

            select Name from OMInternalOrganization
                    where OMInternalOrganization.RecId == retailInternalOrg.InternalOrganization;

            ret = OMInternalOrganization.Name;

            return ret;
        }

]]></Source>
					</Method>
				</Methods>
				<Fields />
			</DataSource>
			<DataSource>
				<Name>EcoResCategoryAttributeGroupAttrView</Name>
				<Methods>
					<Method>
						<Name>selectionChanged</Name>
						<Source><![CDATA[
        public void selectionChanged()
        {
            RetailChannelCategoryAttribute channelCategoryAttribute;
            RetailChannelTable retailChannel;
            super();

            retailChannel = RetailChannelTable::findByOperatingUnitId(retailInternalOrg.InternalOrganization);
            // Find the channel category attribute
            channelCategoryAttribute = RetailChannelCategoryAttribute::findByIds(retailChannel.RecId, EcoResCategoryAttributeGroupAttrView.Category, EcoResCategoryAttributeGroupAttrView.Attribute);

            // Check "Include attribute" if found
            CategoryAttributeIsIncluded.value(channelCategoryAttribute.RecId > 0);

            // Disable the checkbox if no category attribute is selected
            // or the channel is not in draft
            // or the attribute is inherited
            CategoryAttributeIsIncluded.allowEdit(
                ecoResCategoryAttributeGroupAttrView.Category == EcoResCategory.RecId
                && ecoResCategoryAttributeGroupAttrView.Attribute > 0);
        }

]]></Source>
					</Method>
					<Method>
						<Name>init</Name>
						<Source><![CDATA[
        public void init()
        {
            super();

            // Add range on Modifier
            this.query().dataSourceTable(tableNum(EcoResCategoryAttributeGroupAttrView))
                .addRange(fieldNum(EcoResCategoryAttributeGroupAttrView, Modifier)).value(queryValue(EcoResCategoryAttributeModifier::Category));
        }

]]></Source>
					</Method>
				</Methods>
				<Fields />
			</DataSource>
			<DataSource>
				<Name>TmpRetailProductAttributeMetadata</Name>
				<Methods>
					<Method>
						<Name>init</Name>
						<Source><![CDATA[
        public void init()
        {
            super();

            // clear the dynalinks to show product attributes to show ancestor internal org
            this.query().dataSourceTable(tableNum(TmpRetailProductAttributeMetadata)).clearDynalinks();
        }

]]></Source>
					</Method>
					<Method>
						<Name>selectionChanged</Name>
						<Source><![CDATA[
        public void selectionChanged()
        {
            super();
            element.refreshMetadata();
            
            if (RetailEnableCatalogRequiredControlWhenShowAttributeOnChannelCheckedFlight::instance().isEnabled())
            {
                productAttributeIsRequired.enabled(productAttributeIsIncluded.checked());
            }
        }

]]></Source>
					</Method>
				</Methods>
				<Fields />
			</DataSource>
			<DataSource>
				<Name>InheritedCategoryAttr_EcoResCategory</Name>
				<Methods>
					<Method>
						<Name>init</Name>
						<Source><![CDATA[
        public void init()
        {
            super();

            // Add relation link to EcoResCategoryAttributeGroupAttrView
            this.query().dataSourceTable(tableNum(EcoResCategory))
                .addDynalink(fieldNum(EcoResCategory, RecId), EcoResCategoryAttributeGroupAttrView, fieldNum(EcoResCategoryAttributeGroupAttrView, Category));
        }

]]></Source>
					</Method>
				</Methods>
				<Fields />
			</DataSource>
			<DataSource>
				<Name>TmpRetailInventDimMetadata</Name>
				<Methods>
					<Method>
						<Name>write</Name>
						<Source><![CDATA[
        public void write()
        {
            ttsbegin;

            super();

            tmpRetailInventDimMetadata.updateInternalOrgMetadata();

            ttscommit;
        }

]]></Source>
					</Method>
				</Methods>
				<Fields />
			</DataSource>
		</DataSources>
		<DataControls xmlns="">
			<Control>
				<Name>CategoryHierarchyName</Name>
				<Type>String</Type>
				<Methods>
					<Method>
						<Name>lookup</Name>
						<Source><![CDATA[
        public void lookup()
        {
            SysTableLookup sysTableLookup;

            Query q;
            QueryBuildDataSource qbdsHierarchyRetail, qbdsHierarchyRetailRole;
            QueryBuildDataSource qbdsHierarchyChannel;
            QueryBuildRange retailRoleRange;
            QueryBuildFieldList channelFields, hierarchyFieldList;

            // Custom query: union of the current channel navigation hierarchy and the Retail hierarchy.
            q = new Query();
            q.queryType(QueryType::Union);
            qbdsHierarchyRetail = q.addDataSource(tableNum(EcoResCategoryHierarchy), tableStr(EcoResCategoryHierarchy));
            hierarchyFieldList = qbdsHierarchyRetail.fields();
            qbdsHierarchyRetail.unionType(UnionType::Union);
            hierarchyFieldList.clearFieldList();
            hierarchyFieldList.addField(fieldNum(EcoResCategoryHierarchy, Name));

            qbdsHierarchyRetailRole = qbdsHierarchyRetail.addDataSource(tableNum(EcoResCategoryHierarchyRole), tableStr(EcoResCategoryHierarchyRole));
            qbdsHierarchyRetailRole.joinMode(JoinMode::ExistsJoin);
            qbdsHierarchyRetailRole.addLink(fieldNum(EcoResCategoryHierarchy, RecId), fieldNum(EcoResCategoryHierarchyRole, CategoryHierarchy), tableStr(EcoResCategoryHierarchy));
            retailRoleRange = qbdsHierarchyRetailRole.addRange(fieldNum(EcoResCategoryHierarchyRole, NamedCategoryHierarchyRole));
            retailRoleRange.value(queryValue(EcoResCategoryNamedHierarchyRole::Retail));

            qbdsHierarchyChannel = q.addDataSource(tableNum(EcoResCategoryHierarchy), 'HierarchyChannel');
            qbdsHierarchyChannel.unionType(UnionType::Union);
            channelFields = qbdsHierarchyChannel.fields();
            channelFields.clearFieldList();
            channelFields.addField(fieldNum(EcoResCategoryHierarchy, Name));

            qbdsHierarchyChannel.addRange(fieldNum(EcoResCategoryHierarchy, RecId)).value(queryValue(categoryHierarchy.RecId));

            sysTableLookup = SysTableLookup::newParameters(tableNum(EcoResCategoryHierarchy), this);
            sysTableLookup.addLookupfield(fieldNum(EcoResCategoryHierarchy, Name));
            sysTableLookup.parmQuery(q);
            sysTableLookup.performFormLookup();
        }

]]></Source>
					</Method>
					<Method>
						<Name>modified</Name>
						<Source><![CDATA[
        public boolean modified()
        {
            boolean ret;
            RefRecId currentCategoryHierarchyRecId;

            ret = super();

            currentCategoryHierarchyRecId = EcoResCategoryHierarchy::findByName(CategoryHierarchyName.text()).RecId;
            element.initializeCategoryTree(currentCategoryHierarchyRecId);

            // Show "Category attribute" tab page only when the current category hierarchy is the navigation hierarchy
            if (RetailMerchandisingKillSwitch::enableCategoryAttributesAndCategoryAttributeGroups())
            {
                CategoryAttributeTabPage.visible(categoryHierarchy.RecId == currentCategoryHierarchyRecId);
            }

            return ret;
        }

]]></Source>
					</Method>
				</Methods>
			</Control>
			<Control>
				<Name>CategoryTree</Name>
				<Type>Tree</Type>
				<Methods>
					<Method>
						<Name>expanded</Name>
						<Source><![CDATA[
        public void expanded(int _Idx, FormTreeExpand _action, anytype _data)
        {
            super(_Idx, _action, _data);
            if (hierarchyTree)
            {
                hierarchyTree.onExpanded(_Idx, _action);
            }
        }

]]></Source>
					</Method>
					<Method>
						<Name>expanding</Name>
						<Source><![CDATA[
        public boolean expanding(int _Idx, FormTreeExpand _action, anytype _data)
        {
            boolean ret;

            ret = super(_Idx, _action, _data);

            if (hierarchyTree)
            {
                hierarchyTree.expanding(_idx, _action, _data);
            }

            return ret;
        }

]]></Source>
					</Method>
					<Method>
						<Name>selectionChanged</Name>
						<Source><![CDATA[
        public void selectionChanged(FormTreeItem _OldItem, FormTreeItem _NewItem, FormTreeSelect _how)
        {
            int root = this.getRoot();

            super(_oldItem, _newItem, _how);

            if (hierarchyTree)
            {
                hierarchyTree.selectionChanged(_oldItem, _newItem);
            }
        }

]]></Source>
					</Method>
				</Methods>
			</Control>
			<Control>
				<Name>CategoryAttributeIsIncluded</Name>
				<Type>CheckBox</Type>
				<Methods>
					<Method>
						<Name>modified</Name>
						<Source><![CDATA[
        public boolean modified()
        {
            boolean ret;

            ttsBegin;

            if (CategoryAttributeIsIncluded.checked())
            {
                // IsIncluded is checked
                ret = super();

                RetailChannelCategoryAttribute::add(RetailChannelTable::findByOperatingUnitId(retailInternalOrg.InternalOrganization).RecId, EcoResCategoryAttributeGroupAttrView.Category, EcoResCategoryAttributeGroupAttrView.Attribute);
            }
            else
            {
                ret = super();

                RetailChannelCategoryAttribute::remove(RetailChannelTable::findByOperatingUnitId(retailInternalOrg.InternalOrganization).RecId, EcoResCategoryAttributeGroupAttrView.Category, EcoResCategoryAttributeGroupAttrView.Attribute);
            }

            ttsCommit;

            return ret;
        }

]]></Source>
					</Method>
				</Methods>
			</Control>
			<Control>
				<Name>ProductAttributeIsIncluded</Name>
				<Type>CheckBox</Type>
				<Methods>
					<Method>
						<Name>modified</Name>
						<Source><![CDATA[
        public boolean modified()
        {
            boolean ret;

            ret = super();

            if (RetailEnableCatalogRequiredControlWhenShowAttributeOnChannelCheckedFlight::instance().isEnabled())
            {
                ProductAttributeIsRequired.enabled(this.checked());
            }

            if (!ProductAttributeIsIncluded.checked())
            {
                element.clearMetadataGroupControl();
            }

            element.saveProductAttributeMetadata();

            return ret;
        }

]]></Source>
					</Method>
				</Methods>
			</Control>
			<Control>
				<Name>ProductAttributeIsRequired</Name>
				<Type>CheckBox</Type>
				<Methods>
					<Method>
						<Name>modified</Name>
						<Source><![CDATA[
        public boolean modified()
        {
            boolean ret;

            ret = super();
            metadataHandler.save();
            return ret;
        }

]]></Source>
					</Method>
				</Methods>
			</Control>
		</DataControls>
		<Members xmlns="" />
	</SourceCode>
	<DataSources>
		<AxFormDataSource xmlns="">
			<Name>EcoResCategory</Name>
			<Table>EcoResCategory</Table>
			<Fields>
				<AxFormDataSourceField>
					<DataField>CategoryHierarchy</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ChangeStatus</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Code</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>createdBy</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>createdDateTime</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>dataAreaId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>DefaultProjectGlobalCategory</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>DefaultThreshold_PSN</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>InstanceRelationType</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>IsActive</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>IsCategoryAttributesInherited</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>IsTangible</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Level</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>modifiedBy</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>modifiedDateTime</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Name</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>NestedSetLeft</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>NestedSetRight</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ParentCategory</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>PKWiUCode</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RecId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>relationType</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TableId</DataField>
				</AxFormDataSourceField>
			</Fields>
			<ReferencedDataSources />
			<AllowCreate>No</AllowCreate>
			<AllowDelete>No</AllowDelete>
			<AllowEdit>No</AllowEdit>
			<InsertIfEmpty>No</InsertIfEmpty>
			<DataSourceLinks />
			<DerivedDataSources>
				<AxFormDataSourceDerived>
					<Name>EcoResCategory_PCClass</Name>
					<Table>PCClass</Table>
					<Fields>
						<AxFormDataSourceField>
							<DataField>RecId</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>ReuseEnabled</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>TableId</DataField>
						</AxFormDataSourceField>
					</Fields>
					<ReferencedDataSources />
					<DerivedDataSources />
				</AxFormDataSourceDerived>
			</DerivedDataSources>
		</AxFormDataSource>
		<AxFormDataSource xmlns="">
			<Name>EcoResCategoryTranslation</Name>
			<Table>EcoResCategoryTranslation</Table>
			<Fields>
				<AxFormDataSourceField>
					<DataField>Category</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>createdBy</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>createdDateTime</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>dataAreaId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Description</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>FriendlyName</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>LanguageId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>modifiedBy</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>modifiedDateTime</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RecId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>SearchText</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TableId</DataField>
				</AxFormDataSourceField>
			</Fields>
			<ReferencedDataSources />
			<JoinSource>EcoResCategory</JoinSource>
			<AllowCreate>No</AllowCreate>
			<AllowDelete>No</AllowDelete>
			<AllowEdit>No</AllowEdit>
			<DataSourceLinks />
			<DerivedDataSources />
		</AxFormDataSource>
		<AxFormDataSource xmlns="">
			<Name>EcoResCategoryAttributeGroupAttrView</Name>
			<Table>EcoResCategoryAttributeGroupAttrView</Table>
			<Fields>
				<AxFormDataSourceField>
					<DataField>Attribute</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>AttributeCount</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>AttributeName</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Category</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>CategoryHierarchy</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>dataAreaId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Modifier</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RecId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TableId</DataField>
				</AxFormDataSourceField>
			</Fields>
			<ReferencedDataSources />
			<AllowCreate>No</AllowCreate>
			<AllowDelete>No</AllowDelete>
			<InsertIfEmpty>No</InsertIfEmpty>
			<DataSourceLinks />
			<DerivedDataSources />
		</AxFormDataSource>
		<AxFormDataSource xmlns="">
			<Name>TmpRetailProductAttributeMetadata</Name>
			<Table>TmpRetailProductAttributeMetadata</Table>
			<Fields>
				<AxFormDataSourceField>
					<DataField>AncestorInternalOrg</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>AncestorInternalOrgName</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Attribute</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>AttributeName</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>AttributeRelationType</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Category</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>FilterSettings</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>HostChannel</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>IncludeAttribute</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>IsRequired</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Metadata</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>MetadataVersion</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Overridden</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Partition</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RecId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TableId</DataField>
				</AxFormDataSourceField>
			</Fields>
			<ReferencedDataSources />
			<AllowCreate>No</AllowCreate>
			<AllowDelete>No</AllowDelete>
			<InsertIfEmpty>No</InsertIfEmpty>
			<DataSourceLinks />
			<DerivedDataSources />
		</AxFormDataSource>
		<AxFormDataSource xmlns="">
			<Name>InheritedCategoryAttr_EcoResCategory</Name>
			<Table>EcoResCategory</Table>
			<Fields>
				<AxFormDataSourceField>
					<DataField>CategoryHierarchy</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ChangeStatus</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Code</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>createdBy</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>createdDateTime</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>dataAreaId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>DefaultProjectGlobalCategory</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>DefaultThreshold_PSN</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>InstanceRelationType</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>IsActive</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>IsCategoryAttributesInherited</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>IsTangible</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Level</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>modifiedBy</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>modifiedDateTime</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Name</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>NestedSetLeft</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>NestedSetRight</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ParentCategory</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>PKWiUCode</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RecId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>relationType</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TableId</DataField>
				</AxFormDataSourceField>
			</Fields>
			<ReferencedDataSources />
			<JoinSource>EcoResCategoryAttributeGroupAttrView</JoinSource>
			<LinkType>InnerJoin</LinkType>
			<AllowCreate>No</AllowCreate>
			<AllowDelete>No</AllowDelete>
			<AllowEdit>No</AllowEdit>
			<InsertIfEmpty>No</InsertIfEmpty>
			<DataSourceLinks />
			<DerivedDataSources>
				<AxFormDataSourceDerived>
					<Name>InheritedCategoryAttr_EcoResCategory_PCClass</Name>
					<Table>PCClass</Table>
					<Fields>
						<AxFormDataSourceField>
							<DataField>RecId</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>ReuseEnabled</DataField>
						</AxFormDataSourceField>
						<AxFormDataSourceField>
							<DataField>TableId</DataField>
						</AxFormDataSourceField>
					</Fields>
					<ReferencedDataSources />
					<DerivedDataSources />
				</AxFormDataSourceDerived>
			</DerivedDataSources>
		</AxFormDataSource>
		<AxFormDataSource xmlns="">
			<Name>TmpRetailInventDimMetadata</Name>
			<Table>TmpRetailInventDimMetadata</Table>
			<Fields>
				<AxFormDataSourceField>
					<DataField>AncestorInternalOrg</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>AncestorInternalOrgName</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>dataAreaId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>DimensionFieldId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<AllowEdit>No</AllowEdit>
					<DataField>DimensionFieldName</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>HostChannel</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>InternalOrganization</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>IsRefinable</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>LineNumber</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RecId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TableId</DataField>
				</AxFormDataSourceField>
			</Fields>
			<ReferencedDataSources />
			<AllowCreate>No</AllowCreate>
			<AllowDelete>No</AllowDelete>
			<DataSourceLinks />
			<DerivedDataSources />
		</AxFormDataSource>
	</DataSources>
	<Design>
		<Caption xmlns="">@REX4040242</Caption>
		<Pattern xmlns="">SimpleListDetails-Tree</Pattern>
		<PatternVersion xmlns="">1.3</PatternVersion>
		<SetCompany xmlns="">No</SetCompany>
		<Style xmlns="">SimpleListDetails</Style>
		<Controls xmlns="">
			<AxFormControl xmlns=""
				i:type="AxFormActionPaneControl">
				<Name>ActionPaneHeader</Name>
				<ElementPosition>715827882</ElementPosition>
				<FilterExpression>%1</FilterExpression>
				<HeightMode>Auto</HeightMode>
				<Type>ActionPane</Type>
				<VerticalSpacing>-1</VerticalSpacing>
				<Width>0</Width>
				<FormControlExtension
					i:nil="true" />
				<Controls />
				<AlignChild>No</AlignChild>
				<AlignChildren>No</AlignChildren>
				<ArrangeMethod>Vertical</ArrangeMethod>
			</AxFormControl>
			<AxFormControl xmlns=""
				i:type="AxFormGroupControl">
				<Name>CategoryTreeGroup</Name>
				<AutoDeclaration>Yes</AutoDeclaration>
				<HeightMode>SizeToAvailable</HeightMode>
				<Type>Group</Type>
				<Width>300</Width>
				<WidthMode>Manual</WidthMode>
				<FormControlExtension
					i:nil="true" />
				<Controls>
					<AxFormControl xmlns=""
						i:type="AxFormGroupControl">
						<Name>CustomFilterGroup</Name>
						<Type>Group</Type>
						<WidthMode>SizeToAvailable</WidthMode>
						<FormControlExtension
							i:nil="true" />
						<Controls>
							<AxFormControl xmlns=""
								i:type="AxFormStringControl">
								<Name>CategoryHierarchyName</Name>
								<AutoDeclaration>Yes</AutoDeclaration>
								<ElementPosition>954437176</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<Type>String</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<FormControlExtension
									i:nil="true" />
								<ExtendedDataType>EcoResCategoryHierarchyName</ExtendedDataType>
								<Label>@SYS136679</Label>
							</AxFormControl>
						</Controls>
						<FrameType>None</FrameType>
						<Style>CustomFilter</Style>
						<ViewEditMode>Edit</ViewEditMode>
					</AxFormControl>
					<AxFormControl xmlns=""
						i:type="AxFormTreeControl">
						<Name>CategoryTree</Name>
						<AutoDeclaration>Yes</AutoDeclaration>
						<ElementPosition>1431655764</ElementPosition>
						<FilterExpression>%1</FilterExpression>
						<HeightMode>SizeToAvailable</HeightMode>
						<Type>Tree</Type>
						<VerticalSpacing>-1</VerticalSpacing>
						<FormControlExtension
							i:nil="true" />
						<Border>SingleLine</Border>
					</AxFormControl>
				</Controls>
				<FrameType>None</FrameType>
				<Style>SidePanel</Style>
			</AxFormControl>
			<AxFormControl xmlns=""
				i:type="AxFormGroupControl">
				<Name>SplitterX</Name>
				<AutoDeclaration>Yes</AutoDeclaration>
				<ElementPosition>1288490187</ElementPosition>
				<FilterExpression>%1</FilterExpression>
				<Height>0</Height>
				<HeightMode>SizeToAvailable</HeightMode>
				<Type>Group</Type>
				<VerticalSpacing>-1</VerticalSpacing>
				<Width>5</Width>
				<WidthMode>Auto</WidthMode>
				<FormControlExtension
					i:nil="true" />
				<Controls />
				<LeftMargin>0</LeftMargin>
				<LeftMarginMode>Fixed</LeftMarginMode>
				<BackgroundColor>WindowBackground</BackgroundColor>
				<Style>SplitterVerticalContainer</Style>
			</AxFormControl>
			<AxFormControl xmlns=""
				i:type="AxFormGroupControl">
				<Name>DetailsHeader</Name>
				<Pattern>FieldsFieldGroups</Pattern>
				<PatternVersion>1.1</PatternVersion>
				<Type>Group</Type>
				<WidthMode>SizeToAvailable</WidthMode>
				<FormControlExtension
					i:nil="true" />
				<Controls />
				<ColumnsMode>Fill</ColumnsMode>
				<FrameType>None</FrameType>
			</AxFormControl>
			<AxFormControl xmlns=""
				i:type="AxFormTabControl">
				<Name>DetailsTab</Name>
				<AlignControl>No</AlignControl>
				<ElementPosition>1717986916</ElementPosition>
				<FilterExpression>%1</FilterExpression>
				<Type>Tab</Type>
				<VerticalSpacing>-1</VerticalSpacing>
				<FormControlExtension
					i:nil="true" />
				<Controls>
					<AxFormControl xmlns=""
						i:type="AxFormTabPageControl">
						<Name>GeneralTabPage</Name>
						<ElementPosition>858993458</ElementPosition>
						<FilterExpression>%1</FilterExpression>
						<HeightMode>Auto</HeightMode>
						<Pattern>FieldsFieldGroups</Pattern>
						<PatternVersion>1.1</PatternVersion>
						<Type>TabPage</Type>
						<VerticalSpacing>-1</VerticalSpacing>
						<WidthMode>SizeToAvailable</WidthMode>
						<FormControlExtension
							i:nil="true" />
						<Controls>
							<AxFormControl xmlns=""
								i:type="AxFormStringControl">
								<Name>EcoResCategory_Name</Name>
								<AllowEdit>No</AllowEdit>
								<ElementPosition>1073741822</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<Type>String</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<FormControlExtension
									i:nil="true" />
								<DataField>Name</DataField>
								<DataSource>EcoResCategory</DataSource>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormStringControl">
								<Name>EcoResCategoryTranslation_Description</Name>
								<AllowEdit>No</AllowEdit>
								<ElementPosition>1610612733</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<Type>String</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<FormControlExtension
									i:nil="true" />
								<DataField>Description</DataField>
								<DataSource>EcoResCategoryTranslation</DataSource>
							</AxFormControl>
						</Controls>
						<ColumnsMode>Fill</ColumnsMode>
						<BackgroundColor>WindowBackground</BackgroundColor>
						<Caption>@RET3775</Caption>
						<Scrollbars>Auto</Scrollbars>
					</AxFormControl>
					<AxFormControl xmlns=""
						i:type="AxFormTabPageControl">
						<Name>CategoryAttributeTabPage</Name>
						<AutoDeclaration>Yes</AutoDeclaration>
						<ElementPosition>1288490187</ElementPosition>
						<FilterExpression>%1</FilterExpression>
						<HeightMode>Auto</HeightMode>
						<Pattern>NestedSimpleListDetails</Pattern>
						<PatternVersion>UX7 1.1</PatternVersion>
						<Type>TabPage</Type>
						<VerticalSpacing>-1</VerticalSpacing>
						<Visible>No</Visible>
						<Width>0</Width>
						<WidthMode>SizeToAvailable</WidthMode>
						<FormControlExtension
							i:nil="true" />
						<Controls>
							<AxFormControl xmlns=""
								i:type="AxFormGroupControl">
								<Name>BodyCategoryAttribute</Name>
								<HeightMode>SizeToAvailable</HeightMode>
								<Type>Group</Type>
								<WidthMode>SizeToAvailable</WidthMode>
								<FormControlExtension
									i:nil="true" />
								<Controls>
									<AxFormControl xmlns=""
										i:type="AxFormGroupControl">
										<Name>NavigationList</Name>
										<HeightMode>SizeToAvailable</HeightMode>
										<Type>Group</Type>
										<FormControlExtension
											i:nil="true" />
										<Controls>
											<AxFormControl xmlns=""
												i:type="AxFormGridControl">
												<Name>CategoryAttributeGrid</Name>
												<AllowEdit>No</AllowEdit>
												<ElementPosition>1073741822</ElementPosition>
												<FilterExpression>%1</FilterExpression>
												<Type>Grid</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<WidthMode>SizeToContent</WidthMode>
												<FormControlExtension
													i:nil="true" />
												<Controls>
													<AxFormControl xmlns=""
														i:type="AxFormStringControl">
														<Name>CategoryAttributeName</Name>
														<ElementPosition>1431655764</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>String</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<DataField>AttributeName</DataField>
														<DataSource>EcoResCategoryAttributeGroupAttrView</DataSource>
													</AxFormControl>
													<AxFormControl xmlns=""
														i:type="AxFormStringControl">
														<Name>CategoryAttributeInheritedFrom</Name>
														<ElementPosition>1789569705</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<HeightMode>Auto</HeightMode>
														<Type>String</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<WidthMode>Auto</WidthMode>
														<FormControlExtension
															i:nil="true" />
														<DataField>Name</DataField>
														<DataSource>InheritedCategoryAttr_EcoResCategory</DataSource>
														<Label>@SYS135660</Label>
													</AxFormControl>
												</Controls>
												<DataSource>EcoResCategoryAttributeGroupAttrView</DataSource>
												<MultiSelect>No</MultiSelect>
												<ShowRowLabels>No</ShowRowLabels>
												<Style>List</Style>
											</AxFormControl>
										</Controls>
										<FrameType>None</FrameType>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormGroupControl">
										<Name>DetailsGroupCategoryAttribute</Name>
										<HeightMode>SizeToAvailable</HeightMode>
										<Type>Group</Type>
										<WidthMode>SizeToAvailable</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<Controls>
											<AxFormControl xmlns=""
												i:type="AxFormGroupControl">
												<Name>HeaderCategoryAttribute</Name>
												<Type>Group</Type>
												<WidthMode>SizeToAvailable</WidthMode>
												<FormControlExtension
													i:nil="true" />
												<Controls>
													<AxFormControl xmlns=""
														i:type="AxFormCheckBoxControl">
														<Name>CategoryAttributeIsIncluded</Name>
														<AutoDeclaration>Yes</AutoDeclaration>
														<ElementPosition>1610612734</ElementPosition>
														<FilterExpression>%1</FilterExpression>
														<Type>CheckBox</Type>
														<VerticalSpacing>-1</VerticalSpacing>
														<FormControlExtension
															i:nil="true" />
														<Label>@RET261318</Label>
													</AxFormControl>
												</Controls>
												<ColumnsMode>Fill</ColumnsMode>
												<FrameType>None</FrameType>
											</AxFormControl>
										</Controls>
										<FrameType>None</FrameType>
									</AxFormControl>
								</Controls>
								<Columns>2</Columns>
								<FrameType>None</FrameType>
							</AxFormControl>
						</Controls>
						<BackgroundColor>WindowBackground</BackgroundColor>
						<Caption>@RET261340</Caption>
						<Scrollbars>Auto</Scrollbars>
					</AxFormControl>
					<AxFormControl xmlns=""
						i:type="AxFormTabPageControl">
						<Name>ProductAttributeTabPage</Name>
						<ElementPosition>1574821340</ElementPosition>
						<FilterExpression>%1</FilterExpression>
						<HeightMode>Auto</HeightMode>
						<Pattern>ToolbarList</Pattern>
						<PatternVersion>1.2</PatternVersion>
						<Type>TabPage</Type>
						<VerticalSpacing>-1</VerticalSpacing>
						<Width>0</Width>
						<WidthMode>SizeToAvailable</WidthMode>
						<FormControlExtension
							i:nil="true" />
						<Controls>
							<AxFormControl xmlns=""
								i:type="AxFormGridControl">
								<Name>ProductAttributeGrid</Name>
								<AllowEdit>No</AllowEdit>
								<ElementPosition>763549740</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<Type>Grid</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<FormControlExtension
									i:nil="true" />
								<Controls>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>ProductAttributeName</Name>
										<ElementPosition>1073741822</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>String</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<Width>100</Width>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>AttributeName</DataField>
										<DataSource>TmpRetailProductAttributeMetadata</DataSource>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormComboBoxControl">
										<Name>ProductAttributeRelationType</Name>
										<ElementPosition>1610612733</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>ComboBox</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>AttributeRelationType</DataField>
										<DataSource>TmpRetailProductAttributeMetadata</DataSource>
										<Items />
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormReferenceGroupControl">
										<Name>TmpRetailProductAttributeMetadata_Category</Name>
										<ElementPosition>1767200082</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>ReferenceGroup</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<Controls>
											<AxFormControl xmlns=""
												i:type="AxFormStringControl">
												<Name>TmpRetailProductAttributeMetadata_Category_Name</Name>
												<DataRelationPath>EcoResCategory</DataRelationPath>
												<FilterExpression>%1</FilterExpression>
												<HeightMode>Auto</HeightMode>
												<Type>String</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<WidthMode>Auto</WidthMode>
												<FormControlExtension
													i:nil="true" />
											</AxFormControl>
										</Controls>
										<DataSource>TmpRetailProductAttributeMetadata</DataSource>
										<ReferenceField>Category</ReferenceField>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormStringControl">
										<Name>TmpRetailProductAttributeMetadata_AncestorInternalOrgName</Name>
										<ElementPosition>1923787432</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>String</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>AncestorInternalOrgName</DataField>
										<DataSource>TmpRetailProductAttributeMetadata</DataSource>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormCheckBoxControl">
										<Name>TmpRetailProductAttributeMetadata_FilterSettings</Name>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>CheckBox</Type>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>FilterSettings</DataField>
										<DataSource>TmpRetailProductAttributeMetadata</DataSource>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormCheckBoxControl">
										<Name>TmpRetailProductAttributeMetadata_Overridden</Name>
										<ElementPosition>2058005160</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>CheckBox</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<BackgroundColor>WindowBackground</BackgroundColor>
										<DataField>Overridden</DataField>
										<DataSource>TmpRetailProductAttributeMetadata</DataSource>
									</AxFormControl>
								</Controls>
								<DataSource>TmpRetailProductAttributeMetadata</DataSource>
								<MultiSelect>No</MultiSelect>
								<ShowRowLabels>No</ShowRowLabels>
								<Style>Tabular</Style>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormGroupControl">
								<Name>DetailsGroup</Name>
								<HeightMode>SizeToAvailable</HeightMode>
								<Pattern>FieldsFieldGroups</Pattern>
								<PatternVersion>1.1</PatternVersion>
								<Type>Group</Type>
								<WidthMode>SizeToAvailable</WidthMode>
								<FormControlExtension
									i:nil="true" />
								<Controls>
									<AxFormControl xmlns=""
										i:type="AxFormGroupControl">
										<Name>DetailsHeaderProductAttribute</Name>
										<Type>Group</Type>
										<FormControlExtension
											i:nil="true" />
										<Controls>
											<AxFormControl xmlns=""
												i:type="AxFormCheckBoxControl">
												<Name>ProductAttributeIsIncluded</Name>
												<AutoDeclaration>Yes</AutoDeclaration>
												<ElementPosition>1145324610</ElementPosition>
												<FilterExpression>%1</FilterExpression>
												<Type>CheckBox</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<FormControlExtension
													i:nil="true" />
												<DataField>IncludeAttribute</DataField>
												<DataSource>TmpRetailProductAttributeMetadata</DataSource>
												<Label>@Retail:RetailProdutAttributeShowOnChannel</Label>
											</AxFormControl>
											<AxFormControl xmlns=""
												i:type="AxFormCheckBoxControl">
												<Name>ProductAttributeIsRequired</Name>
												<AutoDeclaration>Yes</AutoDeclaration>
												<ElementPosition>1431655763</ElementPosition>
												<FilterExpression>%1</FilterExpression>
												<Type>CheckBox</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<FormControlExtension
													i:nil="true" />
												<DataField>IsRequired</DataField>
												<DataSource>TmpRetailProductAttributeMetadata</DataSource>
											</AxFormControl>
										</Controls>
										<FrameType>None</FrameType>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormGroupControl">
										<Name>ProductAttributeMetadataGroup</Name>
										<AutoDeclaration>Yes</AutoDeclaration>
										<ElementPosition>1908874351</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<Type>Group</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<Visible>No</Visible>
										<FormControlExtension
											i:nil="true" />
										<Controls />
										<FrameType>None</FrameType>
									</AxFormControl>
								</Controls>
								<ColumnsMode>Fill</ColumnsMode>
								<FrameType>None</FrameType>
							</AxFormControl>
						</Controls>
						<BackgroundColor>WindowBackground</BackgroundColor>
						<Caption>@RET261329</Caption>
						<Scrollbars>Auto</Scrollbars>
					</AxFormControl>
					<AxFormControl xmlns=""
						i:type="AxFormTabPageControl">
						<Name>InventDimTabPage</Name>
						<AutoDeclaration>Yes</AutoDeclaration>
						<ElementPosition>1861152493</ElementPosition>
						<FilterExpression>%1</FilterExpression>
						<HeightMode>Auto</HeightMode>
						<Pattern>Custom</Pattern>
						<Type>TabPage</Type>
						<VerticalSpacing>-1</VerticalSpacing>
						<Width>0</Width>
						<WidthMode>SizeToAvailable</WidthMode>
						<FormControlExtension
							i:nil="true" />
						<Controls>
							<AxFormControl xmlns=""
								i:type="AxFormGroupControl">
								<Name>Group_</Name>
								<ElementPosition>1431655764</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<Height>0</Height>
								<HeightMode>SizeToAvailable</HeightMode>
								<Type>Group</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<Width>0</Width>
								<WidthMode>SizeToAvailable</WidthMode>
								<FormControlExtension
									i:nil="true" />
								<Controls>
									<AxFormControl xmlns=""
										i:type="AxFormGridControl">
										<Name>InventDimGrid</Name>
										<ElementPosition>1431655764</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>Grid</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<Width>0</Width>
										<FormControlExtension
											i:nil="true" />
										<Controls>
											<AxFormControl xmlns=""
												i:type="AxFormStringControl">
												<Name>TmpRetailInventDimMetadata_DimensionFieldName</Name>
												<ElementPosition>1073741822</ElementPosition>
												<FilterExpression>%1</FilterExpression>
												<HeightMode>Auto</HeightMode>
												<Type>String</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<WidthMode>Auto</WidthMode>
												<FormControlExtension
													i:nil="true" />
												<DataField>DimensionFieldName</DataField>
												<DataSource>TmpRetailInventDimMetadata</DataSource>
											</AxFormControl>
											<AxFormControl xmlns=""
												i:type="AxFormCheckBoxControl">
												<Name>TmpRetailInventDimMetadata_IsRefinable</Name>
												<ElementPosition>1610612733</ElementPosition>
												<FilterExpression>%1</FilterExpression>
												<HeightMode>Auto</HeightMode>
												<Type>CheckBox</Type>
												<VerticalSpacing>-1</VerticalSpacing>
												<WidthMode>Auto</WidthMode>
												<FormControlExtension
													i:nil="true" />
												<BackgroundColor>WindowBackground</BackgroundColor>
												<DataField>IsRefinable</DataField>
												<DataSource>TmpRetailInventDimMetadata</DataSource>
											</AxFormControl>
										</Controls>
										<DataSource>TmpRetailInventDimMetadata</DataSource>
										<MultiSelect>No</MultiSelect>
										<ShowRowLabels>No</ShowRowLabels>
									</AxFormControl>
								</Controls>
								<Caption>@SYP4882053</Caption>
							</AxFormControl>
						</Controls>
						<BackgroundColor>WindowBackground</BackgroundColor>
						<Caption>@SYP4882049</Caption>
						<Scrollbars>Auto</Scrollbars>
					</AxFormControl>
				</Controls>
				<AlignChild>No</AlignChild>
				<ArrangeMethod>Vertical</ArrangeMethod>
				<Style>FastTabs</Style>
			</AxFormControl>
		</Controls>
	</Design>
	<Parts />
</AxForm>