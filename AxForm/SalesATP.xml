<?xml version="1.0" encoding="utf-8"?>
<AxForm xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="Microsoft.Dynamics.AX.Metadata.V6">
	<Name>SalesATP</Name>
	<SourceCode>
		<Methods xmlns="">
			<Method>
				<Name>classDeclaration</Name>
				<Source><![CDATA[
[Form]
public class SalesATP extends FormRun
{
    #ResAppl

    InventDimCtrl_Frm               inventDimCtrl_Frm;
    TradeInventTransId              salesLineInventTransId;
    tableId                         callerDataset;
    CustAccount                     custAccount;
    SalesATPSettingsMap             salesATPSettingsMap;
    QueryBuildRange                 qbrInventDimId;
    private date                    shippingDateRequested;

}
]]></Source>
			</Method>
			<Method>
				<Name>activate</Name>
				<Source><![CDATA[
    public void activate(boolean _active)
    {
        super(_active);
        if (_active)
        {
            fieldItemId.setFocus();
        }
    }

]]></Source>
			</Method>
			<Method>
				<Name>fillSalesTmpATP</Name>
				<Source><![CDATA[
    public void fillSalesTmpATP()
    {
        SalesATPCalculation  salesATPCalculation;

        salesATPCalculation = SalesATPCalculation::newSalesCalculation(fieldItemId.text(),inventDim.InventDimId, custAccount);
        //
        // Even though SalesATPCalculation::newSalesCalculation() also finds atpSettings, we still have to
        // call salesATPCalculation.parmSalesATPSettingsMap() and set specific settings.
        // Since this form can be opened both from SalesTable and InventTable, settings in atpSettings variable
        // may be different from those found by SalesATPCalculation::newSalesCalculation() method.
        //
        salesATPCalculation.parmSalesATPSettingsMap(salesATPSettingsMap);
        salesATPCalculation.parmShippingDateRequested(shippingDateRequested);

        salesTmpATP.setTmpData(salesATPCalculation.calcSalesTmpATP(salesLineInventTransId, fieldQty.realValue()));
    }

]]></Source>
			</Method>
			<Method>
				<Name>init</Name>
				<Source><![CDATA[
    public void init()
    {
        Args                    args = new Args(element.args());

        if (element.args().caller())
        {
            callerDataset = element.args().dataset();
        }
        else
        {
            throw error(Error::wrongUseOfFunction(formStr(SalesATP)));
        }

        super();

        element.calculateATP(true);
        this.updateDimensionDesign(InventDimFormDesignUpdate::Init);
    }

]]></Source>
			</Method>
			<Method>
				<Name>itemId</Name>
				<Source><![CDATA[
    ItemId itemId()
    {
        return fieldItemId.text();
    }

]]></Source>
			</Method>
			<Method>
				<Name>processCallerDataset</Name>
				<Source><![CDATA[
    /// <summary>
    ///     Processes the caller dataset and sets itemId, item quantity and all relevant
    ///     inventory dimensions for calculating ATP.
    /// </summary>
    /// <param name="_isInit">
    ///     Defines whether form is being initialized; optional.
    /// </param>
    /// <returns>
    ///     true if the dataset was processed; otherwise, false.
    /// </returns>
    protected boolean processCallerDataset(boolean _isInit)
    {
        boolean isDatasetProcessed = false;

        switch (callerDataset)
        {
            case tableNum(SalesLine):
                if (_isInit)
                {
                    SalesLine salesLine = SalesLine::findRecId(element.args().record().RecId);
                    inventDim.data(InventDim::find(salesLine.InventDimId));
                    salesLineInventTransId = salesLine.InventTransId;
                    fieldItemId.text(salesLine.ItemId);
                    fieldQty.realValue(salesLine.RemainInventPhysical);
                    custAccount = salesLine.CustAccount;
                    shippingDateRequested = salesLine.ShippingDateRequested;
                }

                salesATPSettingsMap = SalesATPCalculation::findSalesOrderSettings(element.itemId(), inventDim.InventDimId);

                isDatasetProcessed = true;
                break;

            case tableNum(SalesQuotationLine):
                if (_isInit)
                {
                    SalesQuotationLine salesQuotationLine = SalesQuotationLine::findRecId(element.args().record().RecId);
                    inventDim.data(InventDim::find(salesQuotationLine.InventDimId));
                    salesLineInventTransId = salesQuotationLine.InventTransId;
                    fieldItemId.text(salesQuotationLine.ItemId);
                    fieldQty.realValue(salesQuotationLine.RemainInventPhysical);
                    custAccount = salesQuotationLine.CustAccount;
                    shippingDateRequested = salesQuotationLine.ShippingDateRequested;
                }

                salesATPSettingsMap = SalesATPCalculation::findSalesOrderSettings(element.itemId(), inventDim.InventDimId);
                
                isDatasetProcessed = true;
                break;

            case tableNum(InventTable):
            case tableNum(InventSum):
                InventTable inventTableCaller;

                if (_isInit)
                {
                    if (callerDataset == tableNum(InventTable))
                    {
                        inventTableCaller = element.args().record() as InventTable;
                    }
                    else
                    {
                        InventSum inventSumCaller = element.args().record() as InventSum;
                        inventTableCaller = InventTable::find(inventSumCaller.ItemId);
                    }
                    //
                    // In case if this form is opened from Item Details form, all controls for picking inventory dimensions
                    // must be filled with default dimensions for the item.
                    //
                    inventDim.initFromInventTable(inventTableCaller);

                    // InventDim with default item dimensions may not exist yet.
                    inventDim.data(InventDim::findOrCreate(inventDim));
                    //
                    // When querying InventDim after opening this form from Item Detail form, it is
                    // necessary to set query range to InventDimId. The reason is that InventTable does not have
                    // InventDimId field and therefore query will not be filtered by InventDimId.
                    //
                    qbrInventDimId.value(queryValue(inventDim.InventDimId));

                    fieldItemId.text(inventTableCaller.ItemId);
                    shippingDateRequested = DateTimeUtil::getToday(DateTimeUtil::getUserPreferredTimeZone());
                }
                else
                {
                    inventTableCaller = InventTable::find(element.itemId());
                }

                // in these forms, the menu item is under a "Sales" menu
                if (element.args().caller()
                    && (element.args().caller() is FormRun)
                    && (element.args().caller().name() == formStr(EcoResProductPerCompanyListPage)
                    || element.args().caller().name() == formStr(EcoResProductDetailsExtended)))
                {
                    salesATPSettingsMap = SalesATPCalculation::findSalesOrderSettings(inventTableCaller.ItemId, inventDim.InventDimId);
                }
                else
                {
                    salesATPSettingsMap = SalesATPCalculation::findItemOrderSettings(inventTableCaller.ItemId, inventDim.InventDimId);
                }
                
                isDatasetProcessed = true;
                break;
        }

        return isDatasetProcessed;
    }

]]></Source>
			</Method>
			<Method>
				<Name>setParameters</Name>
				<Source><![CDATA[
    /// <summary>
    ///     Sets itemId, item quantity and all relevant inventory dimensions for calculating ATP.
    /// </summary>
    /// <param name="_isInit">
    ///     Defines whether form is being initialized; optional.
    /// </param>
    /// <exception cref="Exception::Error">
    ///     Function has been called incorrectly. Occurs when this form is called without SalesLine, SalesQuotationLine
    ///     or InventTable buffer.
    /// </exception>
    public void setParameters(boolean _isInit = false)
    {
        boolean isDatasetProcessed = this.processCallerDataset(_isInit);
        
        if (!isDatasetProcessed)
        {
            throw error(Error::wrongUseOfFunction(funcName()));
        }

        inventDim_ds.setCurrent();
    }

]]></Source>
			</Method>
			<Method>
				<Name>updateDimensionDesign</Name>
				<Source><![CDATA[
    void updateDimensionDesign(InventDimFormDesignUpdate mode)
    {
        InventDimParm       inventDimParm;

        switch (mode)
        {
            case InventDimFormDesignUpdate::Init       :

                if (!inventDimCtrl_Frm)
                {
                    inventDimCtrl_Frm = InventDimCtrl::newFromFormValidDataSources(element,null);
                }

            case InventDimFormDesignUpdate::Active      :
            case InventDimFormDesignUpdate::LinkActive  :

                //Enable all active primary dimensions
                InventDimGroupSetup::newItemId(fieldItemId.text()).inventDimParmActivePrimaryDimension(inventDimParm);

                // Inventory location should always be enabled even if it's not a primary stocking,
                // because sales order cannot be further processed without specifying warehouse dimension.
                inventDimParm.InventLocationIdFlag = NoYes::Yes;

                inventDimCtrl_Frm.parmDimParmVisible(inventDimParm);
                inventDimCtrl_Frm.parmDimParmEnabled(inventDimParm);

                inventDimCtrl_Frm.formSetControls(true);
                break;
        }
    }

]]></Source>
			</Method>
			<Method>
				<Name>calculateATP</Name>
				<Source><![CDATA[
    void calculateATP(boolean _isInit)
    {
        inventDim.data(InventDim::findOrCreate(inventDim));
        element.setParameters(_isInit);
        element.fillSalesTmpATP();
        salesTmpATP_ds.executeQuery();

        element.updateTitle();
        Instruction.text(strfmt("@SCM:SalesATPInstruction", salesATPSettingsMap.atpTimeFence, salesATPSettingsMap.atpInclPlannedOrders? "@SCM:SalesATPIncluded" : "@SCM:SalesATPNotIncluded"));
    }

]]></Source>
			</Method>
			<Method>
				<Name>updateTitle</Name>
				<Source><![CDATA[
    void updateTitle()
    {
        HeaderTitle.text(fieldItemId.text());
    }

]]></Source>
			</Method>
		</Methods>
		<DataSources xmlns="">
			<DataSource>
				<Name>InventDim</Name>
				<Methods>
					<Method>
						<Name>init</Name>
						<Source><![CDATA[
        /// <summary>
        ///     Initializes query filters.
        /// </summary>
        public void init()
        {
            QueryBuildDataSource    qbdsInventDim;
            super();

            qbdsInventDim  = this.query().dataSourceTable(tableNum(InventDim));
            qbrInventDimId = qbdsInventDim.addRange(fieldNum(InventDim, InventDimId));
        }

]]></Source>
					</Method>
				</Methods>
				<Fields />
			</DataSource>
		</DataSources>
		<DataControls xmlns="">
			<Control>
				<Name>ATPCalculation</Name>
				<Type>Button</Type>
				<Methods>
					<Method>
						<Name>clicked</Name>
						<Source><![CDATA[
        public void clicked()
        {
            element.calculateATP(false);
        }

]]></Source>
					</Method>
				</Methods>
			</Control>
			<Control>
				<Name>FieldItemId</Name>
				<Type>String</Type>
				<Methods>
					<Method>
						<Name>modified</Name>
						<Source><![CDATA[
        public boolean modified()
        {
            boolean ret;

            ret = super();

            element.updateDimensionDesign(InventDimFormDesignUpdate::Active);
            element.setParameters();
            element.updateTitle();

            return ret;
        }

]]></Source>
					</Method>
					<Method>
						<Name>validate</Name>
						<Source><![CDATA[
        public boolean validate()
        {
            boolean ret;

            ret = super();

            if (ret)
            {
                if (!InventTable::exist(this.text()))
                    return checkFailed(strFmt(InventTable::txtNotExist(),this.text()));
            }

            return ret;
        }

]]></Source>
					</Method>
				</Methods>
			</Control>
		</DataControls>
		<Members xmlns="" />
	</SourceCode>
	<DataSources>
		<AxFormDataSource xmlns="">
			<Name>SalesTmpATP</Name>
			<Table>SalesTmpATP</Table>
			<Fields>
				<AxFormDataSourceField>
					<DataField>ATPDate</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ATPQty</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>dataAreaId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Issues</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>ProjectedOnhand</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>Receipts</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RecId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TableId</DataField>
				</AxFormDataSourceField>
			</Fields>
			<ReferencedDataSources />
			<AllowCreate>No</AllowCreate>
			<AllowDelete>No</AllowDelete>
			<AllowEdit>No</AllowEdit>
			<DataSourceLinks />
			<DerivedDataSources />
		</AxFormDataSource>
		<AxFormDataSource xmlns="">
			<Name>InventDim</Name>
			<Table>InventDim</Table>
			<Fields>
				<AxFormDataSourceField>
					<DataField>configId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>createdDateTime</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>dataAreaId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>inventBatchId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>InventColorId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>inventDimId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>InventGtdId_RU</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>InventLocationId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>InventOwnerId_RU</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>InventProfileId_RU</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>inventSerialId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>InventSiteId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>InventSizeId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>InventStatusId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>InventStyleId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>InventVersionId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>LicensePlateId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>modifiedBy</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>modifiedDateTime</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>RecId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>SHA1Hash</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>TableId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>wMSLocationId</DataField>
				</AxFormDataSourceField>
				<AxFormDataSourceField>
					<DataField>wMSPalletId</DataField>
				</AxFormDataSourceField>
			</Fields>
			<ReferencedDataSources />
			<AutoNotify>No</AutoNotify>
			<AllowCheck>No</AllowCheck>
			<AllowCreate>No</AllowCreate>
			<AllowDelete>No</AllowDelete>
			<Index>DimIdIdx</Index>
			<InsertAtEnd>No</InsertAtEnd>
			<InsertIfEmpty>No</InsertIfEmpty>
			<DataSourceLinks />
			<DerivedDataSources />
		</AxFormDataSource>
	</DataSources>
	<Design>
		<Caption xmlns="">@SCM:SalesATPHeaderTitle</Caption>
		<Pattern xmlns="">Custom</Pattern>
		<RightMargin xmlns="">30</RightMargin>
		<RightMarginMode xmlns="">Fixed</RightMarginMode>
		<ShowDeleteButton xmlns="">No</ShowDeleteButton>
		<ShowNewButton xmlns="">No</ShowNewButton>
		<Style xmlns="">DetailsFormTransaction</Style>
		<ViewEditMode xmlns="">View</ViewEditMode>
		<Width xmlns="">0</Width>
		<WidthMode xmlns="">Column</WidthMode>
		<WindowResize xmlns="">Fixed</WindowResize>
		<Controls xmlns="">
			<AxFormControl xmlns=""
				i:type="AxFormActionPaneControl">
				<Name>ActionPane</Name>
				<Type>ActionPane</Type>
				<FormControlExtension
					i:nil="true" />
				<Controls>
					<AxFormControl xmlns=""
						i:type="AxFormButtonGroupControl">
						<Name>ButtonGroup</Name>
						<Type>ButtonGroup</Type>
						<FormControlExtension
							i:nil="true" />
						<Controls>
							<AxFormControl xmlns=""
								i:type="AxFormButtonControl">
								<Name>ATPCalculation</Name>
								<Type>Button</Type>
								<FormControlExtension
									i:nil="true" />
								<ButtonDisplay>TextOnly</ButtonDisplay>
								<Text>@SCM:SalesATPRecalculateATPQty</Text>
							</AxFormControl>
						</Controls>
					</AxFormControl>
				</Controls>
			</AxFormControl>
			<AxFormControl xmlns=""
				i:type="AxFormStaticTextControl">
				<Name>HeaderTitle</Name>
				<AutoDeclaration>Yes</AutoDeclaration>
				<Type>StaticText</Type>
				<FormControlExtension
					i:nil="true" />
				<Style>TitleField</Style>
				<Text>@SCM:SalesATPHeaderTitle</Text>
			</AxFormControl>
			<AxFormControl xmlns=""
				i:type="AxFormStaticTextControl">
				<Name>Instruction</Name>
				<AutoDeclaration>Yes</AutoDeclaration>
				<Type>StaticText</Type>
				<FormControlExtension
					i:nil="true" />
				<Style>MainInstruction</Style>
			</AxFormControl>
			<AxFormControl xmlns=""
				i:type="AxFormGroupControl">
				<Name>GroupFilters</Name>
				<ElementPosition>1073741823</ElementPosition>
				<FilterExpression>%1</FilterExpression>
				<HeightMode>Auto</HeightMode>
				<Type>Group</Type>
				<VerticalSpacing>-1</VerticalSpacing>
				<WidthMode>Auto</WidthMode>
				<FormControlExtension
					i:nil="true" />
				<Controls>
					<AxFormControl xmlns=""
						i:type="AxFormRealControl">
						<Name>FieldQty</Name>
						<AutoDeclaration>Yes</AutoDeclaration>
						<ElementPosition>1610612734</ElementPosition>
						<FilterExpression>%1</FilterExpression>
						<HeightMode>Auto</HeightMode>
						<Type>Real</Type>
						<VerticalSpacing>-1</VerticalSpacing>
						<WidthMode>Auto</WidthMode>
						<FormControlExtension
							i:nil="true" />
						<ExtendedDataType>ProductQuantity</ExtendedDataType>
						<NoOfDecimals>-1</NoOfDecimals>
					</AxFormControl>
					<AxFormControl xmlns=""
						i:type="AxFormStringControl">
						<Name>FieldItemId</Name>
						<AutoDeclaration>Yes</AutoDeclaration>
						<ElementPosition>1073741823</ElementPosition>
						<FilterExpression>%1</FilterExpression>
						<HeightMode>Auto</HeightMode>
						<Type>String</Type>
						<VerticalSpacing>-1</VerticalSpacing>
						<WidthMode>Auto</WidthMode>
						<FormControlExtension
							i:nil="true" />
						<ExtendedDataType>ItemId</ExtendedDataType>
						<Mandatory>Yes</Mandatory>
					</AxFormControl>
					<AxFormControl xmlns=""
						i:type="AxFormGroupControl">
						<Name>GroupInventoryDimensions</Name>
						<AutoDeclaration>Yes</AutoDeclaration>
						<ElementPosition>1879048190</ElementPosition>
						<FilterExpression>%1</FilterExpression>
						<HeightMode>Auto</HeightMode>
						<Type>Group</Type>
						<VerticalSpacing>-1</VerticalSpacing>
						<WidthMode>Auto</WidthMode>
						<FormControlExtension
							i:nil="true" />
						<Controls>
							<AxFormControl xmlns=""
								i:type="AxFormStringControl">
								<Name>GroupTopRight_InventSiteId</Name>
								<ElementPosition>2013265918</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<HeightMode>Auto</HeightMode>
								<Type>String</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<WidthMode>Auto</WidthMode>
								<FormControlExtension
									i:nil="true" />
								<DataField>InventSiteId</DataField>
								<DataSource>InventDim</DataSource>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormStringControl">
								<Name>GroupTopRight_InventLocationId</Name>
								<ElementPosition>2080374782</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<HeightMode>Auto</HeightMode>
								<Type>String</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<WidthMode>Auto</WidthMode>
								<FormControlExtension
									i:nil="true" />
								<DataField>InventLocationId</DataField>
								<DataSource>InventDim</DataSource>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormStringControl">
								<Name>GroupTopRight_configId</Name>
								<AutoDeclaration>Yes</AutoDeclaration>
								<ElementPosition>1073741823</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<HeightMode>Auto</HeightMode>
								<Type>String</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<WidthMode>Auto</WidthMode>
								<FormControlExtension
									i:nil="true" />
								<DataField>configId</DataField>
								<DataSource>InventDim</DataSource>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormStringControl">
								<Name>GroupTopRight_InventSizeId</Name>
								<ElementPosition>1610612734</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<HeightMode>Auto</HeightMode>
								<Type>String</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<WidthMode>Auto</WidthMode>
								<FormControlExtension
									i:nil="true" />
								<DataField>InventSizeId</DataField>
								<DataSource>InventDim</DataSource>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormStringControl">
								<Name>GroupTopRight_InventColorId</Name>
								<ElementPosition>1879048190</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<HeightMode>Auto</HeightMode>
								<Type>String</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<WidthMode>Auto</WidthMode>
								<FormControlExtension
									i:nil="true" />
								<DataField>InventColorId</DataField>
								<DataSource>InventDim</DataSource>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormStringControl">
								<Name>GroupInventoryDimensions_InventStyleId</Name>
								<FilterExpression>%1</FilterExpression>
								<HeightMode>Auto</HeightMode>
								<Type>String</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<WidthMode>Auto</WidthMode>
								<FormControlExtension
									i:nil="true" />
								<DataField>InventStyleId</DataField>
								<DataSource>InventDim</DataSource>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormStringControl">
								<Name>GroupTopRight_InventVersionId</Name>
								<ElementPosition>1879048190</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<HeightMode>Auto</HeightMode>
								<Type>String</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<WidthMode>Auto</WidthMode>
								<FormControlExtension
									i:nil="true" />
								<DataField>InventVersionId</DataField>
								<DataSource>InventDim</DataSource>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormStringControl">
								<Name>GroupTopRight_inventBatchId</Name>
								<ElementPosition>2113929214</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<HeightMode>Auto</HeightMode>
								<Type>String</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<WidthMode>Auto</WidthMode>
								<FormControlExtension
									i:nil="true" />
								<DataField>inventBatchId</DataField>
								<DataSource>InventDim</DataSource>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormStringControl">
								<Name>GroupTopRight_wMSLocationId</Name>
								<ElementPosition>2130706430</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<HeightMode>Auto</HeightMode>
								<Type>String</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<WidthMode>Auto</WidthMode>
								<FormControlExtension
									i:nil="true" />
								<DataField>wMSLocationId</DataField>
								<DataSource>InventDim</DataSource>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormStringControl">
								<Name>GroupTopRight_inventSerialId</Name>
								<ElementPosition>2143289342</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<HeightMode>Auto</HeightMode>
								<Type>String</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<WidthMode>Auto</WidthMode>
								<FormControlExtension
									i:nil="true" />
								<DataField>inventSerialId</DataField>
								<DataSource>InventDim</DataSource>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormStringControl">
								<Name>GroupInventoryDimensions_InventStatusId</Name>
								<FilterExpression>%1</FilterExpression>
								<HeightMode>Auto</HeightMode>
								<Type>String</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<WidthMode>Auto</WidthMode>
								<FormControlExtension
									i:nil="true" />
								<DataField>InventStatusId</DataField>
								<DataSource>InventDim</DataSource>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormStringControl">
								<Name>GroupInventoryDimensions_LicensePlateId</Name>
								<FilterExpression>%1</FilterExpression>
								<HeightMode>Auto</HeightMode>
								<Type>String</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<WidthMode>Auto</WidthMode>
								<FormControlExtension
									i:nil="true" />
								<DataField>LicensePlateId</DataField>
								<DataSource>InventDim</DataSource>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormStringControl">
								<Name>GroupInventoryDimensions_InventOwnerId_RU</Name>
								<FilterExpression>%1</FilterExpression>
								<HeightMode>Auto</HeightMode>
								<Type>String</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<WidthMode>Auto</WidthMode>
								<FormControlExtension
									i:nil="true" />
								<DataField>InventOwnerId_RU</DataField>
								<DataSource>InventDim</DataSource>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormStringControl">
								<Name>GroupInventoryDimensions_InventProfileId_RU</Name>
								<FilterExpression>%1</FilterExpression>
								<HeightMode>Auto</HeightMode>
								<Type>String</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<WidthMode>Auto</WidthMode>
								<FormControlExtension
									i:nil="true" />
								<DataField>InventProfileId_RU</DataField>
								<DataSource>InventDim</DataSource>
							</AxFormControl>
							<AxFormControl xmlns=""
								i:type="AxFormStringControl">
								<Name>GroupInventoryDimensions_InventGtdId_RU</Name>
								<FilterExpression>%1</FilterExpression>
								<HeightMode>Auto</HeightMode>
								<Type>String</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<WidthMode>Auto</WidthMode>
								<FormControlExtension
									i:nil="true" />
								<DataField>InventGtdId_RU</DataField>
								<DataSource>InventDim</DataSource>
							</AxFormControl>
						</Controls>
						<ArrangeMethod>HorizontalLeft</ArrangeMethod>
						<RightMargin>10</RightMargin>
						<RightMarginMode>Fixed</RightMarginMode>
						<DataGroup>InventoryDimensions</DataGroup>
						<DataSource>InventDim</DataSource>
					</AxFormControl>
				</Controls>
				<ArrangeMethod>HorizontalLeft</ArrangeMethod>
				<Caption>@SCM:SalesATPFilters</Caption>
				<ViewEditMode>Edit</ViewEditMode>
			</AxFormControl>
			<AxFormControl xmlns=""
				i:type="AxFormGroupControl">
				<Name>GroupATP</Name>
				<HeightMode>SizeToAvailable</HeightMode>
				<Type>Group</Type>
				<WidthMode>SizeToAvailable</WidthMode>
				<FormControlExtension
					i:nil="true" />
				<Controls>
					<AxFormControl xmlns=""
						i:type="AxFormGroupControl">
						<Name>GroupATPQuantity</Name>
						<HeightMode>SizeToAvailable</HeightMode>
						<Type>Group</Type>
						<WidthMode>SizeToAvailable</WidthMode>
						<FormControlExtension
							i:nil="true" />
						<Controls>
							<AxFormControl xmlns=""
								i:type="AxFormGridControl">
								<Name>Grid</Name>
								<ElementPosition>1073741823</ElementPosition>
								<FilterExpression>%1</FilterExpression>
								<Height>0</Height>
								<Type>Grid</Type>
								<VerticalSpacing>-1</VerticalSpacing>
								<Width>0</Width>
								<FormControlExtension
									i:nil="true" />
								<Controls>
									<AxFormControl xmlns=""
										i:type="AxFormDateControl">
										<Name>SalesTmpATP_Date</Name>
										<ElementPosition>1073741823</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>Date</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>ATPDate</DataField>
										<DataSource>SalesTmpATP</DataSource>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormRealControl">
										<Name>SalesTmpATP_ATP</Name>
										<ElementPosition>1610612734</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<HelpText>@FieldDescriptions_CostManagement:SalesATP_SalesTmpATP_ATP</HelpText>
										<Type>Real</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>ATPQty</DataField>
										<DataSource>SalesTmpATP</DataSource>
										<NoOfDecimals>-1</NoOfDecimals>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormRealControl">
										<Name>SalesTmpATP_Receipts</Name>
										<ElementPosition>1879048190</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<HelpText>@FieldDescriptions_CostManagement:SalesATP_SalesTmpATP_Receipts</HelpText>
										<Type>Real</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>Receipts</DataField>
										<DataSource>SalesTmpATP</DataSource>
										<NoOfDecimals>-1</NoOfDecimals>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormRealControl">
										<Name>SalesTmpATP_Issues</Name>
										<ElementPosition>2013265918</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<HelpText>@FieldDescriptions_CostManagement:SalesATP_SalesTmpATP_Issues</HelpText>
										<Type>Real</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>Issues</DataField>
										<DataSource>SalesTmpATP</DataSource>
										<NoOfDecimals>-1</NoOfDecimals>
									</AxFormControl>
									<AxFormControl xmlns=""
										i:type="AxFormRealControl">
										<Name>SalesTmpATP_ProjectedOnhand</Name>
										<ElementPosition>2080374782</ElementPosition>
										<FilterExpression>%1</FilterExpression>
										<HeightMode>Auto</HeightMode>
										<Type>Real</Type>
										<VerticalSpacing>-1</VerticalSpacing>
										<WidthMode>Auto</WidthMode>
										<FormControlExtension
											i:nil="true" />
										<DataField>ProjectedOnhand</DataField>
										<DataSource>SalesTmpATP</DataSource>
										<NoOfDecimals>-1</NoOfDecimals>
									</AxFormControl>
								</Controls>
								<DataSource>SalesTmpATP</DataSource>
							</AxFormControl>
						</Controls>
						<Caption>@SCM:SalesATPQty</Caption>
					</AxFormControl>
					<AxFormControl xmlns=""
						i:type="AxFormGroupControl">
						<Name>GroupATPGraph</Name>
						<HeightMode>SizeToAvailable</HeightMode>
						<Type>Group</Type>
						<WidthMode>SizeToAvailable</WidthMode>
						<FormControlExtension
							i:nil="true" />
						<Controls>
							<AxFormControl xmlns=""
								i:type="AxFormContainerControl">
								<Name>ChartATP</Name>
								<AutoDeclaration>Yes</AutoDeclaration>
								<HeightMode>SizeToAvailable</HeightMode>
								<Type>Container</Type>
								<WidthMode>SizeToAvailable</WidthMode>
								<FormControlExtension>
									<Name>SysChart</Name>
									<ExtensionComponents>
										<AxFormControlExtensionComponent xmlns=""
											i:type="AxFormControlExtensionComponentComposite">
											<Name>parmDataSets</Name>
											<ExtensionComponents>
												<AxFormControlExtensionComponent xmlns=""
													i:type="AxFormControlExtensionComponentLeaf">
													<Name>ChartBinding</Name>
													<ComponentType>SysBuildChartDataSet</ComponentType>
													<ExtensionProperties>
														<AxFormControlExtensionProperty>
															<Name>parmDataSource</Name>
															<Type>String</Type>
															<Value>SalesTmpATP</Value>
														</AxFormControlExtensionProperty>
														<AxFormControlExtensionProperty>
															<Name>parmCategoryField</Name>
															<Type>String</Type>
															<Value>ATPDate</Value>
														</AxFormControlExtensionProperty>
														<AxFormControlExtensionProperty>
															<Name>parmGroupBy</Name>
															<Type>String</Type>
														</AxFormControlExtensionProperty>
													</ExtensionProperties>
												</AxFormControlExtensionComponent>
											</ExtensionComponents>
										</AxFormControlExtensionComponent>
										<AxFormControlExtensionComponent xmlns=""
											i:type="AxFormControlExtensionComponentComposite">
											<Name>parmMeasures</Name>
											<ExtensionComponents>
												<AxFormControlExtensionComponent xmlns=""
													i:type="AxFormControlExtensionComponentLeaf">
													<Name>ChartSeriesATPQty</Name>
													<ComponentType>SysBuildChartMeasure</ComponentType>
													<ExtensionProperties>
														<AxFormControlExtensionProperty>
															<Name>parmChartType</Name>
															<Type>Enum</Type>
															<TypeName>SysChartType</TypeName>
															<Value>Column</Value>
														</AxFormControlExtensionProperty>
														<AxFormControlExtensionProperty>
															<Name>parmTitle</Name>
															<Type>String</Type>
															<Value>@SCM:SalesATPQty</Value>
														</AxFormControlExtensionProperty>
														<AxFormControlExtensionProperty>
															<Name>parmDataLabels</Name>
															<Type>Enum</Type>
															<TypeName>SysChartDataLabels</TypeName>
															<Value>None</Value>
														</AxFormControlExtensionProperty>
														<AxFormControlExtensionProperty>
															<Name>parmDataSet</Name>
															<Type>String</Type>
															<Value>ChartBinding</Value>
														</AxFormControlExtensionProperty>
														<AxFormControlExtensionProperty>
															<Name>parmMeasureField</Name>
															<Type>String</Type>
															<Value>ATPQty</Value>
														</AxFormControlExtensionProperty>
														<AxFormControlExtensionProperty>
															<Name>parmUseSecondaryYAxis</Name>
															<Type>Enum</Type>
															<TypeName>boolean</TypeName>
															<Value>False</Value>
														</AxFormControlExtensionProperty>
														<AxFormControlExtensionProperty>
															<Name>parmSecondaryYAxisName</Name>
															<Type>String</Type>
														</AxFormControlExtensionProperty>
														<AxFormControlExtensionProperty>
															<Name>parmClickMenuItemType</Name>
															<Type>Enum</Type>
															<TypeName>MenuItemType</TypeName>
														</AxFormControlExtensionProperty>
														<AxFormControlExtensionProperty>
															<Name>parmClickMenuItemName</Name>
															<Type>ExtendedDataType</Type>
															<TypeName>MenuItemName</TypeName>
														</AxFormControlExtensionProperty>
														<AxFormControlExtensionProperty>
															<Name>parmKeyField</Name>
															<Type>String</Type>
														</AxFormControlExtensionProperty>
														<AxFormControlExtensionProperty>
															<Name>parmParameter1</Name>
															<Type>String</Type>
														</AxFormControlExtensionProperty>
														<AxFormControlExtensionProperty>
															<Name>parmParameter2</Name>
															<Type>String</Type>
														</AxFormControlExtensionProperty>
														<AxFormControlExtensionProperty>
															<Name>parmDataLabelsFormat</Name>
															<Type>String</Type>
														</AxFormControlExtensionProperty>
														<AxFormControlExtensionProperty>
															<Name>parmColor</Name>
															<Type>String</Type>
														</AxFormControlExtensionProperty>
													</ExtensionProperties>
												</AxFormControlExtensionComponent>
												<AxFormControlExtensionComponent xmlns=""
													i:type="AxFormControlExtensionComponentLeaf">
													<Name>ChartSeriesOrderQty</Name>
													<ComponentType>SysBuildChartMeasure</ComponentType>
													<ExtensionProperties>
														<AxFormControlExtensionProperty>
															<Name>parmChartType</Name>
															<Type>Enum</Type>
															<TypeName>SysChartType</TypeName>
															<Value>Line</Value>
														</AxFormControlExtensionProperty>
														<AxFormControlExtensionProperty>
															<Name>parmTitle</Name>
															<Type>String</Type>
															<Value>@SCM:SalesATPOrderQuantity</Value>
														</AxFormControlExtensionProperty>
														<AxFormControlExtensionProperty>
															<Name>parmDataLabels</Name>
															<Type>Enum</Type>
															<TypeName>SysChartDataLabels</TypeName>
															<Value>None</Value>
														</AxFormControlExtensionProperty>
														<AxFormControlExtensionProperty>
															<Name>parmDataSet</Name>
															<Type>String</Type>
															<Value>ChartBinding</Value>
														</AxFormControlExtensionProperty>
														<AxFormControlExtensionProperty>
															<Name>parmMeasureField</Name>
															<Type>String</Type>
															<Value>OrderQty</Value>
														</AxFormControlExtensionProperty>
														<AxFormControlExtensionProperty>
															<Name>parmUseSecondaryYAxis</Name>
															<Type>Enum</Type>
															<TypeName>boolean</TypeName>
															<Value>False</Value>
														</AxFormControlExtensionProperty>
														<AxFormControlExtensionProperty>
															<Name>parmSecondaryYAxisName</Name>
															<Type>String</Type>
														</AxFormControlExtensionProperty>
														<AxFormControlExtensionProperty>
															<Name>parmClickMenuItemType</Name>
															<Type>Enum</Type>
															<TypeName>MenuItemType</TypeName>
														</AxFormControlExtensionProperty>
														<AxFormControlExtensionProperty>
															<Name>parmClickMenuItemName</Name>
															<Type>ExtendedDataType</Type>
															<TypeName>MenuItemName</TypeName>
														</AxFormControlExtensionProperty>
														<AxFormControlExtensionProperty>
															<Name>parmKeyField</Name>
															<Type>String</Type>
														</AxFormControlExtensionProperty>
														<AxFormControlExtensionProperty>
															<Name>parmParameter1</Name>
															<Type>String</Type>
														</AxFormControlExtensionProperty>
														<AxFormControlExtensionProperty>
															<Name>parmParameter2</Name>
															<Type>String</Type>
														</AxFormControlExtensionProperty>
														<AxFormControlExtensionProperty>
															<Name>parmDataLabelsFormat</Name>
															<Type>String</Type>
														</AxFormControlExtensionProperty>
														<AxFormControlExtensionProperty>
															<Name>parmColor</Name>
															<Type>String</Type>
														</AxFormControlExtensionProperty>
													</ExtensionProperties>
												</AxFormControlExtensionComponent>
											</ExtensionComponents>
										</AxFormControlExtensionComponent>
										<AxFormControlExtensionComponent xmlns=""
											i:type="AxFormControlExtensionComponentComposite">
											<Name>parmSecondaryYAxes</Name>
											<ExtensionComponents />
										</AxFormControlExtensionComponent>
									</ExtensionComponents>
									<ExtensionProperties>
										<AxFormControlExtensionProperty>
											<Name>parmLegendEnabled</Name>
											<Type>Enum</Type>
											<TypeName>boolean</TypeName>
											<Value>True</Value>
										</AxFormControlExtensionProperty>
										<AxFormControlExtensionProperty>
											<Name>parmLegendAlignment</Name>
											<Type>Enum</Type>
											<TypeName>SysChartHorizontalAlignment</TypeName>
											<Value>Auto</Value>
										</AxFormControlExtensionProperty>
										<AxFormControlExtensionProperty>
											<Name>parmLegendPosition</Name>
											<Type>Enum</Type>
											<TypeName>SysChartVerticalAlignment</TypeName>
											<Value>Auto</Value>
										</AxFormControlExtensionProperty>
										<AxFormControlExtensionProperty>
											<Name>parmLegendLayout</Name>
											<Type>Enum</Type>
											<TypeName>SysChartLegendLayout</TypeName>
										</AxFormControlExtensionProperty>
										<AxFormControlExtensionProperty>
											<Name>parmTitleAlignment</Name>
											<Type>Enum</Type>
											<TypeName>SysChartHorizontalAlignment</TypeName>
											<Value>Auto</Value>
										</AxFormControlExtensionProperty>
										<AxFormControlExtensionProperty>
											<Name>parmText</Name>
											<Type>String</Type>
										</AxFormControlExtensionProperty>
										<AxFormControlExtensionProperty>
											<Name>parmTitlePosition</Name>
											<Type>Enum</Type>
											<TypeName>SysChartVerticalAlignment</TypeName>
											<Value>Auto</Value>
										</AxFormControlExtensionProperty>
										<AxFormControlExtensionProperty>
											<Name>parmYAxisTitle</Name>
											<Type>String</Type>
										</AxFormControlExtensionProperty>
										<AxFormControlExtensionProperty>
											<Name>parmYAxisVisible</Name>
											<Type>Enum</Type>
											<TypeName>boolean</TypeName>
											<Value>True</Value>
										</AxFormControlExtensionProperty>
										<AxFormControlExtensionProperty>
											<Name>parmXAxisTitle</Name>
											<Type>String</Type>
										</AxFormControlExtensionProperty>
										<AxFormControlExtensionProperty>
											<Name>parmClickMenuItemType</Name>
											<Type>Enum</Type>
											<TypeName>MenuItemType</TypeName>
										</AxFormControlExtensionProperty>
										<AxFormControlExtensionProperty>
											<Name>parmClickMenuItemName</Name>
											<Type>ExtendedDataType</Type>
											<TypeName>MenuItemName</TypeName>
										</AxFormControlExtensionProperty>
										<AxFormControlExtensionProperty>
											<Name>parmInteractionsDisabled</Name>
											<Type>Enum</Type>
											<TypeName>boolean</TypeName>
											<Value>False</Value>
										</AxFormControlExtensionProperty>
										<AxFormControlExtensionProperty>
											<Name>parmToolbarEnabled</Name>
											<Type>Enum</Type>
											<TypeName>boolean</TypeName>
											<Value>False</Value>
										</AxFormControlExtensionProperty>
										<AxFormControlExtensionProperty>
											<Name>parmSerializedButtons</Name>
											<Type>String</Type>
										</AxFormControlExtensionProperty>
										<AxFormControlExtensionProperty>
											<Name>parmZoomLimit</Name>
											<Type>Enum</Type>
											<TypeName>SysChartDateTimeInterval</TypeName>
										</AxFormControlExtensionProperty>
										<AxFormControlExtensionProperty>
											<Name>parmPadMargin</Name>
											<Type>Int32</Type>
											<Value>0</Value>
										</AxFormControlExtensionProperty>
										<AxFormControlExtensionProperty>
											<Name>parmCrosshairsEnabled</Name>
											<Type>Enum</Type>
											<TypeName>boolean</TypeName>
											<Value>False</Value>
										</AxFormControlExtensionProperty>
										<AxFormControlExtensionProperty>
											<Name>parmTooltipShared</Name>
											<Type>Enum</Type>
											<TypeName>boolean</TypeName>
											<Value>False</Value>
										</AxFormControlExtensionProperty>
										<AxFormControlExtensionProperty>
											<Name>parmYAxisLabelsHidden</Name>
											<Type>Enum</Type>
											<TypeName>boolean</TypeName>
											<Value>False</Value>
										</AxFormControlExtensionProperty>
										<AxFormControlExtensionProperty>
											<Name>parmYAxisMinValue</Name>
											<Type>String</Type>
										</AxFormControlExtensionProperty>
										<AxFormControlExtensionProperty>
											<Name>parmYAxisMaxValue</Name>
											<Type>String</Type>
										</AxFormControlExtensionProperty>
									</ExtensionProperties>
								</FormControlExtension>
								<Controls />
							</AxFormControl>
						</Controls>
						<Caption>@SCM:SalesATPQtyGraphical</Caption>
					</AxFormControl>
				</Controls>
				<ArrangeMethod>HorizontalLeft</ArrangeMethod>
			</AxFormControl>
		</Controls>
	</Design>
	<Parts />
</AxForm>