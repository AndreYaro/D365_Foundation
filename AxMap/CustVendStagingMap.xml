<?xml version="1.0" encoding="utf-8"?>
<AxMap xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
	<Name>CustVendStagingMap</Name>
	<SourceCode>
		<Declaration><![CDATA[
public class CustVendStagingMap extends common
{
}
]]></Declaration>
		<Methods>
			<Method>
				<Name>performSetBasedUpdateOfCustVendNumber</Name>
				<Source><![CDATA[
    internal static void performSetBasedUpdateOfCustVendNumber(DMFDefinitionGroupExecution _dmfDefinitionGroupExecution, 
        CustVendStagingMap _staging,
        FieldName _entityFieldName,
        CustVendACType _custVendACType)
    {
        if (!CustVendStagingMap::isAutoGenerated(_dmfDefinitionGroupExecution, _entityFieldName))
        {
            return;
        }

        CustVendNumberProvider provider = CustVendNumberProvider::construct(_custVendACType);

        CustVendNumbersTmp custVendNumbersTmp;
        provider.generateNumberSequenceValues(_dmfDefinitionGroupExecution, _staging, custVendNumbersTmp);

        switch (_staging.TableId)
        {
            case tableNum(CustCustomerV3Staging) :
                ttsbegin;
                CustCustomerV3Staging custCustomerV3Staging;
                custCustomerV3Staging.skipDataMethods(true);
                custCustomerV3Staging.skipEvents(true);

                update_recordset custCustomerV3Staging
                    setting CustomerAccount = custVendNumbersTmp.CustVendAccount
                    join CustVendAccount from custVendNumbersTmp
                        where custVendNumbersTmp.RefRecId == custCustomerV3Staging.RecId;
                ttscommit;
                break;

            case tableNum(VendVendorV2Staging) :
                ttsbegin;
                VendVendorV2Staging vendVendorV2Staging;
                vendVendorV2Staging.skipDataMethods(true);
                vendVendorV2Staging.skipEvents(true);

                update_recordset vendVendorV2Staging
                    setting VendorAccountNumber = custVendNumbersTmp.CustVendAccount
                    join CustVendAccount from custVendNumbersTmp
                        where custVendNumbersTmp.RefRecId == vendVendorV2Staging.RecId;
                ttscommit;
                break;

            case tableNum(RetailVendVendorV3Staging) :
                ttsbegin;
                RetailVendVendorV3Staging retailVendVendorV3Staging;
                retailVendVendorV3Staging.skipDataMethods(true);
                retailVendVendorV3Staging.skipEvents(true);

                update_recordset retailVendVendorV3Staging
                    setting VendorAccountNumber = custVendNumbersTmp.CustVendAccount
                    join CustVendAccount from custVendNumbersTmp
                        where custVendNumbersTmp.RefRecId == retailVendVendorV3Staging.RecId;
                ttscommit;
                break;

            default :
                throw error(Error::wrongUseOfFunction(funcName()));
        }
    }

]]></Source>
			</Method>
			<Method>
				<Name>isAutoGenerated</Name>
				<Source><![CDATA[
    private static boolean isAutoGenerated(DMFDefinitionGroupExecution _dmfDefinitionGroupExecution,
        FieldName _entityFieldName)
    {
        DMFSourceXMLToEntityMap sourceXMLToEntityMap;

        if (_dmfDefinitionGroupExecution.DefinitionGroup
            && _dmfDefinitionGroupExecution.Entity
            && _entityFieldName)
        {
            select firstonly sourceXMLToEntityMap
                where sourceXMLToEntityMap.DefinitionGroup  == _dmfDefinitionGroupExecution.DefinitionGroup
                   && sourceXMLToEntityMap.Entity           == _dmfDefinitionGroupExecution.Entity
                   && sourceXMLToEntityMap.EntityField      == _entityFieldName;
        }

        return sourceXMLToEntityMap.IsAutoGenerated;
    }

]]></Source>
			</Method>
		</Methods>
	</SourceCode>
	<FieldGroups />
	<Fields>
		<AxMapBaseField xmlns=""
			i:type="AxMapFieldString">
			<Name>CustVendAccount</Name>
			<ExtendedDataType>CustVendAC</ExtendedDataType>
		</AxMapBaseField>
		<AxMapBaseField xmlns=""
			i:type="AxMapFieldString">
			<Name>CustVendGroup</Name>
			<ExtendedDataType>SysGroup</ExtendedDataType>
		</AxMapBaseField>
		<AxMapBaseField xmlns=""
			i:type="AxMapFieldString">
			<Name>DefinitionGroup</Name>
			<AllowEdit>No</AllowEdit>
			<ExtendedDataType>DMFDefinitionGroupName</ExtendedDataType>
			<Mandatory>Yes</Mandatory>
		</AxMapBaseField>
		<AxMapBaseField xmlns=""
			i:type="AxMapFieldString">
			<Name>ExecutionId</Name>
			<AllowEdit>No</AllowEdit>
			<ExtendedDataType>DMFExecutionId</ExtendedDataType>
			<Mandatory>Yes</Mandatory>
		</AxMapBaseField>
		<AxMapBaseField xmlns=""
			i:type="AxMapFieldEnum">
			<Name>TransferStatus</Name>
			<EnumType>DMFTransferStatus</EnumType>
		</AxMapBaseField>
	</Fields>
	<Mappings />
</AxMap>