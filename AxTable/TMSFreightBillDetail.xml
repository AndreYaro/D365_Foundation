<?xml version="1.0" encoding="utf-8"?>
<AxTable xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
	<Name>TMSFreightBillDetail</Name>
	<SourceCode>
		<Declaration><![CDATA[
public class TMSFreightBillDetail extends common
{
}
]]></Declaration>
		<Methods>
			<Method>
				<Name>amountMatched</Name>
				<Source><![CDATA[
    /// <summary>
    /// Calculates the matched amount of a freight bill.
    /// </summary>
    /// <returns>
    /// The matched amount of a freight bill.
    /// </returns>
    Amount amountMatched()
    {
        return TMSFreightBillDetail::calcAmountMatched(this.RecId);
    }

]]></Source>
			</Method>
			<Method>
				<Name>amountNotMatched</Name>
				<Source><![CDATA[
    /// <summary>
    ///     Displays the amount of the freight bill that is not matched
    /// </summary>
    /// <returns>
    ///     returns the difference of the amount and the portion that is matched.
    /// </returns>
    Amount amountNotMatched()
    {
        return this.RateCur - this.amountMatched();
    }

]]></Source>
			</Method>
			<Method>
				<Name>amountReconciled</Name>
				<Source><![CDATA[
    /// <summary>
    /// Calculates the reconciled amount of a freight bill.
    /// </summary>
    /// <returns>
    /// The reconciled amount of a freight bill.
    /// </returns>
    Amount amountReconciled()
    {
        return TMSFreightBillDetail::calcAmountReconciled(this.RecId);
    }

]]></Source>
			</Method>
			<Method>
				<Name>amountRemaining</Name>
				<Source><![CDATA[
    /// <summary>
    ///     Displays the amount of the freight bill that has yet to be assigned.
    /// </summary>
    /// <returns>
    ///     returns the difference of the amount of the freight bill and the sum of the matched and reconciled amounts.
    /// </returns>
    Amount amountRemaining()
    {
        return TMSFreightBillDetail::calcAmountRemaining(this.RecId, this.RateCur);
    }

]]></Source>
			</Method>
			<Method>
				<Name>destinationLogisticsPostalAddress</Name>
				<Source><![CDATA[
    /// <summary>
    /// Finds the destination address written on the freight bill.
    /// </summary>
    /// <returns>
    /// The destination address written on the freight bill.
    /// </returns>
    public LogisticsPostalAddress destinationLogisticsPostalAddress()
    {
        return LogisticsPostalAddress::findRecId(this.DestinationPostalAddress);
    }

]]></Source>
			</Method>
			<Method>
				<Name>displayAmountRemaining</Name>
				<Source><![CDATA[
    /// <summary>
    /// Method to display the amount of the freight bill that has yet to be assigned.
    /// </summary>
    /// <returns>
    /// The amount of the freight bill that has yet to be assigned.
    /// </returns>
    display Amount displayAmountRemaining()
    {
        return this.amountRemaining();
    }

]]></Source>
			</Method>
			<Method>
				<Name>initValue</Name>
				<Source><![CDATA[
    // WHS - If any fields on this table are changed, be sure to change any corresponding fields on TMSInvoiceLine and TMSTmpFreightBillFilter
    public void initValue()
    {
        super();

        this.setFreightBillId();
    }

]]></Source>
			</Method>
			<Method>
				<Name>matchRecord</Name>
				<Source><![CDATA[
    /// <summary>
    ///     Creates a match record between a freight bill detail and an invoice line.
    /// </summary>
    /// <param name="_invoiceLine">
    ///     The invoice line that will be matched to the freight bill detail.
    /// </param>
    void matchRecord(TMSInvoiceLine _invoiceLine)
    {
        TMSFBInvMatch     matchedRecords;
        Amount            amount;
        Amount            invoiceRemain;
        Amount            freightBillRemain;

        ttsbegin;

        invoiceRemain = _invoiceLine.amountRemaining();

        if (invoiceRemain && this.checkFreightBillCanMatchToInvoice(_invoiceLine))
        {
            freightBillRemain = TMSFreightBillDetail::calcAmountRemaining(this.RecId, this.RateCur);

            amount = freightBillRemain <= invoiceRemain ? freightBillRemain : invoiceRemain;

            matchedRecords.FreightBillDetailRecId    = this.RecId;
            matchedRecords.InvoiceLineRecId          = _invoiceLine.RecId;
            matchedRecords.RateCur                   = amount;
            if (!matchedRecords.validateWrite())
            {
                throw error(strFmt("@TRX:TMSCannotInsertRecordInTable", tablePName(TMSFBInvMatch)));
            }
            else
            {
                matchedRecords.insert();
            }

            this.selectForUpdate(true);

            freightBillRemain = TMSFreightBillDetail::calcAmountRemaining(this.RecId, this.RateCur);

            if (freightBillRemain == 0)
            {
                this.FreightBillMatchStatus = TMSFreightBillMatchStatus::FullyMatched;
            }
            else
            {
                this.FreightBillMatchStatus = TMSFreightBillMatchStatus::PartiallyMatched;
            }

            if (!this.validateWrite())
            {
                throw error(strFmt("@TRX:TMSCannotWriteRecordInTable", tablePName(TMSFreightBillDetail)));
            }
            else
            {
                this.write();
            }
        }

        ttscommit;
    }

]]></Source>
			</Method>
			<Method>
				<Name>checkFreightBillCanMatchToInvoice</Name>
				<Source><![CDATA[
    /// <summary>
    /// Check whether freight bill can match to invoice.
    /// </summary>
    /// <param name = "_invoiceLine">
    /// The invoice line that will be matched to the freight bill detail.
    /// </param>
    /// <returns>
    /// true if freight bill can match to invoice; Otherwise, false.
    /// </returns>
    private boolean checkFreightBillCanMatchToInvoice(TMSInvoiceLine _invoiceLine)
    {
        if (_invoiceLine.CurrencyCode != this.CurrencyCode)
        {
            return checkFailed("@TRX:TMSMatchFreightBillAndInvoice_FailedToMatch_DifferentCurrency");
        }

        return true;
    }

]]></Source>
			</Method>
			<Method>
				<Name>originLogisticsPostalAddress</Name>
				<Source><![CDATA[
    /// <summary>
    /// Finds the origin address written on the freight bill.
    /// </summary>
    /// <returns>
    /// The origin address written on the freight bill.
    /// </returns>
    public LogisticsPostalAddress originLogisticsPostalAddress()
    {
        return LogisticsPostalAddress::findRecId(this.OriginPostalAddress);
    }

]]></Source>
			</Method>
			<Method>
				<Name>setFreightBillId</Name>
				<Source><![CDATA[
    /// <summary>
    /// Sets a new freight bill id using number sequence for freight bills.
    /// </summary>
    public void setFreightBillId()
    {
        this.FreightBillId = NumberSeq::newGetNum(TMSParameters::numRefTMSFreightBillId()).num();
    }

]]></Source>
			</Method>
			<Method>
				<Name>allowUnmatch</Name>
				<Source><![CDATA[
    private boolean allowUnmatch(TMSInvoiceLine _invoiceLine)
    {
        boolean allowUnmatch = true;

        container unmatchedWorkFlowStatuses = [TMSWorkflowStatus::Submitted, TMSWorkflowStatus::Approved, TMSWorkflowStatus::ReadyToProcess];
        TMSFBInvMatch matchedRecords;

        while select RateCur from matchedRecords
            where matchedRecords.FreightBillDetailRecId   == this.RecId                       &&
                    matchedRecords.InvoiceLineRecId       == _invoiceLine.RecId               &&
                    matchedRecords.WorkflowStatus         in unmatchedWorkFlowStatuses
        {
            allowUnmatch = checkFailed(strFmt("@TRX:CannotUnmatchRecordsWorkflowActive", matchedRecords.RateCur));
        }

        return allowUnmatch;
    }

]]></Source>
			</Method>
			<Method>
				<Name>unmatchRecord</Name>
				<Source><![CDATA[
    /// <summary>
    ///     Removes the match record between a freight bill detail and the associated invoice line record.
    /// </summary>
    /// <param name="_invoiceLine">
    ///     The Invoice Line record to remove the match record.
    /// </param>
    public void unmatchRecord(TMSInvoiceLine _invoiceLine)
    {
        TMSInvoiceTable invoiceTable = _invoiceLine.tmsInvoiceTable();

        if (this.hasRelatedPostedVendorInvoiceJournal(_invoiceLine, invoiceTable))
        {
            throw error("@TRX:CannotUnmatchRecordsLedgerExists");
        }

        if (Workflow::findWorkflowConfigToActivateForType(workFlowTypeStr(TMSInvoiceApproval), invoiceTable.RecId, invoiceTable.TableId)
            && !this.allowUnmatch(_invoiceLine))
        {
            return;
        }

        ttsbegin;

        TMSInvoiceStatus newInvoiceHeaderStatus = this.calculateInvoiceStatusAfterUnmatching(invoiceTable);

        this.updateFreightInvoiceLinesForWhichVendorInvoiceJournalWillBeDeletedAfterUnmatching(newInvoiceHeaderStatus, _invoiceLine);

        this.deleteRelatedVendorInvoiceJournals(_invoiceLine, invoiceTable);

        this.deleteRelatedMatchedRecords(_invoiceLine);

        this.updateFreightBillMatchStatusAfterUnmatching();

        invoiceTable.selectForUpdate(true);
        invoiceTable.InvoiceStatus = newInvoiceHeaderStatus;
        invoiceTable.update();

        ttscommit;
    }

]]></Source>
			</Method>
			<Method>
				<Name>hasRelatedPostedVendorInvoiceJournal</Name>
				<Source><![CDATA[
    private boolean hasRelatedPostedVendorInvoiceJournal(TMSInvoiceLine _invoiceLine, TMSInvoiceTable _invoiceTable)
    {
        LedgerJournalTable ledgerJournalTable;

        TMSLedgerJourRef ledgerJourRef;

        select firstonly RefRecId from ledgerJourRef
            where ledgerJourRef.RefTableId == _invoiceLine.TableId
                && ledgerJourRef.RefRecId == _invoiceLine.RecId
            exists join ledgerJournalTable
                where ledgerJournalTable.JournalNum == ledgerJourRef.RefJournalNum
                    && ledgerJournalTable.Posted == NoYes::Yes;

        return ledgerJourRef.RefRecId != 0;
    }

]]></Source>
			</Method>
			<Method>
				<Name>updateFreightInvoiceLinesForWhichVendorInvoiceJournalWillBeDeletedAfterUnmatching</Name>
				<Source><![CDATA[
    private void updateFreightInvoiceLinesForWhichVendorInvoiceJournalWillBeDeletedAfterUnmatching(TMSInvoiceStatus _newInvoiceHeaderStatus, TMSInvoiceLine _invoiceLine)
    {
        TMSInvoiceLine      freightInvoiceLine;
        TMSLedgerJourRef    ledgerJourRefLinesInSameJournal;
        TMSLedgerJourRef    ledgerJourRefUnmatchedLine;

        update_recordset freightInvoiceLine
            setting InvoiceStatus = _newInvoiceHeaderStatus,
                    InvoiceLineStatus = TMSInvoiceLineStatus::Open
            exists join ledgerJourRefLinesInSameJournal
                where ledgerJourRefLinesInSameJournal.RefTableId == freightInvoiceLine.TableId
                    && ledgerJourRefLinesInSameJournal.RefRecId == freightInvoiceLine.RecId
            exists join ledgerJourRefUnmatchedLine
                where ledgerJourRefUnmatchedLine.RefTableId == _invoiceLine.TableId
                    && ledgerJourRefUnmatchedLine.RefRecId == _invoiceLine.RecId
                    && ledgerJourRefUnmatchedLine.RefJournalNum == ledgerJourRefLinesInSameJournal.RefJournalNum;
    }

]]></Source>
			</Method>
			<Method>
				<Name>deleteRelatedVendorInvoiceJournals</Name>
				<Source><![CDATA[
    private void deleteRelatedVendorInvoiceJournals(TMSInvoiceLine _invoiceLine, TMSInvoiceTable _invoiceTable)
    {
        LedgerJournalTable ledgerJournalTable;

        TMSLedgerJourRef ledgerJourRef;
        
        delete_from ledgerJournalTable
            exists join ledgerJourRef
                where ledgerJourRef.RefTableId == _invoiceLine.TableId
                    && ledgerJourRef.RefRecId == _invoiceLine.RecId
                    && ledgerJourRef.RefJournalNum == ledgerJournalTable.JournalNum;

        _invoiceTable.reread();
    }

]]></Source>
			</Method>
			<Method>
				<Name>deleteRelatedMatchedRecords</Name>
				<Source><![CDATA[
    private void deleteRelatedMatchedRecords(TMSInvoiceLine _invoiceLine)
    {
        TMSFBInvMatch matchedRecords;
        delete_from matchedRecords
            where matchedRecords.FreightBillDetailRecId == this.RecId
               && matchedRecords.InvoiceLineRecId == _invoiceLine.RecId;

        TMSFBDetailReconcile matchedReconcile;
        delete_from matchedReconcile
            where matchedReconcile.FreightBillDetailRecId == this.RecId;
    }

]]></Source>
			</Method>
			<Method>
				<Name>updateFreightBillMatchStatusAfterUnmatching</Name>
				<Source><![CDATA[
    private void updateFreightBillMatchStatusAfterUnmatching()
    {
        Amount freightBillRemain = (select sum(RateCur) from tmsfbInvMatch
                                where tmsfbInvMatch.FreightBillDetailRecId == this.RecId).RateCur;

        this.selectForUpdate(true);

        if (freightBillRemain == 0)
        {
            this.FreightBillMatchStatus = TMSFreightBillMatchStatus::None;
        }
        else if (freightBillRemain == this.RateCur)
        {
            this.FreightBillMatchStatus = TMSFreightBillMatchStatus::FullyMatched;
        }
        else
        {
            this.FreightBillMatchStatus = TMSFreightBillMatchStatus::PartiallyMatched;
        }

        this.write();
    }

]]></Source>
			</Method>
			<Method>
				<Name>calculateInvoiceStatusAfterUnmatching</Name>
				<Source><![CDATA[
    private TMSInvoiceStatus calculateInvoiceStatusAfterUnmatching(TMSInvoiceTable _invoiceTable)
    {
        if (_invoiceTable.InvoiceStatus == TMSInvoiceStatus::Open
            || _invoiceTable.InvoiceStatus == TMSInvoiceStatus::Pending
            || _invoiceTable.InvoiceStatus == TMSInvoiceStatus::PendingAfterReject)
        {
            return _invoiceTable.InvoiceStatus;
        }

        if ((_invoiceTable.InvoiceStatus == TMSInvoiceStatus::Approved
                || _invoiceTable.InvoiceStatus == TMSInvoiceStatus::PartiallyApproved)
            && this.anyMatchedOrReconciledAfterUnmatching(_invoiceTable))
        {
            return TMSInvoiceStatus::PartiallyApproved;

        }
        
        return TMSInvoiceStatus::Open;
    }

]]></Source>
			</Method>
			<Method>
				<Name>anyMatchedOrReconciledAfterUnmatching</Name>
				<Source><![CDATA[
    private boolean anyMatchedOrReconciledAfterUnmatching(TMSInvoiceTable _invoiceTable)
    {
        return abs(_invoiceTable.totalRemaining()) < abs(_invoiceTable.InvoiceAmount);
    }

]]></Source>
			</Method>
			<Method>
				<Name>createInvoiceFromRouteFreightBill</Name>
				<Source><![CDATA[
    /// <summary>
    ///     Create an invoice from a routes freight bill details.
    /// </summary>
    /// <param name="_routeCode">
    ///     The associated route code.
    /// </param>
    /// <param name="_vendInvoiceId">
    ///     The vendor invoice number to use on the created invoice.
    /// </param>
    /// <param name="_tmsFreightBillId">
    ///     The ID of the freight bill for which to create the invoice.
    /// </param>
    /// <returns>
    ///     The unique invoice id for the created invoice.
    /// </returns>
    /// <exception cref="Exception::Error">
    ///     Throw error if an invoice has already been created for this route.
    /// </exception>
    public static TMSInternalInvNumber createInvoiceFromRouteFreightBill(
        TMSRouteCode _routeCode,
        VendInvoiceId _vendInvoiceId = '',
        TMSFreightBillId _tmsFreightBillId = '')
    {
        TMSInvoiceTable         invoiceTable;
        TMSInvoiceLine          invoiceLine;
        TMSFreightBillDetail    freightBillDetail;
        int                     i;
        TMSCarrierCode          prevCarrier;

        using (var context = TMSSkipRecalculationOfInvoiceTableInvoiceAccountWhenLineIsModifiedContext::construct())
        {
            try
            {
                while select BillingGroupId,
                    BillOfLadingId,
                    BookingNum,
                    CurrencyCode,
                    CarrierCode,
                    CarrierServiceCode,
                    DestinationPostalAddress,
                    Direction,
                    ExternalCode,
                    FreightBillTypeId,
                    InventLocationId,
                    InventSiteId,
                    LineType,
                    LoadId,
                    ModeCode,
                    ProNum,
                    Qty,
                    RateCur,
                    RateId,
                    RateUnit,
                    RateUnitRate,
                    RelatedAccountNum,
                    RelatedOrderNum,
                    RouteCode,
                    ShipmentId,
                    TrailerNumber,
                    VendorCode,
                    VendorInvoiceCode,
                    VesselName,
                    VoyageNum,
                    Weight,
                    ShipUTCDateTime,
                    DeliveryUTCDateTime
                    from freightBillDetail
                    order by CarrierCode
                        where freightBillDetail.RouteCode == _routeCode &&
                            (!_tmsFreightBillId || freightBillDetail.FreightBillId == _tmsFreightBillId)
                {
                    if (invoiceTable.InternalInvNumber == '' || prevCarrier != freightBillDetail.CarrierCode)
                    {
                        if (prevCarrier)
                        {
                            invoiceTable.updateInvoiceAmount();
                        }

                        invoiceTable.clear();
                        invoiceTable.setInternalInvNum();
                        invoiceTable.VendAccount         = freightBillDetail.VendorCode;
                        invoiceTable.VendInvoiceId       = _vendInvoiceId;
                        invoiceTable.VendInvoiceAccount  = freightBillDetail.VendorInvoiceCode;
                        invoiceTable.DocumentDate        = DateTimeUtil::getSystemDate(DateTimeUtil::getUserPreferredTimeZone());
                        invoiceTable.RouteCode           = _routeCode;
                        invoiceTable.ShipUTCDateTime     = freightBillDetail.ShipUTCDateTime;
                        invoiceTable.DeliveryUTCDateTime = freightBillDetail.DeliveryUTCDateTime;
                        invoiceTable.RelatedAccountNum   = freightBillDetail.RelatedAccountNum;
                        invoiceTable.RelatedOrderNum     = freightBillDetail.RelatedOrderNum;
                        invoiceTable.ShipmentId          = freightBillDetail.ShipmentId;
                        invoiceTable.LoadId              = freightBillDetail.LoadId;
                        invoiceTable.BillOfLadingId      = freightBillDetail.BillOfLadingId;
                        invoiceTable.Weight              += freightBillDetail.Weight;
                        invoiceTable.Qty                 += freightBillDetail.RateUnit;
                        invoiceTable.TrailerNumber       = freightBillDetail.TrailerNumber;
                        invoiceTable.VoyageNum           = freightBillDetail.VoyageNum;
                        invoiceTable.VesselName          = freightBillDetail.VesselName;
                        invoiceTable.CarrierCode         = freightBillDetail.CarrierCode;
                        invoiceTable.CarrierServiceCode  = freightBillDetail.CarrierServiceCode;
                        invoiceTable.ProNum              = freightBillDetail.ProNum;
                        invoiceTable.CurrencyCode        = freightBillDetail.CurrencyCode;
                        invoiceTable.Direction           = freightBillDetail.Direction;
                        invoiceTable.BookingNum          = freightBillDetail.BookingNum;
                        invoiceTable.setDueUTCDateTime();
                        invoiceTable.insert();
                    }

                    ++i;
                    invoiceLine.InternalInvNumber        = invoiceTable.InternalInvNumber;
                    invoiceLine.RefRecId                 = invoiceTable.RecId;
                    invoiceLine.BillingGroupId           = freightBillDetail.BillingGroupId;
                    invoiceLine.VendAccount              = freightBillDetail.VendorCode;
                    invoiceLine.VendInvoiceId            = _vendInvoiceId;
                    invoiceLine.VendInvoiceAccount       = freightBillDetail.VendorInvoiceCode;
                    invoiceLine.InvoiceDate              = invoiceTable.InvoiceDate;
                    invoiceLine.LineNum                  = i;
                    invoiceLine.LineType                 = freightBillDetail.LineType;
                    invoiceLine.ShipmentId               = freightBillDetail.ShipmentId;
                    invoiceLine.LoadId                   = freightBillDetail.LoadId;
                    invoiceLine.ShipUTCDateTime          = freightBillDetail.ShipUTCDateTime;
                    invoiceLine.DeliveryUTCDateTime      = freightBillDetail.DeliveryUTCDateTime;
                    invoiceLine.BillOfLadingId           = freightBillDetail.BillOfLadingId;
                    invoiceLine.Description              = freightBillDetail.RateId;
                    invoiceLine.Weight                   = freightBillDetail.Weight;
                    invoiceLine.Qty                      = freightBillDetail.RateUnit;
                    invoiceLine.UnitPrice                = freightBillDetail.RateUnitRate  ? freightBillDetail.RateUnitRate : 1;
                    invoiceLine.CarrierCode              = freightBillDetail.CarrierCode;
                    invoiceLine.VesselName               = freightBillDetail.VesselName;
                    invoiceLine.VoyageNum                = freightBillDetail.VoyageNum;
                    invoiceLine.AddressCountryRegionId   = freightBillDetail.destinationLogisticsPostalAddress().CountryRegionId;
                    invoiceLine.CountryRegionISOCode     = LogisticsAddressCountryRegion::find(invoiceLine.AddressCountryRegionId).isOcode;
                    invoiceLine.TrailerNumber            = freightBillDetail.TrailerNumber;
                    invoiceLine.NetAmount                = freightBillDetail.RateCur;
                    invoiceLine.CarrierCode              = freightBillDetail.CarrierCode;
                    invoiceLine.RouteCode                = freightBillDetail.RouteCode;
                    invoiceLine.CarrierServiceCode       = freightBillDetail.CarrierServiceCode;
                    invoiceLine.ExternalCode             = freightBillDetail.ExternalCode;
                    invoiceLine.ProNum                   = freightBillDetail.ProNum;
                    invoiceLine.CurrencyCode             = freightBillDetail.CurrencyCode;
                    invoiceLine.Direction                = freightBillDetail.Direction;
                    invoiceLine.RelatedAccountNum        = freightBillDetail.RelatedAccountNum;
                    invoiceLine.RelatedOrderNum          = freightBillDetail.RelatedOrderNum;
                    invoiceLine.BookingNum               = freightBillDetail.BookingNum;
                    invoiceLine.FreightBillTypeId        = freightBillDetail.FreightBillTypeId;
                    invoiceLine.InventSiteId             = freightBillDetail.InventSiteId;
                    invoiceLine.InventLocationId         = freightBillDetail.InventLocationId;
                    invoiceLine.ModeCode                 = freightBillDetail.ModeCode;
                    invoiceLine.insert();

                    prevCarrier = freightBillDetail.CarrierCode;
                }

                invoiceTable.updateInvoiceAmount();
            }

            catch (Exception::DuplicateKeyException)
            {
                throw error(strFmt("@TRX1374", invoiceTable.RouteCode));
            }
        }

        return invoiceTable.InternalInvNumber;
    }

]]></Source>
			</Method>
			<Method>
				<Name>exist</Name>
				<Source><![CDATA[
    /// <summary>
    /// Checks if a specific <c>tmsFreightBillDetail</c> record exists.
    /// </summary>
    /// <param name="_recId">
    /// Id of the record.
    /// </param>
    /// <returns>
    /// True if the record exists.
    /// </returns>
    public static boolean exist(RecId   _recId)
    {
        return (_recId) &&
               (select firstonly tmsFreightBillDetail
                    where tmsFreightBillDetail.RecId == _recId).RecId != 0;
    }

]]></Source>
			</Method>
			<Method>
				<Name>existsInvoiceJournal</Name>
				<Source><![CDATA[
    /// <summary>
    /// Checks if an invoice journal exists for a route.
    /// </summary>
    /// <param name="_routeId">
    /// Id of the route.
    /// </param>
    /// <param name="_loadId">
    /// Id of load in the route.
    /// </param>
    /// <param name="_invNum">
    /// Invoice number of the invoice journal.
    /// </param>
    /// <param name="_salesId">
    /// Sales order id of the load in the route.
    /// </param>
    /// <returns>
    /// True if an invoice journal exists for the route.
    /// </returns>
    public static boolean existsInvoiceJournal(TMSRouteCode         _routeId,
                                               WHSLoadId            _loadId     = '',
                                               TMSInternalInvNumber _invNum     = '',
                                               SalesId              _salesId    = '')
    {
        TMSLedgerJourRef                        ledgerJourRef;
        TMSInvoiceTable                         invoiceTable;
        TMSInvoiceLine                          invoiceLine;
        TMSFreightBillDetail                    fbDetail;
        TMSFBInvMatch                           fbMatched;
        WHSLoadLine                             loadLine;

        if (_routeId)
        {
            select firstonly RecId from ledgerJourRef
                join invoiceLine
                where ledgerJourRef.RefRecId    == invoiceLine.RecId    &&
                      ledgerJourRef.RefTableId  == invoiceLine.TableId  &&
                      ((_loadId && invoiceLine.LoadId == _loadId)    ||
                      !_loadId)
                exists join invoiceTable
                    where invoiceTable.InternalInvNumber == invoiceLine.InternalInvNumber &&
                          invoiceTable.RouteCode         == _routeId;
        }

        else if (_salesId)
        {
            select firstonly RecId from ledgerJourRef
                join invoiceLine
                where ledgerJourRef.RefRecId    == invoiceLine.RecId &&
                      ledgerJourRef.RefTableId  == invoiceLine.TableId
                exists join loadLine
                    where loadLine.LoadId           == invoiceLine.LoadId       &&
                          loadLine.OrderNum         == _salesId                 &&
                          loadLine.InventTransType  == InventTransType::Sales   &&
                          loadLine.TransportRequest == NoYes::No;
        }

        else if (_invNum)
        {
            select firstonly RecId from ledgerJourRef
                exists join invoiceLine
                where ledgerJourRef.RefRecId            == invoiceLine.RecId    &&
                      ledgerJourRef.RefTableId          == invoiceLine.TableId  &&
                      invoiceLine.InternalInvNumber  == _invNum;
        }

        if (!ledgerJourRef)
        {
            select firstonly RecId from ledgerJourRef
                join invoiceLine
                where ledgerJourRef.RefRecId    == invoiceLine.RecId &&
                      ledgerJourRef.RefTableId  == invoiceLine.TableId
                join fbMatched
                        where fbMatched.InvoiceLineRecId   == invoiceLine.RecId
                        exists join fbDetail
                            where fbDetail.RecId    == fbMatched.FreightBillDetailRecId &&
                                  fbDetail.RouteCode == _routeId;
        }

        return ledgerJourRef.RecId != 0;
    }

]]></Source>
			</Method>
			<Method>
				<Name>find</Name>
				<Source><![CDATA[
    /// <summary>
    /// Finds a specific <c>TMSFreightBillDetail</c> record with given parameters.
    /// </summary>
    /// <param name="_recId">
    /// Id of the record.
    /// </param>
    /// <param name="_forupdate">
    /// Determines whether the record is selected for update.
    /// </param>
    /// <returns>
    /// The record that is searched for.
    /// </returns>
    public static TMSFreightBillDetail find(RecId   _recId,
                                            boolean _forupdate = false)
    {
        TMSFreightBillDetail    tmsFreightBillDetail;

        if (_recId)
        {
            tmsFreightBillDetail.selectForUpdate(_forupdate);

            select firstonly tmsFreightBillDetail
                where tmsFreightBillDetail.RecId == _recId;
        }

        return tmsFreightBillDetail;
    }

]]></Source>
			</Method>
			<Method>
				<Name>setBillOfLadingId</Name>
				<Source><![CDATA[
    /// <summary>
    /// Sets shipment bill of lading id to the <c>TMSFreightBillDetail</c> records.
    /// </summary>
    /// <param name="_shipmentTable">
    /// Shipment record containing the bill of lading id.
    /// </param>
    public static void setBillOfLadingId(WHSShipmentTable _shipmentTable)
    {
        TMSFreightBillDetail    freightBillDetail;

        ttsbegin;

        while select forupdate freightBillDetail
            where freightBillDetail.ShipmentId == _shipmentTable.ShipmentId
        {
            freightBillDetail.BillOfLadingId = _shipmentTable.BillOfLadingId;
            if (!freightBillDetail.validateWrite())
            {
                throw error(strFmt("@TRX:TMSCannotUpdateRecordInTable", tablePName(TMSFreightBillDetail)));
            }
            else
            {
                freightBillDetail.update();
            }
        }

        ttscommit;
    }

]]></Source>
			</Method>
			<Method>
				<Name>calcAmountMatched</Name>
				<Source><![CDATA[
    /// <summary>
    /// Calculates matched amount for <c>TMSFreightBillDetail</c> record.
    /// </summary>
    /// <param name="_freightBillDetailRecId">
    /// The recId reference to <c>TMSFreightBillDetail</c> record
    /// </param>
    /// <returns>
    /// Amount that was matched for <c>TMSFreightBillDetail</c> record.
    /// </returns>
    [Hookable(false)]
    internal static Amount calcAmountMatched(TMSFreightBillDetailRecId _freightBillDetailRecId)
    {
        return (select sum(RateCur) from tmsfbInvMatch
                    where tmsfbInvMatch.FreightBillDetailRecId   == _freightBillDetailRecId).RateCur;
    }

]]></Source>
			</Method>
			<Method>
				<Name>calcAmountReconciled</Name>
				<Source><![CDATA[
    /// <summary>
    /// Calculates reconciled amount for <c>TMSFreightBillDetail</c> record.
    /// </summary>
    /// <param name="_freightBillDetailRecId">
    /// The recId reference to <c>TMSFreightBillDetail</c> record
    /// </param>
    /// <returns>
    /// Amount that was reconciled for <c>TMSFreightBillDetail</c> record.
    /// </returns>
    [Hookable(false)]
    internal static Amount calcAmountReconciled(TMSFreightBillDetailRecId _freightBillDetailRecId)
    {
        return (select sum(Amount) from tmsfbDetailReconcile
                    where tmsfbDetailReconcile.FreightBillDetailRecId   == _freightBillDetailRecId).Amount;
    }

]]></Source>
			</Method>
			<Method>
				<Name>calcAmountRemaining</Name>
				<Source><![CDATA[
    /// <summary>
    /// Calculates the amount of the freight bill that has yet to be assigned.
    /// </summary>
    /// <param name="_freightBillDetailRecId">
    /// The recId reference to <c>TMSFreightBillDetail</c> record
    /// </param>
    /// <param name="_rateCur">
    ///  Amount of the freight bill
    /// </param>
    /// <returns>
    /// The difference of the amount of the freight bill and the sum of the matched and reconciled amounts.
    /// </returns>
    [Hookable(false)]
    internal static Amount calcAmountRemaining(TMSFreightBillDetailRecId _freightBillDetailRecId, TMSRate _rateCur)
    {
        return _rateCur - (TMSFreightBillDetail::calcAmountMatched(_freightBillDetailRecId) + TMSFreightBillDetail::calcAmountReconciled(_freightBillDetailRecId));
    }

]]></Source>
			</Method>
			<Method>
				<Name>shouldThrowExceptionOnZeroDelete</Name>
				<Source><![CDATA[
    /// <summary>
    /// Determines if concurrent deletes should throw exception.
    /// </summary>
    /// <returns>true if exception should be thrown; otherwise false.</returns>
    [Hookable(false)]
    public boolean shouldThrowExceptionOnZeroDelete()
    {
        return true;
    }

]]></Source>
			</Method>
		</Methods>
	</SourceCode>
	<ConfigurationKey>WHSandTMS</ConfigurationKey>
	<DeveloperDocumentation>@TRX1903</DeveloperDocumentation>
	<Label>@TRX1046</Label>
	<TableGroup>WorksheetLine</TableGroup>
	<TitleField1>RouteCode</TitleField1>
	<TitleField2>Sequence</TitleField2>
	<AllowRowVersionChangeTracking>Yes</AllowRowVersionChangeTracking>
	<CacheLookup>NotInTTS</CacheLookup>
	<ClusteredIndex>RecId</ClusteredIndex>
	<CreatedBy>Yes</CreatedBy>
	<CreatedDateTime>Yes</CreatedDateTime>
	<ModifiedBy>Yes</ModifiedBy>
	<ModifiedDateTime>Yes</ModifiedDateTime>
	<Modules>Transportation</Modules>
	<PrimaryIndex>RecId</PrimaryIndex>
	<TableContents>BaseData</TableContents>
	<DeleteActions />
	<FieldGroups>
		<AxTableFieldGroup>
			<Name>AutoReport</Name>
			<Fields>
				<AxTableFieldGroupField>
					<DataField>ProNum</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>ExternalCode</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>CurrencyCode</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>InventLocationId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>InventSiteId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Qty</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>BillingGroupId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>CarrierCode</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>CarrierServiceCode</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Dimension1</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Dimension10</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Dimension2</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Dimension3</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Dimension4</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Dimension5</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Dimension6</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Dimension7</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Dimension8</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Dimension9</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Direction</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>EquipmentCode</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>FreightBillMatchStatus</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>FreightBillTypeId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>HubMasterCode</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>LineType</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>ModeCode</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>FBRate</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>RateId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>RateNote</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>RateUnit</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>RateUnitRate</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>RelatedAccountNum</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>RelatedOrderNum</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>RouteCode</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Sequence</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>STCCCode</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>TractorNumber</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Value</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>VendorCode</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>VendorInvoiceCode</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>VesselName</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>VoyageNum</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>BillOfLadingId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>LoadId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>ShipmentId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>TrailerNumber</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Weight</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>BookingNum</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>FreightBillId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>DeliveryUTCDateTime</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>ShipUTCDateTime</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>DestinationPostalAddress</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>OriginPostalAddress</DataField>
				</AxTableFieldGroupField>
			</Fields>
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>AutoLookup</Name>
			<Fields />
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>AutoIdentification</Name>
			<AutoPopulate>Yes</AutoPopulate>
			<Fields />
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>AutoSummary</Name>
			<Fields />
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>AutoBrowse</Name>
			<Fields />
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>All</Name>
			<Label>@SYS80094</Label>
			<Fields>
				<AxTableFieldGroupField>
					<DataField>ProNum</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>ExternalCode</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>CurrencyCode</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>InventLocationId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>InventSiteId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Qty</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>BillingGroupId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>CarrierCode</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>CarrierServiceCode</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Dimension1</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Dimension10</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Dimension2</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Dimension3</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Dimension4</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Dimension5</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Dimension6</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Dimension7</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Dimension8</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Dimension9</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Direction</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>EquipmentCode</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>FreightBillMatchStatus</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>FreightBillTypeId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>HubMasterCode</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>LineType</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>ModeCode</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>FBRate</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>RateId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>RateNote</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>RateUnit</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>RateUnitRate</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>RelatedAccountNum</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>RelatedOrderNum</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>RouteCode</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Sequence</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>STCCCode</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>TractorNumber</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Value</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>VendorCode</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>VendorInvoiceCode</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>VesselName</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>VoyageNum</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>BillOfLadingId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>LoadId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>ShipmentId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>TrailerNumber</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Weight</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>BookingNum</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>FreightBillId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>DeliveryUTCDateTime</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>ShipUTCDateTime</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>RateCur</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>DestinationPostalAddress</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>OriginPostalAddress</DataField>
				</AxTableFieldGroupField>
			</Fields>
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>TMSFreightBillType</Name>
			<Label>@TRX1001</Label>
			<Fields>
				<AxTableFieldGroupField>
					<DataField>BillingGroupId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>BillOfLadingId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>BookingNum</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>CarrierCode</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>CarrierServiceCode</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>CurrencyCode</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>DeliveryUTCDateTime</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Direction</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>ExternalCode</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>FreightBillTypeId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>InventLocationId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>InventSiteId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>LineType</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>LoadId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>ModeCode</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>ProNum</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Qty</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>RelatedAccountNum</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>RelatedOrderNum</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>RouteCode</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>ShipmentId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>ShipUTCDateTime</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>TrailerNumber</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>VesselName</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>VoyageNum</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Weight</DataField>
				</AxTableFieldGroupField>
			</Fields>
		</AxTableFieldGroup>
	</FieldGroups>
	<Fields>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>BillingGroupId</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSBillingGroupId</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>BillOfLadingId</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>WHSBillOfLadingId</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>BookingNum</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSBookingNum</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>CarrierCode</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSCarrierCode</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>CarrierServiceCode</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSCarrierServiceCode</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>CurrencyCode</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>CurrencyCode</ExtendedDataType>
			<Mandatory>Yes</Mandatory>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldUtcDateTime">
			<Name>DeliveryUTCDateTime</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>WHSDeliveryUTCDateTime</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldInt64">
			<Name>DestinationPostalAddress</Name>
			<AllowEdit>No</AllowEdit>
			<AllowEditOnCreate>No</AllowEditOnCreate>
			<AssetClassification>Customer Content </AssetClassification>
			<ExtendedDataType>LogisticsPostalAddressRecId</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>Dimension1</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSDimension</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>Dimension10</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSDimension</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>Dimension2</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSDimension</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>Dimension3</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSDimension</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>Dimension4</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSDimension</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>Dimension5</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSDimension</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>Dimension6</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSDimension</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>Dimension7</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSDimension</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>Dimension8</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSDimension</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>Dimension9</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSDimension</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldEnum">
			<Name>Direction</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<EnumType>TMSDirection</EnumType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>EquipmentCode</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSEquipmentCode</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>ExternalCode</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSExternalCode</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldReal">
			<Name>FBRate</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSRate</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>FreightBillId</Name>
			<AllowEdit>No</AllowEdit>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSFreightBillId</ExtendedDataType>
			<Mandatory>Yes</Mandatory>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldEnum">
			<Name>FreightBillMatchStatus</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<EnumType>TMSFreightBillMatchStatus</EnumType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>FreightBillTypeId</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSFreightBillTypeId</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>HubMasterCode</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSHubMasterCode</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>InventLocationId</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>InventLocationId</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>InventSiteId</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>InventSiteId</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldEnum">
			<Name>LineType</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<EnumType>TMSLineType</EnumType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>LoadId</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>WHSLoadId</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>ModeCode</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSModeCode</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldInt64">
			<Name>OriginPostalAddress</Name>
			<AllowEdit>No</AllowEdit>
			<AllowEditOnCreate>No</AllowEditOnCreate>
			<AssetClassification>Customer Content </AssetClassification>
			<ExtendedDataType>LogisticsPostalAddressRecId</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>ProNum</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>WHSProNum</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldReal">
			<Name>Qty</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>Qty</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldReal">
			<Name>RateCur</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSRate</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>RateId</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSAccessorialMasterCode</ExtendedDataType>
			<Label>@TRX805</Label>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>RateNote</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSApptNote</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldReal">
			<Name>RateUnit</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSRateUnit</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldReal">
			<Name>RateUnitRate</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSRateUnitRate</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>RelatedAccountNum</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSRelatedAccountNum</ExtendedDataType>
			<Label>@WAX4731</Label>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>RelatedOrderNum</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSRelatedOrderNum</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>RouteCode</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSRouteCode</ExtendedDataType>
			<Mandatory>Yes</Mandatory>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldInt">
			<Name>Sequence</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSSequence</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>ShipmentId</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>WHSShipmentId</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldUtcDateTime">
			<Name>ShipUTCDateTime</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>WHSShipUTCDateTime</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>STCCCode</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSSTCCCode</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>TractorNumber</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSTractorNumber</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>TrailerNumber</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>WHSTrailerNumber</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>Value</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSValue</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>VendorCode</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSVendorCode</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>VendorInvoiceCode</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSVendorInvoiceCode</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>VesselName</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSVesselName</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>VoyageNum</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>TMSVoyageNum</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldReal">
			<Name>Weight</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>Weight</ExtendedDataType>
		</AxTableField>
	</Fields>
	<FullTextIndexes />
	<Indexes>
		<AxTableIndex>
			<Name>CurrencyIdx</Name>
			<AllowDuplicates>Yes</AllowDuplicates>
			<Fields>
				<AxTableIndexField>
					<DataField>CurrencyCode</DataField>
				</AxTableIndexField>
			</Fields>
		</AxTableIndex>
		<AxTableIndex>
			<Name>InventSiteIdx</Name>
			<AllowDuplicates>Yes</AllowDuplicates>
			<Fields>
				<AxTableIndexField>
					<DataField>InventSiteId</DataField>
				</AxTableIndexField>
			</Fields>
		</AxTableIndex>
		<AxTableIndex>
			<Name>InventLocationIdx</Name>
			<AllowDuplicates>Yes</AllowDuplicates>
			<Fields>
				<AxTableIndexField>
					<DataField>InventLocationId</DataField>
				</AxTableIndexField>
			</Fields>
		</AxTableIndex>
		<AxTableIndex>
			<Name>TMSRouteIdx</Name>
			<AllowDuplicates>Yes</AllowDuplicates>
			<Fields>
				<AxTableIndexField>
					<DataField>RouteCode</DataField>
				</AxTableIndexField>
			</Fields>
		</AxTableIndex>
	</Indexes>
	<Mappings />
	<Relations>
		<AxTableRelation xmlns=""
			i:type="AxTableRelationForeignKey">
			<Name>Currency</Name>
			<Cardinality>ZeroMore</Cardinality>
			<RelatedTable>Currency</RelatedTable>
			<RelatedTableCardinality>ExactlyOne</RelatedTableCardinality>
			<RelationshipType>Association</RelationshipType>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>CurrencyCode</Name>
					<SourceEDT>CurrencyCode</SourceEDT>
					<Field>CurrencyCode</Field>
					<RelatedField>CurrencyCode</RelatedField>
				</AxTableRelationConstraint>
			</Constraints>
			<Index>CurrencyCodeIdx</Index>
		</AxTableRelation>
		<AxTableRelation xmlns=""
			i:type="AxTableRelationForeignKey">
			<Name>InventLocation</Name>
			<Cardinality>ZeroMore</Cardinality>
			<RelatedTable>InventLocation</RelatedTable>
			<RelatedTableCardinality>ZeroOne</RelatedTableCardinality>
			<RelationshipType>Association</RelationshipType>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>InventLocationId</Name>
					<SourceEDT>InventLocationId</SourceEDT>
					<Field>InventLocationId</Field>
					<RelatedField>InventLocationId</RelatedField>
				</AxTableRelationConstraint>
			</Constraints>
			<Index>InventLocationIdx</Index>
		</AxTableRelation>
		<AxTableRelation xmlns=""
			i:type="AxTableRelationForeignKey">
			<Name>InventSite</Name>
			<Cardinality>ZeroMore</Cardinality>
			<RelatedTable>InventSite</RelatedTable>
			<RelatedTableCardinality>ZeroOne</RelatedTableCardinality>
			<RelationshipType>Association</RelationshipType>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>InventSiteId</Name>
					<SourceEDT>InventSiteId</SourceEDT>
					<Field>InventSiteId</Field>
					<RelatedField>SiteId</RelatedField>
				</AxTableRelationConstraint>
			</Constraints>
			<Index>SiteIdx</Index>
		</AxTableRelation>
		<AxTableRelation>
			<Name>LogisticsPostalAddressDestination</Name>
			<Cardinality>ZeroMore</Cardinality>
			<RelatedTable>LogisticsPostalAddress</RelatedTable>
			<RelatedTableCardinality>ZeroOne</RelatedTableCardinality>
			<RelatedTableRole>LogisticsPostalAddressDestination</RelatedTableRole>
			<RelationshipType>Association</RelationshipType>
			<Role>LogisticsPostalAddressDestination</Role>
			<UseDefaultRoleNames>No</UseDefaultRoleNames>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>DestinationPostalAddress</Name>
					<Field>DestinationPostalAddress</Field>
					<RelatedField>RecId</RelatedField>
				</AxTableRelationConstraint>
			</Constraints>
		</AxTableRelation>
		<AxTableRelation>
			<Name>LogisticsPostalAddressOrigin</Name>
			<Cardinality>ZeroMore</Cardinality>
			<RelatedTable>LogisticsPostalAddress</RelatedTable>
			<RelatedTableCardinality>ZeroOne</RelatedTableCardinality>
			<RelatedTableRole>LogisticsPostalAddressOrigin</RelatedTableRole>
			<RelationshipType>Association</RelationshipType>
			<Role>LogisticsPostalAddressOrigin</Role>
			<UseDefaultRoleNames>No</UseDefaultRoleNames>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>OriginPostalAddress</Name>
					<Field>OriginPostalAddress</Field>
					<RelatedField>RecId</RelatedField>
				</AxTableRelationConstraint>
			</Constraints>
		</AxTableRelation>
		<AxTableRelation>
			<Name>TMSAccessorialMaster</Name>
			<Cardinality>ZeroMore</Cardinality>
			<EDTRelation>Yes</EDTRelation>
			<RelatedTable>TMSAccessorialMaster</RelatedTable>
			<RelatedTableCardinality>ExactlyOne</RelatedTableCardinality>
			<RelationshipType>Association</RelationshipType>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>RateId</Name>
					<SourceEDT>TMSAccessorialMasterCode</SourceEDT>
					<Field>RateId</Field>
					<RelatedField>AccessorialMasterCode</RelatedField>
				</AxTableRelationConstraint>
			</Constraints>
		</AxTableRelation>
		<AxTableRelation>
			<Name>TMSBillingGroup</Name>
			<Cardinality>ZeroMore</Cardinality>
			<RelatedTable>TMSBillingGroup</RelatedTable>
			<RelatedTableCardinality>ZeroOne</RelatedTableCardinality>
			<RelationshipType>Association</RelationshipType>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>BillingGroupId</Name>
					<Field>BillingGroupId</Field>
					<RelatedField>BillingGroupId</RelatedField>
				</AxTableRelationConstraint>
			</Constraints>
		</AxTableRelation>
		<AxTableRelation>
			<Name>TMSCarrier</Name>
			<Cardinality>ZeroMore</Cardinality>
			<EDTRelation>Yes</EDTRelation>
			<RelatedTable>TMSCarrier</RelatedTable>
			<RelatedTableCardinality>ExactlyOne</RelatedTableCardinality>
			<RelationshipType>Association</RelationshipType>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>CarrierCode</Name>
					<SourceEDT>TMSCarrierCode</SourceEDT>
					<Field>CarrierCode</Field>
					<RelatedField>CarrierCode</RelatedField>
				</AxTableRelationConstraint>
			</Constraints>
		</AxTableRelation>
		<AxTableRelation>
			<Name>TMSEquipment</Name>
			<Cardinality>ZeroMore</Cardinality>
			<EDTRelation>Yes</EDTRelation>
			<RelatedTable>TMSEquipment</RelatedTable>
			<RelatedTableCardinality>ExactlyOne</RelatedTableCardinality>
			<RelationshipType>Association</RelationshipType>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>EquipmentCode</Name>
					<SourceEDT>TMSEquipmentCode</SourceEDT>
					<Field>EquipmentCode</Field>
					<RelatedField>EquipmentCode</RelatedField>
				</AxTableRelationConstraint>
			</Constraints>
		</AxTableRelation>
		<AxTableRelation>
			<Name>TMSFreightBillType</Name>
			<Cardinality>ZeroMore</Cardinality>
			<EDTRelation>Yes</EDTRelation>
			<RelatedTable>TMSFreightBillType</RelatedTable>
			<RelatedTableCardinality>ExactlyOne</RelatedTableCardinality>
			<RelationshipType>Association</RelationshipType>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>FreightBillTypeId</Name>
					<SourceEDT>TMSFreightBillTypeId</SourceEDT>
					<Field>FreightBillTypeId</Field>
					<RelatedField>FreightBillTypeId</RelatedField>
				</AxTableRelationConstraint>
			</Constraints>
		</AxTableRelation>
		<AxTableRelation>
			<Name>TMSHubMaster</Name>
			<Cardinality>ZeroMore</Cardinality>
			<EDTRelation>Yes</EDTRelation>
			<RelatedTable>TMSHubMaster</RelatedTable>
			<RelatedTableCardinality>ExactlyOne</RelatedTableCardinality>
			<RelationshipType>Association</RelationshipType>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>HubMasterCode</Name>
					<SourceEDT>TMSHubMasterCode</SourceEDT>
					<Field>HubMasterCode</Field>
					<RelatedField>HubMasterCode</RelatedField>
				</AxTableRelationConstraint>
			</Constraints>
		</AxTableRelation>
		<AxTableRelation>
			<Name>TMSMode</Name>
			<Cardinality>ZeroMore</Cardinality>
			<EDTRelation>Yes</EDTRelation>
			<RelatedTable>TMSMode</RelatedTable>
			<RelatedTableCardinality>ExactlyOne</RelatedTableCardinality>
			<RelationshipType>Association</RelationshipType>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>ModeCode</Name>
					<SourceEDT>TMSModeCode</SourceEDT>
					<Field>ModeCode</Field>
					<RelatedField>ModeCode</RelatedField>
				</AxTableRelationConstraint>
			</Constraints>
		</AxTableRelation>
		<AxTableRelation>
			<Name>TMSRoute</Name>
			<Cardinality>ZeroMore</Cardinality>
			<EDTRelation>Yes</EDTRelation>
			<OnDelete>Cascade</OnDelete>
			<RelatedTable>TMSRoute</RelatedTable>
			<RelatedTableCardinality>ExactlyOne</RelatedTableCardinality>
			<RelationshipType>Association</RelationshipType>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>RouteCode</Name>
					<SourceEDT>TMSRouteCode</SourceEDT>
					<Field>RouteCode</Field>
					<RelatedField>RouteCode</RelatedField>
				</AxTableRelationConstraint>
			</Constraints>
		</AxTableRelation>
		<AxTableRelation xmlns=""
			i:type="AxTableRelationForeignKey">
			<Name>VendTable</Name>
			<Cardinality>ZeroMore</Cardinality>
			<EDTRelation>Yes</EDTRelation>
			<OnDelete>Restricted</OnDelete>
			<RelatedTable>VendTable</RelatedTable>
			<RelatedTableCardinality>ZeroOne</RelatedTableCardinality>
			<RelatedTableRole>VendAccount</RelatedTableRole>
			<RelationshipType>Association</RelationshipType>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>VendorCode</Name>
					<SourceEDT>TMSVendorCode</SourceEDT>
					<Field>VendorCode</Field>
					<RelatedField>AccountNum</RelatedField>
				</AxTableRelationConstraint>
			</Constraints>
			<Index>AccountIdx</Index>
		</AxTableRelation>
		<AxTableRelation xmlns=""
			i:type="AxTableRelationForeignKey">
			<Name>VendTableInvoice</Name>
			<Cardinality>ZeroMore</Cardinality>
			<EDTRelation>Yes</EDTRelation>
			<RelatedTable>VendTable</RelatedTable>
			<RelatedTableCardinality>ZeroOne</RelatedTableCardinality>
			<RelatedTableRole>VendInvoice</RelatedTableRole>
			<RelationshipType>Association</RelationshipType>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>VendorInvoiceCode</Name>
					<SourceEDT>TMSVendorInvoiceCode</SourceEDT>
					<Field>VendorInvoiceCode</Field>
					<RelatedField>AccountNum</RelatedField>
				</AxTableRelationConstraint>
			</Constraints>
			<Index>AccountIdx</Index>
		</AxTableRelation>
		<AxTableRelation>
			<Name>WHSLoadTable</Name>
			<Cardinality>ZeroMore</Cardinality>
			<EDTRelation>Yes</EDTRelation>
			<OnDelete>Cascade</OnDelete>
			<RelatedTable>WHSLoadTable</RelatedTable>
			<RelatedTableCardinality>ExactlyOne</RelatedTableCardinality>
			<RelationshipType>Association</RelationshipType>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>LoadId</Name>
					<SourceEDT>WHSLoadId</SourceEDT>
					<Field>LoadId</Field>
					<RelatedField>LoadId</RelatedField>
				</AxTableRelationConstraint>
			</Constraints>
		</AxTableRelation>
		<AxTableRelation>
			<Name>WHSShipmentTable</Name>
			<Cardinality>ZeroMore</Cardinality>
			<EDTRelation>Yes</EDTRelation>
			<OnDelete>Cascade</OnDelete>
			<RelatedTable>WHSShipmentTable</RelatedTable>
			<RelatedTableCardinality>ExactlyOne</RelatedTableCardinality>
			<RelationshipType>Association</RelationshipType>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>ShipmentId</Name>
					<SourceEDT>WHSShipmentId</SourceEDT>
					<Field>ShipmentId</Field>
					<RelatedField>ShipmentId</RelatedField>
				</AxTableRelationConstraint>
			</Constraints>
		</AxTableRelation>
	</Relations>
	<StateMachines />
</AxTable>