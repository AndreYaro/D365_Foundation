<?xml version="1.0" encoding="utf-8"?>
<AxTable xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
	<Name>smmOpportunityTable</Name>
	<SourceCode>
		<Declaration><![CDATA[
public class smmOpportunityTable extends common
{
}
]]></Declaration>
		<Methods>
			<Method>
				<Name>closedByName</Name>
				<Source><![CDATA[
    display smmClosedBy closedByName()
    {
    return HcmWorker::worker2Name(this.ClosedByWorker);
    }

]]></Source>
			</Method>
			<Method>
				<Name>createProspectBusRelRecord</Name>
				<Source><![CDATA[
    /// <summary>
    /// Creates a <c>SmmBusRelTable</c> record.
    /// </summary>
    protected void createProspectBusRelRecord()
    {
        // Create corresponding prospect record
        if (this.Party && !DirPartyTableHelper::isCustomerOrRelation(this.Party))
        {
            ttsbegin;
            SmmBusRelTable smmBusRelTable = this.initProspectBusRelRecord();
            smmBusRelTable.insert();
            ttscommit;
        }
    }

]]></Source>
			</Method>
			<Method>
				<Name>initProspectBusRelRecord</Name>
				<Source><![CDATA[
    /// <summary>
    /// Initializes fields for a <c>SmmBusRelTable</c> record.
    /// </summary>
    /// <returns>An initialized <c>SmmBusRelTable</c> record.</returns>
    protected smmBusRelTable initProspectBusRelRecord()
    {
        SmmBusRelTable smmBusRelTable;

        smmBusRelTable.initValue();
        smmBusRelTable.BusRelAccount = smmParameters::getNumber(smmNumbSeqUsed::BusRel);
        smmBusRelTable.Party = this.Party;
        smmBusRelTable.modifiedField(fieldNum(smmBusRelTable,Party));

        return smmBusRelTable;
    }

]]></Source>
			</Method>
			<Method>
				<Name>daysOpen</Name>
				<Source><![CDATA[
    public display smmOpportunityDaysOpen daysOpen()
    {
        int daysOpen = 0;

        if (this.OpenedDate && this.Status == smmOpportunityStatus::Active)
        {
            daysOpen = DateTimeUtil::getSystemDate(DateTimeUtil::getUserPreferredTimeZone()) - this.OpenedDate;
        }
        else
        {
            if (this.OpenedDate && this.ClosedDate)
            {
                daysOpen = real2int(abs(this.OpenedDate - this.ClosedDate));
            }
        }

        return daysOpen;
    }

]]></Source>
			</Method>
			<Method>
				<Name>delete</Name>
				<Source><![CDATA[
    public void delete()
    {
        ttsbegin;

        super();

        this.removeSalesQuotationLink();

        // Write to CRM transaction log
        smmTransLog::initTrans(this, smmLogAction::delete);

        this.writeAndValidateCrossCompany(tableMethodStr(smmOpportunityTable, delete));

        ttscommit;
    }

]]></Source>
			</Method>
			<Method>
				<Name>removeSalesQuotationLink</Name>
				<Source><![CDATA[
    /// <summary>
    /// Removes the <c>SalesQuotationTable</c> link to the current <c>SmmOpportunityTable</c>.
    /// </summary>
    protected void removeSalesQuotationLink()
    {
        SalesQuotationTable salesQuotationTable;

        ttsbegin;
        update_recordset salesQuotationTable
            setting OpportunityId = ''
            where salesQuotationTable.OpportunityId == this.OpportunityId;
        ttscommit;
    }

]]></Source>
			</Method>
			<Method>
				<Name>dirPartyName</Name>
				<Source><![CDATA[
    public display DirPartyName dirPartyName()
    {
        DirPartyTable   dirPartyTable;
        DirPartyName    partyName;
        boolean         isSet = false;

        if (this.hasRelatedTable(identifierStr(IsPartyOf)))
        {
            dirPartyTable = this.relatedTable(identifierStr(IsPartyOf)) as DirPartyTable;

            //Check to make sure the fields we are accessing are selected.
            if (dirPartyTable && dirPartyTable.isFieldDataRetrieved(fieldstr(DirPartyTable, Name)))
            {
                partyName = dirPartyTable.Name;
                isSet = true;
            }
        }

        //If we aren't joined to DirPartyTable or it isn't selected, then do a query to get it.
        if (!isSet)
        {
            partyName = DirPartyTable::getName(this.Party);
        }

        return partyName;
    }

]]></Source>
			</Method>
			<Method>
				<Name>displaySourceId</Name>
				<Source><![CDATA[
    display smmSourceLinkId displaySourceId()
    {
        return this.sourceLinkedId(false, '');
    }

]]></Source>
			</Method>
			<Method>
				<Name>initFromProspect</Name>
				<Source><![CDATA[
    /// <summary>
    /// Initializes the lead table, depending on the prospect table.
    /// </summary>
    /// <param name="_callList">
    /// The <c>smmTMCallListTable</c> table that contains the record to initialize from.
    /// </param>
    public void initFromProspect(smmBusRelTable _smmBusRelTable)
    {
        this.smmLeadOpportunity::initFromProspect(_smmBusRelTable);
    }

]]></Source>
			</Method>
			<Method>
				<Name>initFromCallList</Name>
				<Source><![CDATA[
    /// <summary>
    /// Initializes the opportunity table, depending on the call list table
    /// </summary>
    /// <param name="_callList">
    /// The <c>smmTMCallListTable</c> table that contains the record to initialize from.
    /// </param>
    public void initFromCallList(smmTMCallListTable _callList)
    {
        this.smmLeadOpportunity::initFromCallList(_callList);
    }

]]></Source>
			</Method>
			<Method>
				<Name>initFromCampaignSelection</Name>
				<Source><![CDATA[
    /// <summary>
    /// Initializes the opportunity table, depending on the campaign selection table.
    /// </summary>
    /// <param name="_campaignSelection">
    /// <c>smmCampaignSelection</c> table buffer that contains the record to initialize from
    /// </param>
    public void initFromCampaignSelection(smmCampaignSelection _campaignSelection)
    {
        this.smmLeadOpportunity::initFromCampaignSelection(_campaignSelection);
    }

]]></Source>
			</Method>
			<Method>
				<Name>initFromCommon</Name>
				<Source><![CDATA[
    /// <summary>
    /// Initializes the opportunity table that is based on a table buffer.
    /// </summary>
    /// <param name="_common">
    /// The <c>Common</c> table buffer that contains the record to initialize from.
    /// </param>
    public void initFromCommon(Common _common)
    {
        switch (_common.TableId)
        {
            case tableNum(smmCampaignSelection) :
                this.initFromCampaignSelection(_common);
                break;

            case tableNum(smmTMCallListTable) :
                this.initFromCallList(_common);
                break;
        }
    }

]]></Source>
			</Method>
			<Method>
				<Name>initFromQuotation</Name>
				<Source><![CDATA[
    void initFromQuotation(SalesQuotationTable _quotation)
    {
        this.initValue();
        this.Party = _quotation.party();
        this.Subject = strFmt("@SYS112718", _quotation.QuotationId);
        this.SalesUnitId = _quotation.SalesUnitId;
    }

]]></Source>
			</Method>
			<Method>
				<Name>initValue</Name>
				<Source><![CDATA[
    public void initValue()
    {
        super();

        this.OwnerWorker = smmUtility::getCurrentContactWorker();
        this.OpenedByWorker = smmUtility::getCurrentContactWorker();
        this.OpenedDate = DateTimeUtil::getSystemDate(DateTimeUtil::getUserPreferredTimeZone());
        this.Status = smmOpportunityStatus::Active;

        if (smmLicense::crm())
        {
            this.SalesUnitId = smmUtility::getCurrentSalesUnit();
        }
    }

]]></Source>
			</Method>
			<Method>
				<Name>insert</Name>
				<Source><![CDATA[
    public void insert()
    {
        // try to fill out OpportunityId if it was not set
        if (!this.OpportunityId)
        {
            // if number sequence was not setup or set to Manual we will get back blank value
            this.OpportunityId = smmParameters::getNumber(smmNumbSeqUsed::OpportunityId);
        }

        ttsbegin;

        if (!this.Party)
        {
            //Field %1 must be filled in.
            throw error(strFmt("@SYS26332", fieldPName(DirPartyTable,Name)));
        }

        super();

        // Insert record in CRM transaction log
        smmTransLog::initTrans(this, smmLogAction::insert);

        // Create corresponding business relation record
        this.createProspectBusRelRecord();

        this.writeAndValidateCrossCompany(tableMethodStr(smmOpportunityTable, insert));

        ttscommit;
    }

]]></Source>
			</Method>
			<Method>
				<Name>modifiedField</Name>
				<Source><![CDATA[
    public void modifiedField(FieldId _fieldId)
    {
        super(_fieldId);

        switch (_fieldId)
        {
            case fieldNum(smmOpportunityTable, SourceTypeId):
                if (!this.SourceTypeId || this.SourceTypeId != this.orig().SourceTypeId)
                {
                    this.SourceRefTableId = 0;
                    this.SourceRefRecId   = 0;
                }
                if (this.SourceTypeId)
                {
                    this.SourceRefTableId = smmSourceType::type2TableId(smmSourceTypeTable::find(this.SourceTypeId).Type);
                }
                break;
            case fieldNum(smmOpportunityTable, ProcessName):
                if (!HierarchyTreeTable::checkNumberSeq() || !Hierarchy::checkNumberSeq() || !smmActivities::checkNumberSeq())
                {
                    this.ProcessName = this.orig().ProcessName;
                }
                break;
        }
    }

]]></Source>
			</Method>
			<Method>
				<Name>openedByName</Name>
				<Source><![CDATA[
    display smmOpenedBy openedByName()
    {
        return HcmWorker::worker2Name(this.OpenedByWorker);
    }

]]></Source>
			</Method>
			<Method>
				<Name>ownerName</Name>
				<Source><![CDATA[
    display smmOwner ownerName()
    {
        return HcmWorker::worker2Name(this.OwnerWorker);
    }

]]></Source>
			</Method>
			<Method>
				<Name>previewPaneTitle</Name>
				<Source><![CDATA[
    /// <summary>
    /// Gets the title on top of the preview pane.
    /// </summary>
    /// <returns>
    /// The title field of the preview pane.
    /// </returns>
    display Caption previewPaneTitle()
    {
        return strFmt("@SYS327590", this.OpportunityId, this.Subject);
    }

]]></Source>
			</Method>
			<Method>
				<Name>primaryAddress</Name>
				<Source><![CDATA[
    display Addressing primaryAddress()
    {
        return DirParty::getAddress(this.Party);
    }

]]></Source>
			</Method>
			<Method>
				<Name>prognosisDate</Name>
				<Source><![CDATA[
    display  smmQuotationPrognosisDate prognosisDate()
    {
        smmOpportunityOpenedDate    openedDate = this.OpenedDate;
        smmQuotationPrognosisDate   prognosisDate;
        smmQuotationPrognosisGroup  smmQuotationPrognosis;

        if (this.RecId && this.PrognosisId)
        {
            if (!openedDate)
            {
                openedDate = DateTimeUtil::getSystemDate(DateTimeUtil::getUserPreferredTimeZone());
            }

            smmQuotationPrognosis = smmQuotationPrognosisGroup::find(this.PrognosisId);

            prognosisDate = openedDate + (smmQuotationPrognosis.PrognosisFromDays + smmQuotationPrognosis.PrognosisToDays) / 2 ;
        }

        return prognosisDate;
    }

]]></Source>
			</Method>
			<Method>
				<Name>sourceLinkedId</Name>
				<Source><![CDATA[
    edit smmOpportunitySourceLinkId sourceLinkedId(boolean _set, smmOpportunitySourceLinkId _linkId)
    {
        FieldId                 fieldId;
        DictTable               dictTable;
        Common                  common;
        smmSourceTypeOptions    sourceOptionTable;

        fieldId = smmSourceType::tableId2FieldId(this.SourceRefTableId);
        if (fieldId == 0)
        {
            return '';
        }
        dictTable = new DictTable(this.SourceRefTableId);

        if (dictTable && dictTable.rights() >= AccessType::View)
        {
            common = dictTable.makeRecord();
        }
        else
        {
            return '';
        }

        if (_set)
        {
            if (_linkId)
            {
                select common where common.(fieldId) == _linkId;
                if (common)
                {
                    this.SourceRefRecId = common.RecId;
                }
                else
                {
                    // Verify if Allow-free form text is set for User-defined type
                    if (common.TableId == tableNum(smmSourceTypeOptions) && smmSourceTypeTable::find(this.SourceTypeId).AllowFreeformText)
                    {
                        sourceOptionTable = smmSourceTypeOptions::createFromAllowFreeFormText(this.SourceTypeId, _linkId);
                        this.SourceRefRecId = sourceOptionTable.RecId;
                    }
                    else
                    {
                        this.orig();
                        checkFailed(strFmt("@SYS31784",_linkId,fieldId2pname(this.SourceRefTableId,fieldId),tableId2pname(this.SourceRefTableId)));
                    }
                }
            }
            else
            {
                this.SourceRefRecId = 0;
            }
        }
        else if (this.SourceRefRecId)
        {
            select common where common.RecId == this.SourceRefRecId;
            if (!common)
            {
                this.SourceRefRecId = 0;
            }
        }

        if (common)
        {
            return common.(fieldId);
        }
        else
        {
            return '';
        }
    }

]]></Source>
			</Method>
			<Method>
				<Name>updateDaysToClose</Name>
				<Source><![CDATA[
    /// <summary>
    /// Updates the <c>DaysToClose</c> if the <c>SmmOpportunityTable</c> record's <c>OpenedDate</c> or <c>ClosedDate</c> have been changed.
    /// </summary>
    protected void updateDaysToClose()
    {
        if (this.OpenedDate != this.orig().OpenedDate ||
            this.ClosedDate != this.orig().ClosedDate)
        {
            if (this.OpenedDate && this.ClosedDate)
            {
                this.DaysToClose = real2int(abs(this.OpenedDate - this.ClosedDate));
            }
            else
            {
                this.DaysToClose = 0;
            }
        }
    }

]]></Source>
			</Method>
			<Method>
				<Name>updateResponsibleWorker</Name>
				<Source><![CDATA[
    /// <summary>
    /// Opens the <c>SmmActivityUpdateResponsible</c> Menu Function to update the responsible <c>OwnerWorker</c> if the <c>OwnerWorker</c> has been updated.
    /// </summary>
    protected void updateResponsibleWorker()
    {
        if (this.orig().OwnerWorker != this.OwnerWorker)
        {
            MenuFunction menuFunction = new MenuFunction(menuitemActionStr(smmActivityUpdateResponsible),MenuItemType::Action);
            if (menuFunction.checkAccessRights())
            {
                Args args = new Args(menuitemActionStr(smmActivityUpdateResponsible));
                args.record(this);
                args.parmEnumType(enumNum(NoYes));
                args.parmEnum(NoYes::Yes);
                args.parm(int642str(this.OwnerWorker));
                menuFunction.run(args);
            }
        }
    }

]]></Source>
			</Method>
			<Method>
				<Name>update</Name>
				<Source><![CDATA[
    public void update()
    {
        ttsbegin;

        this.updateDaysToClose();

        super();

        this.updateResponsibleWorker();

        // Write to CRM transaction log
        smmTransLog::initTrans(this, smmLogAction::update);
        
        this.writeAndValidateCrossCompany(tableMethodStr(smmOpportunityTable, update));

        ttscommit;
    }

]]></Source>
			</Method>
			<Method>
				<Name>validateField</Name>
				<Source><![CDATA[
    /// <summary>
    /// Validates if OwnerWorker, ClosedByWorker and OpenedByWorker of <c>smmOpportunityTable</c> table belongs to the current Legal Entity.
    /// </summary>
    /// <param name="_fieldIdToCheck">
    /// OwnerWorker of the record in the <c>smmOpportunityTable</c> table.
    /// ClosedByWorker of the record in the <c>smmOpportunityTable</c> table.
    /// OpenedByWorker of the record in the <c>smmOpportunityTable</c> table.
    /// </param>
    /// <returns>
    /// True if Worker belongs to current Legal Entity otherwise false.
    /// </returns>
    public boolean validateField(FieldId _fieldIdToCheck)
    {
        boolean ret = super(_fieldIdToCheck);

        ret = ret && this.validateFieldCurrentCompany(_fieldIdToCheck);

        ret = ret && this.writeAndValidateCrossCompany(tableMethodStr(smmOpportunityTable, validateField), _fieldIdToCheck);

        return ret;
    }

]]></Source>
			</Method>
			<Method>
				<Name>validateFieldCurrentCompany</Name>
				<Source><![CDATA[
    private boolean validateFieldCurrentCompany(FieldId _fieldIdToCheck)
    {
        boolean ret = true;

        switch (_fieldIdToCheck)
        {
            case fieldNum(smmOpportunityTable, OwnerWorker) :
                if (this.OwnerWorker)
                {
                    ret = smmUtility::isValidWorkerInCurrentCompany(this.OwnerWorker);
                }
                break;

            case fieldNum(smmOpportunityTable, ClosedByWorker) :
                if (this.ClosedByWorker)
                {
                    ret = smmUtility::isValidWorkerInCurrentCompany(this.ClosedByWorker);
                }
                break;

            case fieldNum(smmOpportunityTable, OpenedByWorker) :
                if (this.OpenedByWorker)
                {
                    ret = smmUtility::isValidWorkerInCurrentCompany(this.OpenedByWorker);
                }
                break;
        }

        return ret;
    }

]]></Source>
			</Method>
			<Method>
				<Name>validateWrite</Name>
				<Source><![CDATA[
    public boolean validateWrite(boolean validateWorkerOnly = false)
    {
        boolean ret = true;
        smmParametersTable  smmParametersTable = smmParametersTable::find();

        if (!validateWorkerOnly)
        {
            ret = super();

            // Validate that parameters are setup correctly if not yet a customer
            if (ret && this.Party && !DirPartyTableHelper::isCustomerOrRelation(this.Party))
            {
                if (!(smmParametersTable.LanguageId && smmParametersTable.CurrencyCode && smmParametersTable.BusRelTypeId))
                {
                    ret = checkFailed("@SYS105615"); // Parameter setup of either language, currency, or type not specified.  This is required to create a new prospect.
                }
            }
        }

        ret = ret && this.validateWriteIsValidWorkerCurrentCompany();

        ret = ret && this.writeAndValidateCrossCompany(tableMethodStr(smmOpportunityTable, validateWrite));

        return ret;
    }

]]></Source>
			</Method>
			<Method>
				<Name>validateWriteIsValidWorkerCurrentCompany</Name>
				<Source><![CDATA[
    private boolean validateWriteIsValidWorkerCurrentCompany()
    {
        boolean ret = true;

        if (this.ClosedByWorker && (this.ClosedByWorker != this.orig().ClosedByWorker))
        {
            ret = smmUtility::isValidWorkerInCurrentCompany(this.ClosedByWorker);
        }

        if (this.OpenedByWorker && (this.OpenedByWorker != this.orig().OpenedByWorker))
        {
            ret = ret && smmUtility::isValidWorkerInCurrentCompany(this.OpenedByWorker);
        }

        return ret;
    }

]]></Source>
			</Method>
			<Method>
				<Name>exist</Name>
				<Source><![CDATA[
    public static boolean exist(smmOpportunityId _opportunityId)
    {
        return (smmOpportunityTable::find(_opportunityId).RecId != 0);
    }

]]></Source>
			</Method>
			<Method>
				<Name>find</Name>
				<Source><![CDATA[
    public static smmOpportunityTable find(smmOpportunityId _opportunityId, boolean _forupdate = false)
    {
        smmOpportunityTable  smmOpportunityTable = null;

        if (_opportunityId)
        {
            smmOpportunityTable.selectForUpdate(_forupdate);

            select firstonly smmOpportunityTable
                where smmOpportunityTable.OpportunityId == _opportunityId;
        }

        return smmOpportunityTable;
    }

]]></Source>
			</Method>
			<Method>
				<Name>findRec</Name>
				<Source><![CDATA[
    public static smmOpportunityTable findRec(RecId _recId, boolean _forupdate = false)
    {
        smmOpportunityTable  smmOpportunityTable = null;

        if (_recId)
        {
            smmOpportunityTable.selectForUpdate(_forupdate);

            select firstonly smmOpportunityTable
                where smmOpportunityTable.RecId == _recId;
        }
        return smmOpportunityTable;
    }

]]></Source>
			</Method>
			<Method>
				<Name>IsPartyOf</Name>
				<Source><![CDATA[
    public DirPartyTable IsPartyOf(DirPartyTable _relatedTable = null)
        {
            if (prmIsDefault(_relatedTable))
            {
                return this.setLink('IsPartyOf');
            }
            else
            {
                return this.setLink('IsPartyOf', _relatedTable);
            }
        }

]]></Source>
			</Method>
			<Method>
				<Name>DocuRefOnInsert</Name>
				<Source><![CDATA[
    [SubscribesTo(classstr(DocuRefExtension), delegatestr(DocuRefExtension, OnInsert))]
    static void DocuRefOnInsert(DocuRef _docuRef, RecId _interCompanyFromRecId)
    {
        if (_docuRef.RefTableId == tablenum(smmOpportunityTable))
        {
            changecompany(_docuRef.RefCompanyId)
            {
                _docuRef.Party              = smmOpportunityTable::findRec(_docuRef.RefRecId).Party;
                _docuRef.Author             = DirPersonUser::current().PersonParty;
                _docuRef.ActualCompanyId    = curext();
            }
        }
    }

]]></Source>
			</Method>
			<Method>
				<Name>writeAndValidateCrossCompany</Name>
				<Source><![CDATA[
    private boolean writeAndValidateCrossCompany(str _methodName, FieldId _fieldIdToCheck = 0)
    {
        boolean ret = true;

        SysDataSharingPolicy policy = SysDataSharingPolicy::findSharingPolicyByCompanyAndTable(curExt(), tableId2name(this.TableId));
        if (policy.RecId && policy.IsEnabled)
        {
            Query       query = SysDataSharingCrossCompanyValidatorQueryBuilder::buildQuery(this.orig(), policy.RecId);
            QueryRun    queryRun = new QueryRun(query);
        
            while (queryRun.Next())
            {
                smmOpportunityTable companySmmOpportunityTable = queryRun.get(this.TableId);
                DataAreaId company = companySmmOpportunityTable.DataAreaId;

                if (companysmmOpportunityTable.RecId && company)
                {
                    changecompany(company)
                    {
                        smmOpportunityTable smmOpportunityTable = smmOpportunityTable::find(companySmmOpportunityTable.OpportunityId);
                        if (smmOpportunityTable.RecId)
                        {
                            buf2Buf(this, smmOpportunityTable);

                            switch (_methodName)
                            {
                                case tableMethodStr(smmOpportunityTable, insert):
                                    if (!SysDataSharingPolicy::isSharingPolicyEnabledByCompanyAndTable(company, tableStr(smmTransLog)))
                                    {
                                        smmTransLog::initTrans(smmOpportunityTable, smmLogAction::insert);
                                    }

                                    if (!SysDataSharingPolicy::isSharingPolicyEnabledByCompanyAndTable(company, tableStr(SmmBusRelTable)))
                                    {
                                        smmOpportunityTable.createProspectBusRelRecord();
                                    }
                                    break;

                                case tableMethodStr(smmOpportunityTable, update):
                                    if (!SysDataSharingPolicy::isSharingPolicyEnabledByCompanyAndTable(company, tableStr(smmTransLog)))
                                    {
                                        smmTransLog::initTrans(smmOpportunityTable, smmLogAction::update);
                                    }
                                    break;

                                case tableMethodStr(smmOpportunityTable, delete):
                                    if (!SysDataSharingPolicy::isSharingPolicyEnabledByCompanyAndTable(company, tableStr(SalesQuotationTable)))
                                    {
                                        smmOpportunityTable.removeSalesQuotationLink();
                                    }

                                    if (!SysDataSharingPolicy::isSharingPolicyEnabledByCompanyAndTable(company, tableStr(smmTransLog)))
                                    {
                                        smmTransLog::initTrans(smmOpportunityTable, smmLogAction::delete);
                                    }
                                    break;

                                case tableMethodStr(smmOpportunityTable, validateWrite):
                                    if (!smmOpportunityTable.validateWriteIsValidWorkerCurrentCompany())
                                    {
                                        return false;
                                    }
                                    break;
                                case tableMethodStr(smmOpportunityTable, validateField):
                                    if (!smmOpportunityTable.validateFieldCurrentCompany(_fieldIdToCheck))
                                    {
                                        return false;
                                    }
                                    break;
                                default:
                                    return true;
                            }
                        }
                    }
                }
            }
        }

        return ret;
    }

]]></Source>
			</Method>
			<Method>
				<Name>shouldThrowExceptionOnZeroDelete</Name>
				<Source><![CDATA[
    /// <summary>
    /// Determines if concurrent deletes should throw exception.
    /// </summary>
    /// <returns>true if exception should be thrown; otherwise false.</returns>
    public boolean shouldThrowExceptionOnZeroDelete()
    {
        return super() || SalesEnforceConcurrentDeletesFlight::instance().isEnabled();
    }

]]></Source>
			</Method>
		</Methods>
	</SourceCode>
	<ConfigurationKey>SmmCRM</ConfigurationKey>
	<DeveloperDocumentation>@SYS124689</DeveloperDocumentation>
	<FormRef>smmopportunityTable</FormRef>
	<Label>@SYS81484</Label>
	<SingularLabel>@SYS102388</SingularLabel>
	<TableGroup>Main</TableGroup>
	<TitleField1>OpportunityId</TitleField1>
	<TitleField2>Subject</TitleField2>
	<AllowRowVersionChangeTracking>Yes</AllowRowVersionChangeTracking>
	<CacheLookup>Found</CacheLookup>
	<ClusteredIndex>OpportunityIdIdx</ClusteredIndex>
	<CreatedBy>Yes</CreatedBy>
	<CreatedDateTime>Yes</CreatedDateTime>
	<DataSharingType>Duplicate</DataSharingType>
	<ModifiedBy>Yes</ModifiedBy>
	<ModifiedDateTime>Yes</ModifiedDateTime>
	<Modules>SalesAndMarketing</Modules>
	<PrimaryIndex>OpportunityIdIdx</PrimaryIndex>
	<ReplacementKey>OpportunityIdIdx</ReplacementKey>
	<DeleteActions>
		<AxTableDeleteAction>
			<Name>DirOrgPersonRelations</Name>
			<DeleteAction>Cascade</DeleteAction>
			<Relation></Relation>
			<Table>DirOrgPersonRelations</Table>
		</AxTableDeleteAction>
		<AxTableDeleteAction>
			<Name>smmActivityParentLinkTable</Name>
			<DeleteAction>Cascade</DeleteAction>
			<Relation></Relation>
			<Table>smmActivityParentLinkTable</Table>
		</AxTableDeleteAction>
		<AxTableDeleteAction>
			<Name>smmLeadRelTable</Name>
			<DeleteAction>Cascade</DeleteAction>
			<Relation></Relation>
			<Table>smmLeadRelTable</Table>
		</AxTableDeleteAction>
		<AxTableDeleteAction>
			<Name>smmOpportunityRelTable</Name>
			<DeleteAction>Cascade</DeleteAction>
			<Relation></Relation>
			<Table>smmOpportunityRelTable</Table>
		</AxTableDeleteAction>
		<AxTableDeleteAction>
			<Name>smmQuotationCompetitors</Name>
			<DeleteAction>Cascade</DeleteAction>
			<Relation></Relation>
			<Table>smmQuotationCompetitors</Table>
		</AxTableDeleteAction>
		<AxTableDeleteAction>
			<Name>smmResponsibilitiesEmplTable</Name>
			<DeleteAction>Cascade</DeleteAction>
			<Relation></Relation>
			<Table>smmResponsibilitiesEmplTable</Table>
		</AxTableDeleteAction>
		<AxTableDeleteAction>
			<Name>smmSwotTable</Name>
			<DeleteAction>Cascade</DeleteAction>
			<Relation></Relation>
			<Table>smmSwotTable</Table>
		</AxTableDeleteAction>
	</DeleteActions>
	<FieldGroups>
		<AxTableFieldGroup>
			<Name>AutoSummary</Name>
			<Fields>
				<AxTableFieldGroupField>
					<DataField>OwnerWorker</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Status</DataField>
				</AxTableFieldGroupField>
			</Fields>
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>AutoReport</Name>
			<Fields>
				<AxTableFieldGroupField>
					<DataField>OpportunityId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Subject</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Status</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>OwnerWorker</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>PrognosisId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>ProbabilityId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>EstimatedRevenue</DataField>
				</AxTableFieldGroupField>
			</Fields>
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>AutoLookup</Name>
			<Fields>
				<AxTableFieldGroupField>
					<DataField>OpportunityId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Subject</DataField>
				</AxTableFieldGroupField>
			</Fields>
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>AutoIdentification</Name>
			<AutoPopulate>Yes</AutoPopulate>
			<Fields>
				<AxTableFieldGroupField>
					<DataField>OpportunityId</DataField>
				</AxTableFieldGroupField>
			</Fields>
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>AutoBrowse</Name>
			<Fields>
				<AxTableFieldGroupField>
					<DataField>OpenedByWorker</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>ClosedByWorker</DataField>
				</AxTableFieldGroupField>
			</Fields>
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>Administration</Name>
			<Label>@SYS40777</Label>
			<Fields>
				<AxTableFieldGroupField>
					<DataField>OpenedByWorker</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>OpenedDate</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>ClosedByWorker</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>ClosedDate</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>daysOpen</DataField>
				</AxTableFieldGroupField>
			</Fields>
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>CaseMoreInformation</Name>
			<Label>@SYS314356</Label>
			<Fields>
				<AxTableFieldGroupField>
					<DataField>OpportunityId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Subject</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>dirPartyName</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Status</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>ProcessName</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>PrognosisId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>ProbabilityId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>OwnerWorker</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>EstimatedRevenue</DataField>
				</AxTableFieldGroupField>
			</Fields>
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>DaysToClose</Name>
			<Label>@SYS111018</Label>
			<Fields>
				<AxTableFieldGroupField>
					<DataField>DaysToClose</DataField>
				</AxTableFieldGroupField>
			</Fields>
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>EPAdministration</Name>
			<Label>@SYS40777</Label>
			<Fields>
				<AxTableFieldGroupField>
					<DataField>OpenedDate</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>daysOpen</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>OpenedByWorker</DataField>
				</AxTableFieldGroupField>
			</Fields>
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>EPMiniPage</Name>
			<Label>@SYS108232</Label>
			<Fields>
				<AxTableFieldGroupField>
					<DataField>Subject</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Status</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>ProbabilityId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Memo</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>OwnerWorker</DataField>
				</AxTableFieldGroupField>
			</Fields>
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>Estimate</Name>
			<Label>@SYS80984</Label>
			<Fields>
				<AxTableFieldGroupField>
					<DataField>EstimatedRevenue</DataField>
				</AxTableFieldGroupField>
			</Fields>
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>Identification</Name>
			<Label>@SYS36186</Label>
			<Fields>
				<AxTableFieldGroupField>
					<DataField>OpportunityId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Party</DataField>
				</AxTableFieldGroupField>
			</Fields>
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>Memo</Name>
			<Label>@SYS318221</Label>
			<Fields>
				<AxTableFieldGroupField>
					<DataField>Memo</DataField>
				</AxTableFieldGroupField>
			</Fields>
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>Name</Name>
			<Label>@SYS36032</Label>
			<Fields>
				<AxTableFieldGroupField>
					<DataField>Party</DataField>
				</AxTableFieldGroupField>
			</Fields>
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>Opportunity</Name>
			<Label>@SYS102388</Label>
			<Fields>
				<AxTableFieldGroupField>
					<DataField>Subject</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Party</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Status</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>ProbabilityId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>SalesUnitId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>OwnerWorker</DataField>
				</AxTableFieldGroupField>
			</Fields>
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>Overview</Name>
			<Label>@SYS35894</Label>
			<Fields>
				<AxTableFieldGroupField>
					<DataField>OpportunityId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Subject</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Party</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Status</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>ProcessName</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>PrognosisId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>ProbabilityId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>OwnerWorker</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>EstimatedRevenue</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>daysOpen</DataField>
				</AxTableFieldGroupField>
			</Fields>
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>Prognosis</Name>
			<Label>@SYS81390</Label>
			<Fields>
				<AxTableFieldGroupField>
					<DataField>PrognosisId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>prognosisDate</DataField>
				</AxTableFieldGroupField>
			</Fields>
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>Reason</Name>
			<Label>@SYS86426</Label>
			<Fields>
				<AxTableFieldGroupField>
					<DataField>Reason</DataField>
				</AxTableFieldGroupField>
			</Fields>
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>smmOpportunityListMoreInfo</Name>
			<Label>@SYS110470</Label>
			<Fields>
				<AxTableFieldGroupField>
					<DataField>Subject</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>SalesUnitId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>ownerName</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>ProcessName</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>OpenedDate</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>daysOpen</DataField>
				</AxTableFieldGroupField>
			</Fields>
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>smmOpportunityOverviewDetails</Name>
			<Label>@SYS80118</Label>
			<Fields>
				<AxTableFieldGroupField>
					<DataField>Subject</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Status</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>ProcessName</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>SalesUnitId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>ownerName</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>SourceTypeId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>displaySourceId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>SourceDescription</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Memo</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>openedByName</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>OpenedDate</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>closedByName</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>ClosedDate</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>Reason</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>ClosedByWorker</DataField>
				</AxTableFieldGroupField>
			</Fields>
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>Source</Name>
			<Label>@SYS11258</Label>
			<Fields>
				<AxTableFieldGroupField>
					<DataField>SourceRefRecId</DataField>
				</AxTableFieldGroupField>
				<AxTableFieldGroupField>
					<DataField>SourceRefTableId</DataField>
				</AxTableFieldGroupField>
			</Fields>
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>SourceDesc</Name>
			<Label>@SYS80470</Label>
			<Fields>
				<AxTableFieldGroupField>
					<DataField>SourceDescription</DataField>
				</AxTableFieldGroupField>
			</Fields>
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>SourceTypeId</Name>
			<Label>@SYS103028</Label>
			<Fields>
				<AxTableFieldGroupField>
					<DataField>SourceTypeId</DataField>
				</AxTableFieldGroupField>
			</Fields>
		</AxTableFieldGroup>
	</FieldGroups>
	<Fields>
		<AxTableField xmlns=""
			i:type="AxTableFieldInt64">
			<Name>ClosedByWorker</Name>
			<AssetClassification>Customer Content </AssetClassification>
			<ExtendedDataType>smmOpportunityClosedByWorker</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldDate">
			<Name>ClosedDate</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>smmOpportunityClosedDate</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldInt">
			<Name>DaysToClose</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>smmDaysToClose</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldReal">
			<Name>EstimatedRevenue</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>smmOpportunityEstimatedRevenue</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>Memo</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>smmOpportunityMemo</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldInt64">
			<Name>OpenedByWorker</Name>
			<AssetClassification>Customer Content </AssetClassification>
			<ExtendedDataType>smmOpportunityOpenedByWorker</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldDate">
			<Name>OpenedDate</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>smmOpportunityOpenedDate</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>OpportunityId</Name>
			<AllowEdit>No</AllowEdit>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>smmOpportunityId</ExtendedDataType>
			<Mandatory>Yes</Mandatory>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldInt64">
			<Name>OwnerWorker</Name>
			<AssetClassification>Customer Content </AssetClassification>
			<ExtendedDataType>smmOpportunityOwnerWorker</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldInt64">
			<Name>Party</Name>
			<AssetClassification>Customer Content </AssetClassification>
			<ExtendedDataType>DirPartyRecId</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldInt">
			<Name>ProbabilityId</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>smmQuotationProbabilityId</ExtendedDataType>
			<Label>@SYS80159</Label>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>ProcessName</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>smmOpportunitySalesProcess</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>PrognosisId</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>smmQuotationPrognosisId</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>Reason</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>smmQuotationReasonId</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>SalesUnitId</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>smmSalesUnitId</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>SourceDescription</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>smmSourceComment</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldInt64">
			<Name>SourceRefRecId</Name>
			<AssetClassification>System Metadata</AssetClassification>
			<ExtendedDataType>smmSourceRecId</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldInt">
			<Name>SourceRefTableId</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>RefTableId</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>SourceTypeId</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>SmmSourceTypeId</ExtendedDataType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldEnum">
			<Name>Status</Name>
			<AllowEdit>No</AllowEdit>
			<AllowEditOnCreate>No</AllowEditOnCreate>
			<AssetClassification>Customer Content</AssetClassification>
			<EnumType>smmOpportunityStatus</EnumType>
		</AxTableField>
		<AxTableField xmlns=""
			i:type="AxTableFieldString">
			<Name>Subject</Name>
			<AssetClassification>Customer Content</AssetClassification>
			<ExtendedDataType>smmOpportunitySubject</ExtendedDataType>
			<Mandatory>Yes</Mandatory>
		</AxTableField>
	</Fields>
	<FullTextIndexes />
	<Indexes>
		<AxTableIndex>
			<Name>OpportunityIdIdx</Name>
			<AlternateKey>Yes</AlternateKey>
			<Fields>
				<AxTableIndexField>
					<DataField>OpportunityId</DataField>
				</AxTableIndexField>
			</Fields>
		</AxTableIndex>
		<AxTableIndex>
			<Name>StatusIdx</Name>
			<AllowDuplicates>Yes</AllowDuplicates>
			<Fields>
				<AxTableIndexField>
					<DataField>Status</DataField>
				</AxTableIndexField>
			</Fields>
		</AxTableIndex>
		<AxTableIndex>
			<Name>OwnerIdx</Name>
			<AllowDuplicates>Yes</AllowDuplicates>
			<Fields>
				<AxTableIndexField>
					<DataField>OwnerWorker</DataField>
				</AxTableIndexField>
			</Fields>
		</AxTableIndex>
		<AxTableIndex>
			<Name>HcmWorkerIdx</Name>
			<AllowDuplicates>Yes</AllowDuplicates>
			<Fields>
				<AxTableIndexField>
					<DataField>ClosedByWorker</DataField>
				</AxTableIndexField>
			</Fields>
		</AxTableIndex>
		<AxTableIndex>
			<Name>HcmWorkerIdx1</Name>
			<AllowDuplicates>Yes</AllowDuplicates>
			<Fields>
				<AxTableIndexField>
					<DataField>OpenedByWorker</DataField>
				</AxTableIndexField>
			</Fields>
		</AxTableIndex>
	</Indexes>
	<Mappings>
		<AxTableMapping>
			<MappingTable>DirPartyMap</MappingTable>
			<Connections>
				<AxTableMappingConnection>
					<MapField>Party</MapField>
					<MapFieldTo>Party</MapFieldTo>
				</AxTableMappingConnection>
				<AxTableMappingConnection>
					<MapField>Account</MapField>
					<MapFieldTo>OpportunityId</MapFieldTo>
				</AxTableMappingConnection>
			</Connections>
		</AxTableMapping>
		<AxTableMapping>
			<MappingTable>smmLeadOpportunity</MappingTable>
			<Connections>
				<AxTableMappingConnection>
					<MapField>Party</MapField>
					<MapFieldTo>Party</MapFieldTo>
				</AxTableMappingConnection>
				<AxTableMappingConnection>
					<MapField>SourceDescription</MapField>
					<MapFieldTo>SourceDescription</MapFieldTo>
				</AxTableMappingConnection>
				<AxTableMappingConnection>
					<MapField>SourceRefRecId</MapField>
					<MapFieldTo>SourceRefRecId</MapFieldTo>
				</AxTableMappingConnection>
				<AxTableMappingConnection>
					<MapField>SourceRefTableId</MapField>
					<MapFieldTo>SourceRefTableId</MapFieldTo>
				</AxTableMappingConnection>
				<AxTableMappingConnection>
					<MapField>SourceTypeId</MapField>
					<MapFieldTo>SourceTypeId</MapFieldTo>
				</AxTableMappingConnection>
			</Connections>
		</AxTableMapping>
	</Mappings>
	<Relations>
		<AxTableRelation xmlns=""
			i:type="AxTableRelationForeignKey">
			<Name>ClosedByWorker</Name>
			<Cardinality>ZeroMore</Cardinality>
			<RelatedTable>HcmWorker</RelatedTable>
			<RelatedTableCardinality>ZeroOne</RelatedTableCardinality>
			<RelatedTableRole>HcmWorker</RelatedTableRole>
			<RelationshipType>Association</RelationshipType>
			<Role>HcmWorker_smmOpportunityTable</Role>
			<UseDefaultRoleNames>No</UseDefaultRoleNames>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>ClosedByWorker</Name>
					<Field>ClosedByWorker</Field>
					<RelatedField>RecId</RelatedField>
				</AxTableRelationConstraint>
			</Constraints>
			<Index>RecId</Index>
		</AxTableRelation>
		<AxTableRelation>
			<Name>CustTable</Name>
			<Cardinality>ZeroMore</Cardinality>
			<EntityRelationshipRole>@SYS123670</EntityRelationshipRole>
			<RelatedTable>CustTable</RelatedTable>
			<RelatedTableCardinality>ZeroOne</RelatedTableCardinality>
			<RelationshipType>Association</RelationshipType>
			<Validate>No</Validate>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>Party</Name>
					<Field>Party</Field>
					<RelatedField>Party</RelatedField>
				</AxTableRelationConstraint>
			</Constraints>
		</AxTableRelation>
		<AxTableRelation>
			<Name>DirAddressBookParty</Name>
			<RelatedTable>DirAddressBookPartyAllView</RelatedTable>
			<RelatedTableRole>DirAddressBookPartyAllView</RelatedTableRole>
			<RelationshipType>Link</RelationshipType>
			<Role>smmOpportunityTable</Role>
			<Validate>No</Validate>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>Party</Name>
					<Field>Party</Field>
					<RelatedField>Party</RelatedField>
				</AxTableRelationConstraint>
			</Constraints>
		</AxTableRelation>
		<AxTableRelation xmlns=""
			i:type="AxTableRelationForeignKey">
			<Name>DirPartyTable_FK</Name>
			<Cardinality>ZeroMore</Cardinality>
			<CreateNavigationPropertyMethods>Yes</CreateNavigationPropertyMethods>
			<EntityRelationshipRole>@SYS123670</EntityRelationshipRole>
			<RelatedTable>DirPartyTable</RelatedTable>
			<RelatedTableCardinality>ZeroOne</RelatedTableCardinality>
			<RelatedTableRole>IsPartyOf</RelatedTableRole>
			<RelationshipType>Association</RelationshipType>
			<Role>IsOpportunityFor</Role>
			<UseDefaultRoleNames>No</UseDefaultRoleNames>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>Party</Name>
					<Field>Party</Field>
					<RelatedField>RecId</RelatedField>
				</AxTableRelationConstraint>
			</Constraints>
			<Index>RecId</Index>
		</AxTableRelation>
		<AxTableRelation>
			<Name>Hierarchy</Name>
			<EDTRelation>Yes</EDTRelation>
			<RelatedTable>Hierarchy</RelatedTable>
			<RelatedTableRole>Hierarchy</RelatedTableRole>
			<RelationshipType>Link</RelationshipType>
			<Role>smmOpportunityTable</Role>
			<UseDefaultRoleNames>No</UseDefaultRoleNames>
			<Validate>No</Validate>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>ProcessName</Name>
					<SourceEDT>smmOpportunitySalesProcess</SourceEDT>
					<Field>ProcessName</Field>
					<RelatedField>Name</RelatedField>
				</AxTableRelationConstraint>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintRelatedFixed">
					<Name>IsActive_Extern</Name>
					<SourceEDT>smmOpportunitySalesProcess</SourceEDT>
					<RelatedField>IsActive</RelatedField>
					<ValueStr>NoYes::Yes</ValueStr>
				</AxTableRelationConstraint>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintRelatedFixed">
					<Name>IsTemplate_Extern</Name>
					<SourceEDT>smmOpportunitySalesProcess</SourceEDT>
					<RelatedField>IsTemplate</RelatedField>
					<ValueStr>NoYes::Yes</ValueStr>
				</AxTableRelationConstraint>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintRelatedFixed">
					<Name>HierarchyType_Extern</Name>
					<SourceEDT>smmOpportunitySalesProcess</SourceEDT>
					<RelatedField>HierarchyType</RelatedField>
					<ValueStr>HierarchyType::Opportunity</ValueStr>
				</AxTableRelationConstraint>
			</Constraints>
		</AxTableRelation>
		<AxTableRelation xmlns=""
			i:type="AxTableRelationForeignKey">
			<Name>OpenedByWorker</Name>
			<Cardinality>ZeroMore</Cardinality>
			<RelatedTable>HcmWorker</RelatedTable>
			<RelatedTableCardinality>ZeroOne</RelatedTableCardinality>
			<RelatedTableRole>HcmWorker_1</RelatedTableRole>
			<RelationshipType>Association</RelationshipType>
			<Role>HcmWorker_1_smmOpportunityTable</Role>
			<UseDefaultRoleNames>No</UseDefaultRoleNames>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>OpenedByWorker</Name>
					<Field>OpenedByWorker</Field>
					<RelatedField>RecId</RelatedField>
				</AxTableRelationConstraint>
			</Constraints>
			<Index>RecId</Index>
		</AxTableRelation>
		<AxTableRelation xmlns=""
			i:type="AxTableRelationForeignKey">
			<Name>OwnerWorker</Name>
			<Cardinality>ZeroMore</Cardinality>
			<RelatedTable>HcmWorker</RelatedTable>
			<RelatedTableCardinality>ZeroOne</RelatedTableCardinality>
			<RelatedTableRole>HcmWorker_2</RelatedTableRole>
			<RelationshipType>Association</RelationshipType>
			<Role>HcmWorker_2_smmOpportunityTable</Role>
			<UseDefaultRoleNames>No</UseDefaultRoleNames>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>OwnerWorker</Name>
					<Field>OwnerWorker</Field>
					<RelatedField>RecId</RelatedField>
				</AxTableRelationConstraint>
			</Constraints>
			<Index>RecId</Index>
		</AxTableRelation>
		<AxTableRelation>
			<Name>smmBusRelTable</Name>
			<Cardinality>ZeroMore</Cardinality>
			<EntityRelationshipRole>@SYS123670</EntityRelationshipRole>
			<RelatedTable>smmBusRelTable</RelatedTable>
			<RelatedTableCardinality>ZeroOne</RelatedTableCardinality>
			<RelationshipType>Association</RelationshipType>
			<Validate>No</Validate>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>Party</Name>
					<Field>Party</Field>
					<RelatedField>Party</RelatedField>
				</AxTableRelationConstraint>
			</Constraints>
		</AxTableRelation>
		<AxTableRelation>
			<Name>smmOpportunityRelTable</Name>
			<EntityRelationshipRole>@SYS124680</EntityRelationshipRole>
			<RelatedTable>smmOpportunityRelTable</RelatedTable>
			<RelationshipType>Link</RelationshipType>
			<Validate>No</Validate>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>TableId</Name>
					<Field>TableId</Field>
					<RelatedField>RefTableId</RelatedField>
				</AxTableRelationConstraint>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>RecId</Name>
					<Field>RecId</Field>
					<RelatedField>RefRecId</RelatedField>
				</AxTableRelationConstraint>
			</Constraints>
		</AxTableRelation>
		<AxTableRelation xmlns=""
			i:type="AxTableRelationForeignKey">
			<Name>smmQuotationProbabilityGroup</Name>
			<Cardinality>ZeroMore</Cardinality>
			<EDTRelation>Yes</EDTRelation>
			<OnDelete>Restricted</OnDelete>
			<RelatedTable>smmQuotationProbabilityGroup</RelatedTable>
			<RelatedTableCardinality>ZeroOne</RelatedTableCardinality>
			<RelatedTableRole>smmQuotationProbabilityGroup</RelatedTableRole>
			<RelationshipType>Association</RelationshipType>
			<Role>smmOpportunityTable</Role>
			<UseDefaultRoleNames>No</UseDefaultRoleNames>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>ProbabilityId</Name>
					<SourceEDT>smmQuotationProbabilityId</SourceEDT>
					<Field>ProbabilityId</Field>
					<RelatedField>ProbabilityId</RelatedField>
				</AxTableRelationConstraint>
			</Constraints>
			<Index>ProbabilityIdx</Index>
		</AxTableRelation>
		<AxTableRelation xmlns=""
			i:type="AxTableRelationForeignKey">
			<Name>smmQuotationPrognosisGroup</Name>
			<Cardinality>ZeroMore</Cardinality>
			<EDTRelation>Yes</EDTRelation>
			<OnDelete>Restricted</OnDelete>
			<RelatedTable>smmQuotationPrognosisGroup</RelatedTable>
			<RelatedTableCardinality>ZeroOne</RelatedTableCardinality>
			<RelatedTableRole>smmQuotationPrognosisGroup</RelatedTableRole>
			<RelationshipType>Association</RelationshipType>
			<Role>smmOpportunityTable</Role>
			<UseDefaultRoleNames>No</UseDefaultRoleNames>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>PrognosisId</Name>
					<SourceEDT>smmQuotationPrognosisId</SourceEDT>
					<Field>PrognosisId</Field>
					<RelatedField>PrognosisId</RelatedField>
				</AxTableRelationConstraint>
			</Constraints>
			<Index>PrognosisIdx</Index>
		</AxTableRelation>
		<AxTableRelation xmlns=""
			i:type="AxTableRelationForeignKey">
			<Name>smmQuotationReasonGroup</Name>
			<Cardinality>ZeroMore</Cardinality>
			<EDTRelation>Yes</EDTRelation>
			<OnDelete>Restricted</OnDelete>
			<RelatedTable>smmQuotationReasonGroup</RelatedTable>
			<RelatedTableCardinality>ZeroOne</RelatedTableCardinality>
			<RelatedTableRole>smmQuotationReasonGroup</RelatedTableRole>
			<RelationshipType>Association</RelationshipType>
			<Role>smmOpportunityTable</Role>
			<UseDefaultRoleNames>No</UseDefaultRoleNames>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>Reason</Name>
					<SourceEDT>smmQuotationReasonId</SourceEDT>
					<Field>Reason</Field>
					<RelatedField>ReasonId</RelatedField>
				</AxTableRelationConstraint>
			</Constraints>
			<Index>ReasonIdx</Index>
		</AxTableRelation>
		<AxTableRelation xmlns=""
			i:type="AxTableRelationForeignKey">
			<Name>smmSalesUnit</Name>
			<Cardinality>ZeroMore</Cardinality>
			<EDTRelation>Yes</EDTRelation>
			<RelatedTable>smmSalesUnit</RelatedTable>
			<RelatedTableCardinality>ZeroOne</RelatedTableCardinality>
			<RelatedTableRole>smmSalesUnit</RelatedTableRole>
			<RelationshipType>Association</RelationshipType>
			<Role>smmOpportunityTable</Role>
			<UseDefaultRoleNames>No</UseDefaultRoleNames>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>SalesUnitId</Name>
					<SourceEDT>smmSalesUnitId</SourceEDT>
					<Field>SalesUnitId</Field>
					<RelatedField>SalesUnitId</RelatedField>
				</AxTableRelationConstraint>
			</Constraints>
			<Index>SalesUnitIdx</Index>
		</AxTableRelation>
		<AxTableRelation xmlns=""
			i:type="AxTableRelationForeignKey">
			<Name>smmSourceTypeTable</Name>
			<Cardinality>ZeroMore</Cardinality>
			<EDTRelation>Yes</EDTRelation>
			<RelatedTable>smmSourceTypeTable</RelatedTable>
			<RelatedTableCardinality>ZeroOne</RelatedTableCardinality>
			<RelatedTableRole>smmSourceTypeTable</RelatedTableRole>
			<RelationshipType>Association</RelationshipType>
			<Role>smmOpportunityTable</Role>
			<UseDefaultRoleNames>No</UseDefaultRoleNames>
			<Constraints>
				<AxTableRelationConstraint xmlns=""
					i:type="AxTableRelationConstraintField">
					<Name>SourceTypeId</Name>
					<SourceEDT>SmmSourceTypeId</SourceEDT>
					<Field>SourceTypeId</Field>
					<RelatedField>TypeId</RelatedField>
				</AxTableRelationConstraint>
			</Constraints>
			<Index>TypeIdx</Index>
		</AxTableRelation>
	</Relations>
	<StateMachines />
</AxTable>